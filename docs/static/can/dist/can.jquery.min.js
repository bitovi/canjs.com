/*[global-shim]*/
!function(exports,global){var origDefine=global.define,get=function(e){var o,l=e.split("."),n=global;for(o=0;o<l.length&&n;o++)n=n[l[o]];return n},modules=global.define&&global.define.modules||{},ourDefine=global.define=function(e,o,l){var n;"function"==typeof o&&(l=o,o=[]);var i,t=[];for(i=0;i<o.length;i++)t.push(exports[o[i]]?get(exports[o[i]]):modules[o[i]]||get(o[i]));if(!o.length&&l.length){n={exports:{}};var f=function(e){return exports[e]?get(exports[e]):modules[e]};t.push(f,n.exports,n)}global.define=origDefine;var r=l?l.apply(null,t):void 0;global.define=ourDefine,modules[e]=n&&n.exports?n.exports:r};global.define.modules=modules,global.define.amd=!0,global.System={define:function(__name,__code){global.define=origDefine,eval("(function() { "+__code+" \n }).call(global);"),global.define=ourDefine}}}({},window);
/*util/can*/
define("can/util/can",[],function(){var e="undefined"!=typeof window?window:global,n={};("undefined"==typeof GLOBALCAN||GLOBALCAN!==!1)&&(e.can=n),n.global=e,n.k=function(){},n.isDeferred=function(e){return e&&"function"==typeof e.then&&"function"==typeof e.pipe};var t=0;return n.cid=function(e,n){return e._cid||(t++,e._cid=(n||"")+t),e._cid},n.VERSION="2.2.0-alpha.8",n.simpleExtend=function(e,n){for(var t in n)e[t]=n[t];return e},n.frag=function(e){var t;return e&&"string"!=typeof e?11===e.nodeType?e:"number"==typeof e.nodeType?(t=document.createDocumentFragment(),t.appendChild(e),t):"number"==typeof e.length?(t=document.createDocumentFragment(),n.each(e,function(e){t.appendChild(n.frag(e))}),t):(t=n.buildFragment(""+e,document.body),t.childNodes.length||t.appendChild(document.createTextNode("")),t):(t=n.buildFragment(null==e?"":""+e,document.body),t.childNodes.length||t.appendChild(document.createTextNode("")),t)},n.scope=function(e,t){e=n.$(e);var o=n.data(e,"scope");return o||(o=n.Map?new n.Map:{},n.data(e,"scope",o)),t?o.attr(t):o},n["import"]=function(e){var t=new n.Deferred;return"object"==typeof window.System?window.System["import"](e).then(n.proxy(t.resolve,t),n.proxy(t.reject,t)):window.require&&window.require.amd?window.require([e],function(e){t.resolve(e)}):window.steal?steal.steal(e,function(e){t.resolve(e)}):window.require?t.resolve(window.require(e)):t.resolve(),t.promise()},n.__reading=function(){},n});
/*util/attr/attr*/
define("can/util/attr/attr",["can/util/can"],function(t){var e=t.global.setImmediate||function(t){return setTimeout(t,0)},r={MutationObserver:t.global.MutationObserver||t.global.WebKitMutationObserver||t.global.MozMutationObserver,map:{"class":"className",value:"value",innerText:"innerText",textContent:"textContent",checked:!0,disabled:!0,readonly:!0,required:!0,src:function(t,e){return null==e||""===e?(t.removeAttribute("src"),null):(t.setAttribute("src",e),e)},style:function(t,e){return t.style.cssText=e||""}},defaultValue:["input","textarea"],set:function(e,n,a){var u;r.MutationObserver||(u=r.get(e,n));var i,o=e.nodeName.toString().toLowerCase(),l=r.map[n];"function"==typeof l?i=l(e,a):l===!0?(i=e[n]=!0,"checked"===n&&"radio"===e.type&&t.inArray(o,r.defaultValue)>=0&&(e.defaultChecked=!0)):l?(i=e[l]=a,"value"===l&&t.inArray(o,r.defaultValue)>=0&&(e.defaultValue=a)):(e.setAttribute(n,a),i=a),r.MutationObserver||i===u||r.trigger(e,n,u)},trigger:function(r,n,a){return t.data(t.$(r),"canHasAttributesBindings")?e(function(){t.trigger(r,{type:"attributes",attributeName:n,target:r,oldValue:a,bubbles:!1},[])}):void 0},get:function(t,e){var n=r.map[e];return"string"==typeof n&&t[n]?t[n]:t.getAttribute(e)},remove:function(t,e){var n;r.MutationObserver||(n=r.get(t,e));var a=r.map[e];"function"==typeof a&&a(t,void 0),a===!0?t[e]=!1:"string"==typeof a?t[a]="":t.removeAttribute(e),r.MutationObserver||null==n||r.trigger(t,e,n)},has:function(){var e=t.global.document&&document.createElement("div");return e&&e.hasAttribute?function(t,e){return t.hasAttribute(e)}:function(t,e){return null!==t.getAttribute(e)}}()};return r});
/*event/event*/
define("can/event/event",["can/util/can"],function(t){return t.addEvent=function(t,n){var e=this.__bindEvents||(this.__bindEvents={}),i=e[t]||(e[t]=[]);return i.push({handler:n,name:t}),this},t.listenTo=function(n,e,i){var r=this.__listenToEvents;r||(r=this.__listenToEvents={});var s=t.cid(n),o=r[s];o||(o=r[s]={obj:n,events:{}});var a=o.events[e];a||(a=o.events[e]=[]),a.push(i),t.bind.call(n,e,i)},t.stopListening=function(n,e,i){var r=this.__listenToEvents,s=r,o=0;if(!r)return this;if(n){var a=t.cid(n);if((s={})[a]=r[a],!r[a])return this}for(var v in s){var l,h=s[v];n=r[v].obj,e?(l={})[e]=h.events[e]:l=h.events;for(var u in l){var d=l[u]||[];for(o=0;o<d.length;)i&&i===d[o]||!i?(t.unbind.call(n,u,d[o]),d.splice(o,1)):o++;d.length||delete h.events[u]}t.isEmptyObject(h.events)&&delete r[v]}return this},t.removeEvent=function(t,n,e){if(!this.__bindEvents)return this;for(var i,r=this.__bindEvents[t]||[],s=0,o="function"==typeof n;s<r.length;)i=r[s],(e?e(i,t,n):o&&i.handler===n||!o&&(i.cid===n||!n))?r.splice(s,1):s++;return this},t.dispatch=function(t,n){var e=this.__bindEvents;if(e){"string"==typeof t&&(t={type:t});var i=t.type,r=(e[i]||[]).slice(0),s=[t];n&&s.push.apply(s,n);for(var o=0,a=r.length;a>o;o++)r[o].handler.apply(this,s);return t}},t.one=function(n,e){var i=function(){return t.unbind.call(this,n,i),e.apply(this,arguments)};return t.bind.call(this,n,i),this},t.event={on:function(){return 0===arguments.length&&t.Control&&this instanceof t.Control?t.Control.prototype.on.call(this):t.addEvent.apply(this,arguments)},off:function(){return 0===arguments.length&&t.Control&&this instanceof t.Control?t.Control.prototype.off.call(this):t.removeEvent.apply(this,arguments)},bind:t.addEvent,unbind:t.removeEvent,delegate:function(n,e,i){return t.addEvent.call(this,e,i)},undelegate:function(n,e,i){return t.removeEvent.call(this,e,i)},trigger:t.dispatch,one:t.one,addEvent:t.addEvent,removeEvent:t.removeEvent,listenTo:t.listenTo,stopListening:t.stopListening,dispatch:t.dispatch},t.event});
/*util/array/each*/
define("can/util/array/each",["can/util/can"],function(t){var e=function(t){var e=t.length;return"function"!=typeof arr&&(0===e||"number"==typeof e&&e>0&&e-1 in t)};return t.each=function(n,a,r){var f,i,l,c=0;if(n)if(e(n))if(t.List&&n instanceof t.List)for(i=n.attr("length");i>c&&(l=n.attr(c),a.call(r||l,l,c,n)!==!1);c++);else for(i=n.length;i>c&&(l=n[c],a.call(r||l,l,c,n)!==!1);c++);else if("object"==typeof n)if(t.Map&&n instanceof t.Map||n===t.route){var o=t.Map.keys(n);for(c=0,i=o.length;i>c&&(f=o[c],l=n.attr(f),a.call(r||l,l,f,n)!==!1);c++);}else for(f in n)if(n.hasOwnProperty(f)&&a.call(r||n[f],n[f],f,n)===!1)break;return n},t});
/*util/inserted/inserted*/
define("can/util/inserted/inserted",["can/util/can"],function(e){e.inserted=function(n){n=e.makeArray(n);for(var r,i,t=!1,a=e.$(document.contains?document:document.body),d=0;void 0!==(i=n[d]);d++){if(!t){if(!i.getElementsByTagName)continue;if(!e.has(a,i).length)return;t=!0}if(t&&i.getElementsByTagName){r=e.makeArray(i.getElementsByTagName("*")),e.trigger(i,"inserted",[],!1);for(var o,s=0;void 0!==(o=r[s]);s++)e.trigger(o,"inserted",[],!1)}}},e.appendChild=function(n,r){var i;i=11===r.nodeType?e.makeArray(r.childNodes):[r],n.appendChild(r),e.inserted(i)},e.insertBefore=function(n,r,i){var t;t=11===r.nodeType?e.makeArray(r.childNodes):[r],n.insertBefore(r,i),e.inserted(t)}});
/*util/jquery/jquery*/
define("can/util/jquery/jquery",["jquery@2.1.3#dist/jquery","can/util/can","can/util/attr/attr","can/event/event","can/util/array/each","can/util/inserted/inserted"],function(t,e,n){var r=function(t){return t.nodeName&&(1===t.nodeType||9===t.nodeType)||t==window};t=t||window.$,t.extend(e,t,{trigger:function(n,i,a,u){r(n)?t.event.trigger(i,a,n,!u):n.trigger?n.trigger(i,a):("string"==typeof i&&(i={type:i}),i.target=i.target||n,a&&(a.length&&"string"==typeof a?a=[a]:a.length||(a=[a])),a||(a=[]),e.dispatch.call(n,i,a))},event:e.event,addEvent:e.addEvent,removeEvent:e.removeEvent,buildFragment:function(e,n){var r;return e=[e],n=n||document,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,r=t.buildFragment(e,n),r.cacheable?t.clone(r.fragment):r.fragment||r},$:t,each:e.each,bind:function(n,i){return this.bind&&this.bind!==e.bind?this.bind(n,i):r(this)?t.event.add(this,n,i):e.addEvent.call(this,n,i),this},unbind:function(n,i){return this.unbind&&this.unbind!==e.unbind?this.unbind(n,i):r(this)?t.event.remove(this,n,i):e.removeEvent.call(this,n,i),this},delegate:function(n,i,a){return this.delegate?this.delegate(n,i,a):r(this)?t(this).delegate(n,i,a):e.bind.call(this,i,a),this},undelegate:function(n,i,a){return this.undelegate?this.undelegate(n,i,a):r(this)?t(this).undelegate(n,i,a):e.unbind.call(this,i,a),this},proxy:function(t,e){return function(){return t.apply(e,arguments)}},attr:n}),e.on=e.bind,e.off=e.unbind,t.each(["append","filter","addClass","remove","data","get","has"],function(t,n){e[n]=function(t){return t[n].apply(t,e.makeArray(arguments).slice(1))}});var i=t.cleanData;t.cleanData=function(n){t.each(n,function(t,n){n&&e.trigger(n,"removed",[],!1)}),i(n)};var a,u=t.fn.domManip;if(t.fn.domManip=function(){for(var t=1;t<arguments.length;t++)if("function"==typeof arguments[t]){a=t;break}return u.apply(this,arguments)},t(document.createElement("div")).append(document.createElement("div")),t.fn.domManip=2===a?function(t,n,r){return u.call(this,t,n,function(t){var n;11===t.nodeType&&(n=e.makeArray(t.childNodes));var i=r.apply(this,arguments);return e.inserted(n?n:[t]),i})}:function(t,n){return u.call(this,t,function(t){var r;11===t.nodeType&&(r=e.makeArray(t.childNodes));var i=n.apply(this,arguments);return e.inserted(r?r:[t]),i})},e.attr.MutationObserver)t.event.special.attributes={setup:function(){var t=this,n=new e.attr.MutationObserver(function(n){n.forEach(function(n){var r=e.simpleExtend({},n);e.trigger(t,r,[])})});n.observe(this,{attributes:!0,attributeOldValue:!0}),e.data(e.$(this),"canAttributesObserver",n)},teardown:function(){e.data(e.$(this),"canAttributesObserver").disconnect(),t.removeData(this,"canAttributesObserver")}};else{var s=t.attr;t.attr=function(t,n){var r,i;arguments.length>=3&&(r=s.call(this,t,n));var a=s.apply(this,arguments);return arguments.length>=3&&(i=s.call(this,t,n)),i!==r&&e.attr.trigger(t,n,r),a};var d=t.removeAttr;t.removeAttr=function(t,n){var r=s.call(this,t,n),i=d.apply(this,arguments);return null!=r&&e.attr.trigger(t,n,r),i},t.event.special.attributes={setup:function(){e.data(e.$(this),"canHasAttributesBindings",!0)},teardown:function(){t.removeData(this,"canHasAttributesBindings")}}}return function(){var t="<-\n>",n=e.buildFragment(t,document);if(t!==n.childNodes[0].nodeValue){var r=e.buildFragment;e.buildFragment=function(t,e){var n=r(t,e);return 1===n.childNodes.length&&3===n.childNodes[0].nodeType&&(n.childNodes[0].nodeValue=t),n}}}(),t.event.special.inserted={},t.event.special.removed={},e});
/*util/util*/
define("can/util/util",["can/util/jquery/jquery"],function(u){return u});
/*view/view*/
define("can/view/view",["can/util/util"],function(e){var r=e.isFunction,n=e.makeArray,t=1,i=function(e){var r=function(){return c.frag(e.apply(this,arguments))};return r.render=function(){return e.apply(e,arguments)},r},u=function(e,r){if(!e.length)throw"can.view: No template or empty template:"+r},a=function(n,t){if(r(n)){var i=e.Deferred();return i.resolve(n)}var a,o,d,f="string"==typeof n?n:n.url,s=n.engine&&"."+n.engine||f.match(/\.[\w\d]+$/);if(f.match(/^#/)&&(f=f.substr(1)),(o=document.getElementById(f))&&(s="."+o.type.match(/\/(x\-)?(.+)/)[2]),s||c.cached[f]||(f+=s=c.ext),e.isArray(s)&&(s=s[0]),d=c.toId(f),f.match(/^\/\//)&&(f=f.substr(2),f=window.steal?steal.config().root.mapJoin(""+steal.id(f)):f),window.require&&require.toUrl&&(f=require.toUrl(f)),a=c.types[s],c.cached[d])return c.cached[d];if(o)return c.registerView(d,o.innerHTML,a);var p=new e.Deferred;return e.ajax({async:t,url:f,dataType:"text",error:function(e){u("",f),p.reject(e)},success:function(e){u(e,f),c.registerView(d,e,a,p)}}),p},o=function(r){var n=[];if(e.isDeferred(r))return[r];for(var t in r)e.isDeferred(r[t])&&n.push(r[t]);return n},d=function(r){return e.isArray(r)&&"success"===r[1]?r[0]:r},c=e.view=e.template=function(e,n,t,i){return r(t)&&(i=t,t=void 0),c.renderAs("fragment",e,n,t,i)};return e.extend(c,{frag:function(e,r){return c.hookup(c.fragment(e),r)},fragment:function(r){if("string"!=typeof r&&11===r.nodeType)return r;var n=e.buildFragment(r,document.body);return n.childNodes.length||n.appendChild(document.createTextNode("")),n},toId:function(r){return e.map(r.toString().split(/\/|\./g),function(e){return e?e:void 0}).join("_")},toStr:function(e){return null==e?"":""+e},hookup:function(r,n){var t,i,u=[];return e.each(r.childNodes?e.makeArray(r.childNodes):r,function(r){1===r.nodeType&&(u.push(r),u.push.apply(u,e.makeArray(r.getElementsByTagName("*"))))}),e.each(u,function(e){e.getAttribute&&(t=e.getAttribute("data-view-id"))&&(i=c.hookups[t])&&(i(e,n,t),delete c.hookups[t],e.removeAttribute("data-view-id"))}),r},hookups:{},hook:function(e){return c.hookups[++t]=e," data-view-id='"+t+"'"},cached:{},cachedRenderers:{},cache:!0,register:function(r){this.types["."+r.suffix]=r,e[r.suffix]=c[r.suffix]=function(e,n){var t,u;if(!n)return u=function(){return t||(t=r.fragRenderer?r.fragRenderer(null,e):i(r.renderer(null,e))),t.apply(this,arguments)},u.render=function(){var n=r.renderer(null,e);return n.apply(n,arguments)},u;var a=function(){return t||(t=r.fragRenderer?r.fragRenderer(e,n):r.renderer(e,n)),t.apply(this,arguments)};return r.fragRenderer?c.preload(e,a):c.preloadStringRenderer(e,a)}},types:{},ext:".ejs",registerScript:function(e,r,n){return"can.view.preloadStringRenderer('"+r+"',"+c.types["."+e].script(r,n)+");"},preload:function(r,n){var t=c.cached[r]=(new e.Deferred).resolve(function(e,r){return n.call(e,e,r)});return t.__view_id=r,c.cachedRenderers[r]=n,n},preloadStringRenderer:function(e,r){return this.preload(e,i(r))},render:function(r,n,t,i){return e.view.renderAs("string",r,n,t,i)},renderTo:function(e,r,n,t){return("string"===e&&r.render?r.render:r)(n,t)},renderAs:function(t,i,u,f,s){r(f)&&(s=f,f=void 0);var p,l,g,h,v,m=o(u);if(m.length)return l=new e.Deferred,g=e.extend({},u),m.push(a(i,!0)),e.when.apply(e,m).then(function(r){var i,a=n(arguments),o=a.pop();if(e.isDeferred(u))g=d(r);else for(var c in u)e.isDeferred(u[c])&&(g[c]=d(a.shift()));i=e.view.renderTo(t,o,g,f),l.resolve(i,g),s&&s(i,g)},function(){l.reject.apply(l,arguments)}),l;if(p=e.__clearReading(),h=r(s),l=a(i,h),p&&e.__setReading(p),h)v=l,l.then(function(r){s(u?e.view.renderTo(t,r,u,f):r)});else{if("resolved"===l.state()&&l.__view_id){var w=c.cachedRenderers[l.__view_id];return u?e.view.renderTo(t,w,u,f):w}l.then(function(r){v=u?e.view.renderTo(t,r,u,f):r})}return v},registerView:function(r,n,t,u){var a,o="object"==typeof t?t:c.types[t||c.ext];return a=o.fragRenderer?o.fragRenderer(r,n):i(o.renderer(r,n)),u=u||new e.Deferred,c.cache&&(c.cached[r]=u,u.__view_id=r,c.cachedRenderers[r]=a),u.resolve(a)}}),e});
/*view/callbacks/callbacks*/
define("can/view/callbacks/callbacks",["can/util/util","can/view/view"],function(t){var a=t.view.attr=function(t,a){if(!a){var r=e[t];if(!r)for(var n=0,l=i.length;l>n;n++){var s=i[n];if(s.match.test(t)){r=s.handler;break}}return r}"string"==typeof t?e[t]=a:i.push({match:t,handler:a})},e={},i=[],r=/[-\:]/,n=t.view.tag=function(a,e){if(!e){var i=l[a.toLowerCase()];return!i&&r.test(a)&&(i=function(){}),i}t.global.html5&&(t.global.html5.elements+=" "+a,t.global.html5.shivDocument()),l[a.toLowerCase()]=e},l={};return t.view.callbacks={_tags:l,_attributes:e,_regExpAttributes:i,tag:n,attr:a,tagHandler:function(a,e,i){var r,n=i.options.attr("tags."+e),s=n||l[e],c=i.scope;if(s){var o=t.__clearReading();r=s(a,i),t.__setReading(o)}else r=c;if(r&&i.subtemplate){c!==r&&(c=c.add(r));var v=i.subtemplate(c,i.options),f="string"==typeof v?t.view.frag(v):v;t.appendChild(a,f)}}},t.view.callbacks});
/*util/string/string*/
define("can/util/string/string",["can/util/util"],function(e){var r=/_|-/,n=/\=\=/,t=/([A-Z]+)([A-Z][a-z])/g,a=/([a-z\d])([A-Z])/g,u=/([a-z\d])([A-Z])/g,i=/\{([^\}]+)\}/g,c=/"/g,o=/'/g,l=/-+(.)?/g,p=/[a-z][A-Z]/g,f=function(e,r,n){var t=e[r];return void 0===t&&n===!0&&(t=e[r]={}),t},g=function(e){return/^f|^o/.test(typeof e)},d=function(e){var r=null===e||void 0===e||isNaN(e)&&""+e=="NaN";return""+(r?"":e)};return e.extend(e,{esc:function(e){return d(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(c,"&#34;").replace(o,"&#39;")},getObject:function(r,n,t){var a,u,i,c,o=r?r.split("."):[],l=o.length,p=0;if(n=e.isArray(n)?n:[n||window],c=n.length,!l)return n[0];for(p;c>p;p++){for(a=n[p],i=void 0,u=0;l>u&&g(a);u++)i=a,a=f(i,o[u]);if(void 0!==i&&void 0!==a)break}if(t===!1&&void 0!==a&&delete i[o[u-1]],t===!0&&void 0===a)for(a=n[0],u=0;l>u&&g(a);u++)a=f(a,o[u],!0);return a},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},camelize:function(e){return d(e).replace(l,function(e,r){return r?r.toUpperCase():""})},hyphenate:function(e){return d(e).replace(p,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},underscore:function(e){return e.replace(n,"/").replace(t,"$1_$2").replace(a,"$1_$2").replace(u,"_").toLowerCase()},sub:function(r,n,t){var a=[];return r=r||"",a.push(r.replace(i,function(r,u){var i=e.getObject(u,n,t===!0?!1:void 0);return void 0===i||null===i?(a=null,""):g(i)&&a?(a.push(i),""):""+i})),null===a?a:a.length<=1?a[0]:a},replacer:i,undHash:r}),e});
/*construct/construct*/
define("can/construct/construct",["can/util/string/string"],function(t){var n=0,e=function(t,n){var e=Object.getOwnPropertyDescriptor(t,n);return e&&(e.get||e.set)?e:null},r=function(n,r,o){o=o||n;var i;for(var s in n)(i=e(n,s))?this._defineProperty(o,r,s,i):t.Construct._overwrite(o,r,s,n[s])},o=function(n,e,r){r=r||n;for(var o in n)t.Construct._overwrite(r,e,o,n[o])};return t.Construct=function(){return arguments.length?t.Construct.extend.apply(t.Construct,arguments):void 0},t.extend(t.Construct,{constructorExtends:!0,newInstance:function(){var t,n=this.instance();return n.setup&&(t=n.setup.apply(n,arguments)),n.init&&n.init.apply(n,t||arguments),n},_inherit:Object.getOwnPropertyDescriptor?r:o,_defineProperty:function(t,n,e,r){Object.defineProperty(t,e,r)},_overwrite:function(t,n,e,r){t[e]=r},setup:function(n){this.defaults=t.extend(!0,{},n.defaults,this.defaults)},instance:function(){n=1;var t=new this;return n=0,t},extend:function(e,r,o){function i(){return n?void 0:this.constructor!==i&&arguments.length&&i.constructorExtends?i.extend.apply(i,arguments):i.newInstance.apply(i,arguments)}var s=e,u=r,c=o;"string"!=typeof s&&(c=u,u=s,s=null),c||(c=u,u=null),c=c||{};var a,p,f,l,d,y,g,h,v=this,m=this.prototype;h=this.instance(),t.Construct._inherit(c,m,h);for(d in v)v.hasOwnProperty(d)&&(i[d]=v[d]);t.Construct._inherit(u,v,i),s&&(a=s.split("."),y=a.pop(),p=t.getObject(a.join("."),window,!0),g=p,f=t.underscore(s.replace(/\./g,"_")),l=t.underscore(y),p[y]=i),t.extend(i,{constructor:i,prototype:h,namespace:g,_shortName:l,fullName:s,_fullName:f}),void 0!==y&&(i.shortName=y),i.prototype.constructor=i;var w=[v].concat(t.makeArray(arguments)),C=i.setup.apply(i,w);return i.init&&i.init.apply(i,C||w),i}}),t.Construct.prototype.setup=function(){},t.Construct.prototype.init=function(){},t.Construct});
/*control/control*/
define("can/control/control",["can/util/util","can/construct/construct"],function(t){var n,e=function(n,e,o){return t.bind.call(n,e,o),function(){t.unbind.call(n,e,o)}},o=t.isFunction,s=t.extend,i=t.each,r=[].slice,u=/\{([^\}]+)\}/g,c=t.getObject("$.event.special",[t])||{},l=function(n,e,o,s){return t.delegate.call(n,e,o,s),function(){t.undelegate.call(n,e,o,s)}},a=function(n,o,s,i){return i?l(n,t.trim(i),o,s):e(n,o,s)},h=t.Control=t.Construct({setup:function(){if(t.Construct.setup.apply(this,arguments),t.Control){var n,e=this;e.actions={};for(n in e.prototype)e._isAction(n)&&(e.actions[n]=e._action(n))}},_shifter:function(n,e){var s="string"==typeof e?n[e]:e;return o(s)||(s=n[s]),function(){return n.called=e,s.apply(n,[this.nodeName?t.$(this):this].concat(r.call(arguments,0)))}},_isAction:function(t){var n=this.prototype[t],e=typeof n;return"constructor"!==t&&("function"===e||"string"===e&&o(this.prototype[n]))&&!!(c[t]||f[t]||/[^\w]/.test(t))},_action:function(e,o){if(u.lastIndex=0,o||!u.test(e)){var s=o?t.sub(e,this._lookup(o)):e;if(!s)return null;var i=t.isArray(s),r=i?s[1]:s,c=r.split(/\s+/g),l=c.pop();return{processor:f[l]||n,parts:[r,c.join(" "),l],delegate:i?s[0]:void 0}}},_lookup:function(t){return[t,window]},processors:{},defaults:{}},{setup:function(n,e){var o,i=this.constructor,r=i.pluginName||i._fullName;return this.element=t.$(n),r&&"can_control"!==r&&this.element.addClass(r),o=t.data(this.element,"controls"),o||(o=[],t.data(this.element,"controls",o)),o.push(this),this.options=s({},i.defaults,e),this.on(),[this.element,this.options]},on:function(n,e,o,s){if(!n){this.off();var i,r,u=this.constructor,c=this._bindings,l=u.actions,h=this.element,f=t.Control._shifter(this,"destroy");for(i in l)l.hasOwnProperty(i)&&(r=l[i]||u._action(i,this.options,this),r&&(c.control[i]=r.processor(r.delegate||h,r.parts[2],r.parts[1],i,this)));return t.bind.call(h,"removed",f),c.user.push(function(n){t.unbind.call(n,"removed",f)}),c.user.length}return"string"==typeof n&&(s=o,o=e,e=n,n=this.element),void 0===s&&(s=o,o=e,e=null),"string"==typeof s&&(s=t.Control._shifter(this,s)),this._bindings.user.push(a(n,o,s,e)),this._bindings.user.length},off:function(){var t=this.element[0],n=this._bindings;n&&(i(n.user||[],function(n){n(t)}),i(n.control||{},function(n){n(t)})),this._bindings={user:[],control:{}}},destroy:function(){if(null!==this.element){var n,e=this.constructor,o=e.pluginName||e._fullName;this.off(),o&&"can_control"!==o&&this.element.removeClass(o),n=t.data(this.element,"controls"),n.splice(t.inArray(this,n),1),t.trigger(this,"destroyed"),this.element=null}}}),f=t.Control.processors;return n=function(n,e,o,s,i){return a(n,e,t.Control._shifter(i,s),o)},i(["change","click","contextmenu","dblclick","keydown","keyup","keypress","mousedown","mousemove","mouseout","mouseover","mouseup","reset","resize","scroll","select","submit","focusin","focusout","mouseenter","mouseleave","touchstart","touchmove","touchcancel","touchend","touchleave","inserted","removed"],function(t){f[t]=n}),h});
/*util/bind/bind*/
define("can/util/bind/bind",["can/util/util"],function(i){return i.bindAndSetup=function(){return i.addEvent.apply(this,arguments),this._init||(this._bindings?this._bindings++:(this._bindings=1,this._bindsetup&&this._bindsetup())),this},i.unbindAndTeardown=function(){return i.removeEvent.apply(this,arguments),null===this._bindings?this._bindings=0:this._bindings--,!this._bindings&&this._bindteardown&&this._bindteardown(),this},i});
/*map/bubble*/
define("can/map/bubble",["can/util/util"],function(n){var e=n.bubble={event:function(n,e){return n.constructor._bubbleRule(e,n)},childrenOf:function(n,i){n._each(function(b,t){b&&b.bind&&e.toParent(b,n,t,i)})},teardownChildrenFrom:function(n,i){n._each(function(b){e.teardownFromParent(n,b,i)})},toParent:function(e,i,b,t){n.listenTo.call(i,e,t,function(){var t=n.makeArray(arguments),r=t.shift();t[0]=(n.List&&i instanceof n.List?i.indexOf(e):b)+(t[0]?"."+t[0]:""),r.triggeredNS=r.triggeredNS||{},r.triggeredNS[i._cid]||(r.triggeredNS[i._cid]=!0,n.trigger(i,r,t))})},teardownFromParent:function(e,i,b){i&&i.unbind&&n.stopListening.call(e,i,b)},isBubbling:function(n,e){return n._bubbleBindings&&n._bubbleBindings[e]},bind:function(n,i){if(!n._init){var b=e.event(n,i);b&&(n._bubbleBindings||(n._bubbleBindings={}),n._bubbleBindings[b]?n._bubbleBindings[b]++:(n._bubbleBindings[b]=1,e.childrenOf(n,b)))}},unbind:function(i,b){var t=e.event(i,b);t&&(i._bubbleBindings&&i._bubbleBindings[t]--,i._bubbleBindings&&!i._bubbleBindings[t]&&(delete i._bubbleBindings[t],e.teardownChildrenFrom(i,t),n.isEmptyObject(i._bubbleBindings)&&delete i._bubbleBindings))},add:function(i,b,t){if(b instanceof n.Map&&i._bubbleBindings)for(var r in i._bubbleBindings)i._bubbleBindings[r]&&(e.teardownFromParent(i,b,r),e.toParent(b,i,t,r))},removeMany:function(n,i){for(var b=0,t=i.length;t>b;b++)e.remove(n,i[b])},remove:function(i,b){if(b instanceof n.Map&&i._bubbleBindings)for(var t in i._bubbleBindings)i._bubbleBindings[t]&&e.teardownFromParent(i,b,t)},set:function(i,b,t,r){return n.Map.helpers.isObservable(t)&&e.add(i,t,b),n.Map.helpers.isObservable(r)&&e.remove(i,r),t}};return e});
/*util/batch/batch*/
define("can/util/batch/batch",["can/util/can"],function(t){var i=1,n=0,c=[],a=[];t.batch={start:function(t){n++,t&&a.push(t)},stop:function(h,e){if(h?n=0:n--,0===n){var f,r,l=c.slice(0),s=a.slice(0);for(c=[],a=[],i++,e&&t.batch.start(),f=0,r=l.length;r>f;f++)t.dispatch.apply(l[f][0],l[f][1]);for(f=0,r=s.length;f<s.length;f++)s[f]()}},trigger:function(a,h,e){if(!a._init){if(0===n)return t.dispatch.call(a,h,e);h="string"==typeof h?{type:h}:h,h.batchNum=i,c.push([a,[h,e]])}}}});
/*map/map*/
define("can/map/map",["can/util/util","can/util/bind/bind","can/map/bubble","can/construct/construct","can/util/batch/batch"],function(t,e,i){var n=null,s=function(){for(var t in n)n[t].added&&delete n[t].obj._cid;n=null},r=function(t){return n&&n[t._cid]&&n[t._cid].instance},a=null,o=t.Map=t.Construct.extend({setup:function(){if(t.Construct.setup.apply(this,arguments),t.Map){this.defaults||(this.defaults={}),this._computes=[];for(var e in this.prototype)"define"!==e&&"constructor"!==e&&("function"!=typeof this.prototype[e]||this.prototype[e].prototype instanceof t.Construct)?this.defaults[e]=this.prototype[e]:this.prototype[e].isComputed&&this._computes.push(e);this.helpers.define&&this.helpers.define(this)}!t.List||this.prototype instanceof t.List||(this.List=o.List.extend({Map:this},{}))},_bubble:i,_bubbleRule:function(t){return("change"===t||t.indexOf(".")>=0)&&"change"},_computes:[],bind:t.bindAndSetup,on:t.bindAndSetup,unbind:t.unbindAndTeardown,off:t.unbindAndTeardown,id:"id",helpers:{define:null,attrParts:function(t,e){return e?[t]:"object"==typeof t?t:(""+t).split(".")},addToMap:function(e,i){var r;n||(r=s,n={});var a=e._cid,o=t.cid(e);return n[o]||(n[o]={obj:e,instance:i,added:!a}),r},isObservable:function(e){return e instanceof t.Map||e&&e===t.route},canMakeObserve:function(e){return e&&!t.isDeferred(e)&&(t.isArray(e)||t.isPlainObject(e))},serialize:function(e,i,n){var s=t.cid(e),r=!1;return a||(r=!0,a={attr:{},serialize:{}}),a[i][s]=n,e.each(function(s,r){var u,h=o.helpers.isObservable(s),c=h&&a[i][t.cid(s)];u=c?c:"serialize"===i?o.helpers._serialize(e,r,s):o.helpers._getValue(e,r,s,i),void 0!==u&&(n[r]=u)}),t.__reading(e,"__keys"),r&&(a=null),n},_serialize:function(t,e,i){return o.helpers._getValue(t,e,i,"serialize")},_getValue:function(t,e,i,n){return o.helpers.isObservable(i)?i[n]():i}},keys:function(e){var i=[];t.__reading(e,"__keys");for(var n in e._data)i.push(n);return i}},{setup:function(e){e instanceof t.Map&&(e=e.serialize()),this._data={},t.cid(this,".map"),this._init=1,this._computedBindings={};var i=this._setupDefaults(e);this._setupComputes(i);var n=e&&t.Map.helpers.addToMap(e,this),s=t.extend(t.extend(!0,{},i),e);this.attr(s),n&&n(),this.bind("change",t.proxy(this._changes,this)),delete this._init},_setupComputes:function(){for(var t,e=this.constructor._computes,i=0,n=e.length;n>i;i++)t=e[i],this[t]=this[t].clone(this),this._computedBindings[t]={count:0}},_setupDefaults:function(){return this.constructor.defaults||{}},_bindsetup:function(){},_bindteardown:function(){},_changes:function(e,i,n,s,r){t.batch.trigger(this,{type:i,batchNum:e.batchNum,target:e.target},[s,r])},_triggerChange:function(e,n,s,r){i.isBubbling(this,"change")?t.batch.trigger(this,{type:"change",target:this},[e,n,s,r]):t.batch.trigger(this,e,[s,r]),("remove"===n||"add"===n)&&t.batch.trigger(this,{type:"__keys",target:this})},_each:function(t){var e=this.__get();for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},attr:function(e,i){var n=typeof e;return"string"!==n&&"number"!==n?this._attrs(e,i):1===arguments.length?(t.__reading(this,e),this._get(e)):(this._set(e,i),this)},each:function(){return t.each.apply(void 0,[this].concat(t.makeArray(arguments)))},removeAttr:function(e){var i=t.List&&this instanceof t.List,n=t.Map.helpers.attrParts(e),s=n.shift(),r=i?this[s]:this._data[s];return n.length&&r?r.removeAttr(n):("string"==typeof e&&~e.indexOf(".")&&(s=e),this._remove(s,r),r)},_remove:function(t,e){t in this._data&&(delete this._data[t],t in this.constructor.prototype||delete this[t],this._triggerChange(t,"remove",void 0,e))},_get:function(t){t=""+t;var e=t.indexOf(".");if(e>=0){var i=this.__get(t);if(void 0!==i)return i;var n=t.substr(0,e),s=t.substr(e+1),r=this.__get(n);return r&&r._get?r._get(s):void 0}return this.__get(t)},__get:function(t){return t?this._computedBindings[t]?this[t]():this._data[t]:this._data},__type:function(e){if(!(e instanceof t.Map)&&t.Map.helpers.canMakeObserve(e)){var i=r(e);if(i)return i;if(t.isArray(e)){var n=t.List;return new n(e)}var s=this.constructor.Map||t.Map;return new s(e)}return e},_set:function(t,e,i){t=""+t;var n,s=t.indexOf(".");if(!i&&s>=0){var r=t.substr(0,s),a=t.substr(s+1);if(n=this._init?void 0:this.__get(r),!o.helpers.isObservable(n))throw"can.Map: Object does not exist";n._set(a,e)}else this.__convert&&(e=this.__convert(t,e)),n=this._init?void 0:this.__get(t),this.__set(t,this.__type(e,t),n)},__set:function(t,e,i){if(e!==i){var n=void 0!==i||this.__get().hasOwnProperty(t)?"set":"add";this.___set(t,this.constructor._bubble.set(this,t,e,i)),this._triggerChange(t,n,e,i),i&&this.constructor._bubble.teardownFromParent(this,i)}},___set:function(t,e){this._computedBindings[t]?this[t](e):this._data[t]=e,"function"==typeof this.constructor.prototype[t]||this._computedBindings[t]||(this[t]=e)},bind:function(e){var i=this._computedBindings&&this._computedBindings[e];if(i)if(i.count)i.count++;else{i.count=1;var n=this;i.handler=function(i,s,r){t.batch.trigger(n,{type:e,batchNum:i.batchNum,target:n},[s,r])},this[e].bind("change",i.handler)}return this.constructor._bubble.bind(this,e),t.bindAndSetup.apply(this,arguments)},unbind:function(e){var i=this._computedBindings&&this._computedBindings[e];return i&&(1===i.count?(i.count=0,this[e].unbind("change",i.handler),delete i.handler):i.count--),this.constructor._bubble.unbind(this,e),t.unbindAndTeardown.apply(this,arguments)},serialize:function(){return t.Map.helpers.serialize(this,"serialize",{})},_attrs:function(e,i){if(void 0===e)return o.helpers.serialize(this,"attr",{});e=t.simpleExtend({},e);var n,s,r=this;t.batch.start(),this.each(function(t,n){if("_cid"!==n){if(s=e[n],void 0===s)return void(i&&r.removeAttr(n));r.__convert&&(s=r.__convert(n,s)),o.helpers.isObservable(s)?r.__set(n,r.__type(s,n),t):o.helpers.isObservable(t)&&o.helpers.canMakeObserve(s)?t.attr(s,i):t!==s&&r.__set(n,r.__type(s,n),t),delete e[n]}});for(n in e)"_cid"!==n&&(s=e[n],this._set(n,s,!0));return t.batch.stop(),this},compute:function(e){if(t.isFunction(this.constructor.prototype[e]))return t.compute(this[e],this);var i=e.split("."),n=i.length-1,s={args:[]};return t.compute(function(e){return arguments.length?void t.compute.read(this,i.slice(0,n)).value.attr(i[n],e):t.compute.read(this,i,s).value},this)}});return o.prototype.on=o.prototype.bind,o.prototype.off=o.prototype.unbind,o});
/*list/list*/
define("can/list/list",["can/util/util","can/map/map","can/map/bubble"],function(t,e,i){var r=[].splice,s=function(){var t={0:"a",length:1};return r.call(t,0,1),!t[0]}(),h=e.extend({Map:e},{setup:function(e,i){this.length=0,t.cid(this,".map"),this._init=1,this._computedBindings={},this._setupComputes(),e=e||[];var r;t.isDeferred(e)?this.replace(e):(r=e.length&&t.Map.helpers.addToMap(e,this),this.push.apply(this,t.makeArray(e||[]))),r&&r(),this.bind("change",t.proxy(this._changes,this)),t.simpleExtend(this,i),delete this._init},_triggerChange:function(i,r,s,h){e.prototype._triggerChange.apply(this,arguments);var n=+i;~i.indexOf(".")||isNaN(n)||("add"===r?(t.batch.trigger(this,r,[s,n]),t.batch.trigger(this,"length",[this.length])):"remove"===r?(t.batch.trigger(this,r,[h,n]),t.batch.trigger(this,"length",[this.length])):t.batch.trigger(this,r,[s,n]))},__get:function(e){return e?this[e]&&this[e].isComputed&&t.isFunction(this.constructor.prototype[e])?this[e]():this[e]:this},___set:function(t,e){this[t]=e,+t>=this.length&&(this.length=+t+1)},_remove:function(t,e){isNaN(+t)?(delete this[t],this._triggerChange(t,"remove",void 0,e)):this.splice(t,1)},_each:function(t){for(var e=this.__get(),i=0;i<e.length;i++)t(e[i],i)},serialize:function(){return e.helpers.serialize(this,"serialize",[])},splice:function(e,h){var n,a,o=t.makeArray(arguments),l=[];for(n=2,a=o.length;a>n;n++)o[n]=this.__type(o[n],n),l.push(o[n]);void 0===h&&(h=o[1]=this.length-e);var c=r.apply(this,o);if(!s)for(n=this.length;n<c.length+this.length;n++)delete this[n];if(t.batch.start(),h>0&&(i.removeMany(this,c),this._triggerChange(""+e,"remove",void 0,c)),o.length>2){for(n=0,a=l.length;a>n;n++)i.set(this,n,l[n]);this._triggerChange(""+e,"add",l,c)}return t.batch.stop(),c},_attrs:function(i,r){return void 0===i?e.helpers.serialize(this,"attr",[]):(i=t.makeArray(i),t.batch.start(),this._updateAttrs(i,r),void t.batch.stop())},_updateAttrs:function(t,i){for(var r=Math.min(t.length,this.length),s=0;r>s;s++){var h=this[s],n=t[s];e.helpers.isObservable(h)&&e.helpers.canMakeObserve(n)?h.attr(n,i):h!==n&&this._set(s,n)}t.length>this.length?this.push.apply(this,t.slice(this.length)):t.length<this.length&&i&&this.splice(t.length)}}),n=function(e){return e[0]&&t.isArray(e[0])?e[0]:t.makeArray(e)};return t.each({push:"length",unshift:0},function(t,e){var r=[][e];h.prototype[e]=function(){for(var e,s,h=[],n=t?this.length:0,a=arguments.length;a--;)s=arguments[a],h[a]=i.set(this,a,this.__type(s,a));return e=r.apply(this,h),(!this.comparator||h.length)&&this._triggerChange(""+n,"add",h,void 0),e}}),t.each({pop:"length",shift:0},function(t,e){h.prototype[e]=function(){var r=n(arguments),s=t&&this.length?this.length-1:0,h=[][e].apply(this,r);return this._triggerChange(""+s,"remove",void 0,[h]),h&&h.unbind&&i.remove(this,h),h}}),t.extend(h.prototype,{indexOf:function(e,i){return this.attr("length"),t.inArray(e,this,i)},join:function(){return[].join.apply(this.attr(),arguments)},reverse:function(){var e=t.makeArray([].reverse.call(this));this.replace(e)},slice:function(){var t=Array.prototype.slice.apply(this,arguments);return new this.constructor(t)},concat:function(){var e=[];return t.each(t.makeArray(arguments),function(i,r){e[r]=i instanceof t.List?i.serialize():i}),new this.constructor(Array.prototype.concat.apply(this.serialize(),e))},forEach:function(e,i){return t.each(this,e,i||this)},replace:function(e){return t.isDeferred(e)?e.then(t.proxy(this.replace,this)):this.splice.apply(this,[0,this.length].concat(t.makeArray(e||[]))),this},filter:function(e,i){var r,s=new t.List,h=this;return this.each(function(t,n){r=e.call(i|h,t,n,h),r&&s.push(t)}),s}}),t.List=e.List=h,t.List});
/*compute/compute*/
define("can/compute/compute",["can/util/util","can/util/bind/bind","can/util/batch/batch"],function(n){var t=[];n.__read=function(n,e){t.push({});var o=n.call(e);return{value:o,observed:t.pop()}},n.__reading=function(n,e){t.length&&(t[t.length-1][n._cid+"|"+e]={obj:n,event:e+""})},n.__clearReading=function(){if(t.length){var n=t[t.length-1];return t[t.length-1]={},n}},n.__setReading=function(n){t.length&&(t[t.length-1]=n)},n.__addReading=function(e){t.length&&n.simpleExtend(t[t.length-1],e)};var e=function(t,e,u,i){var c=n.__read(t,e),a=c.observed;return o(u,a,i),r(u,i),c},o=function(n,t,e){for(var o in t)u(n,t,o,e)},u=function(n,t,e,o){if(n[e])delete n[e];else{var u=t[e];u.obj.bind(u.event,o)}},r=function(n,t){for(var e in n){var o=n[e];o.obj.unbind(o.event,t)}},i=function(t,e,o,u){e!==o&&n.batch.trigger(t,u?{type:"change",batchNum:u}:"change",[e,o])},c=function(t,o,u,r){var i,c,a;return{on:function(f){c||(c=function(n){if(t.bound&&(void 0===n.batchNum||n.batchNum!==a)){var r=i.value;i=e(o,u,i.observed,c),f(i.value,r,n.batchNum),a=a=n.batchNum}}),i=e(o,u,{},c),r(i.value),t.hasDependencies=!n.isEmptyObject(i.observed)},off:function(){for(var n in i.observed){var t=i.observed[n];t.obj.unbind(t.event,c)}}}},a=function(t,o,u,r){var i,c,a,f;return{on:function(l){a||(a=function(e){if(t.bound&&(void 0===e.batchNum||e.batchNum!==f)){var r=n.__clearReading(),i=o.call(u);n.__setReading(r),l(i,c,e.batchNum),c=i,f=f=e.batchNum}}),i=e(o,u,{},a),c=i.value,r(i.value),t.hasDependencies=!n.isEmptyObject(i.observed)},off:function(){for(var n in i.observed){var t=i.observed[n];t.obj.unbind(t.event,a)}}}},f=function(t){return t instanceof n.Map||t&&t.__get},l=function(){};n.compute=function(e,o,u,r){if(e&&e.isComputed)return e;for(var f,d,s,v=l,b=l,p=function(){return d},h=function(n){d=n},g=h,m=[],_=function(n,t,e){g(n),i(f,n,t,e)},y=0,C=arguments.length;C>y;y++)m[y]=arguments[y];if(f=function(e){if(arguments.length){var u=d,r=h.call(o,e,u);return f.hasDependencies?p.call(o):(d=void 0===r?p.call(o):r,i(f,d,u),d)}return t.length&&f.canReadForChangeEvent!==!1&&(n.__reading(f,"change"),f.bound||n.compute.temporarilyBind(f)),f.bound?d:p.call(o)},"function"==typeof e){h=e,p=e,f.canReadForChangeEvent=u===!1?!1:!0;var x=r?a(f,e,o||this,g):c(f,e,o||this,g);v=x.on,b=x.off}else if(o)if("string"==typeof o){var O=o,E=e instanceof n.Map;if(E){f.hasDependencies=!0;var N;p=function(){return e.attr(O)},h=function(n){e.attr(O,n)},v=function(t){N=function(n,e,o){t(e,o,n.batchNum)},e.bind(u||O,N),d=n.__read(p).value},b=function(){e.unbind(u||O,N)}}else p=function(){return e[O]},h=function(n){e[O]=n},v=function(t){N=function(){t(p(),d)},n.bind.call(e,u||O,N),d=n.__read(p).value},b=function(){n.unbind.call(e,u||O,N)}}else if("function"==typeof o)d=e,h=o,o=u,s="setter";else{d=e;var j=o,R=_;if(o=j.context||j,p=j.get||p,h=j.set||function(){return d},j.fn){var A,D=j.fn;p=function(){return D.call(o,d)},0===D.length?A=c(f,D,o,g):1===D.length?A=c(f,function(){return D.call(o,d)},o,g):(_=function(n){void 0!==n&&R(n,d)},A=c(f,function(){var n=D.call(o,d,function(n){R(n,d)});return void 0!==n?n:d},o,g)),v=A.on,b=A.off}else _=function(){var n=p.call(o);R(n,d)};v=j.on||v,b=j.off||b}else d=e;return n.cid(f,"compute"),n.simpleExtend(f,{isComputed:!0,_bindsetup:function(){this.bound=!0;var t=n.__clearReading();v.call(this,_),n.__setReading(t)},_bindteardown:function(){b.call(this,_),this.bound=!1},bind:n.bindAndSetup,unbind:n.unbindAndTeardown,clone:function(t){return t&&("setter"===s?m[2]=t:m[1]=t),n.compute.apply(n,m)}})};var d,s=function(){for(var n=0,t=d.length;t>n;n++)d[n].unbind("change",l);d=null};return n.compute.temporarilyBind=function(n){n.bind("change",l),d||(d=[],setTimeout(s,10)),d.push(n)},n.compute.truthy=function(t){return n.compute(function(){var n=t();return"function"==typeof n&&(n=n()),!!n})},n.compute.async=function(t,e,o){return n.compute(t,{fn:e,context:o})},n.compute.read=function(t,e,o){o=o||{};for(var u,r,i,c=t,a=0,l=e.length;l>a;a++)if(r=c,r&&r.isComputed&&(o.foundObservable&&o.foundObservable(r,a),r=c=r()),f(r)?(!i&&o.foundObservable&&o.foundObservable(r,a),i=1,c="function"==typeof r[e[a]]&&r.constructor.prototype[e[a]]===r[e[a]]?o.returnObserveMethods?c[e[a]]:"constructor"===e[a]&&r instanceof n.Construct||r[e[a]].prototype instanceof n.Construct?r[e[a]]:r[e[a]].apply(r,o.args||[]):c.attr(e[a])):c=null==c?void 0:r[e[a]],u=typeof c,c&&c.isComputed&&!o.isArgument&&l-1>a?(!i&&o.foundObservable&&o.foundObservable(r,a+1),c=c()):a<e.length-1&&"function"===u&&o.executeAnonymousFunctions&&!(n.Construct&&c.prototype instanceof n.Construct)&&(c=c()),a<e.length-1&&(null===c||"function"!==u&&"object"!==u))return o.earlyExit&&o.earlyExit(r,a,c),{value:void 0,parent:r};return"function"!=typeof c||n.Construct&&c.prototype instanceof n.Construct||n.route&&c===n.route||(o.isArgument?c.isComputed||o.proxyMethods===!1||(c=n.proxy(c,r)):(c.isComputed&&!i&&o.foundObservable&&o.foundObservable(c,a),c=c.call(r))),void 0===c&&o.earlyExit&&o.earlyExit(r,a-1),{value:c,parent:r}},n.compute.set=function(n,t,e){return f(n)?n.attr(t,e):n[t]&&n[t].isComputed?n[t](e):void("object"==typeof n&&(n[t]=e))},n.compute});
/*observe/observe*/
define("can/observe/observe",["can/util/util","can/map/map","can/list/list","can/compute/compute"],function(t){return t.Observe=t.Map,t.Observe.startBatch=t.batch.start,t.Observe.stopBatch=t.batch.stop,t.Observe.triggerBatch=t.batch.trigger,t});
/*view/scope/scope*/
define("can/view/scope/scope",["can/util/util","can/construct/construct","can/map/map","can/list/list","can/view/view","can/compute/compute"],function(e){var t=/(\\)?\./g,r=/\\\./g,n=function(e){var n=[],u=0;return e.replace(t,function(t,s,a){s||(n.push(e.slice(u,a).replace(r,".")),u=a+t.length)}),n.push(e.slice(u).replace(r,".")),n},u=e.Construct.extend({read:e.compute.read},{init:function(e,t){this._context=e,this._parent=t,this.__cache={}},attr:function(t,r){var n=e.__clearReading(),u=this.read(t,{isArgument:!0,returnObserveMethods:!0,proxyMethods:!1});if(2===arguments.length){var s=t.lastIndexOf("."),a=-1!==s?t.substring(0,s):".",i=this.read(a,{isArgument:!0,returnObserveMethods:!0,proxyMethods:!1}).value;-1!==s&&(t=t.substring(s+1,t.length)),e.compute.set(i,t,r)}return e.__setReading(n),u.value},add:function(e){return e!==this._context?new this.constructor(e,this):this},computeData:function(t,r){r=r||{args:[]};var n,u,s=this,a={compute:e.compute(function(i){if(!arguments.length){if(n)return e.compute.read(n,u,r).value;var c=s.read(t,r);return n=c.rootObserve,u=c.reads,a.scope=c.scope,a.initialValue=c.value,a.reads=c.reads,a.root=n,c.value}if(n.isComputed)n(i);else if(u.length){var o=u.length-1,l=u.length?e.compute.read(n,u.slice(0,o)).value:n;e.compute.set(l,u[o],i)}})};return a},compute:function(e,t){return this.computeData(e,t).compute},read:function(t,r){var u;if("./"===t.substr(0,2))u=!0,t=t.substr(2);else{if("../"===t.substr(0,3))return this._parent.read(t.substr(3),r);if(".."===t)return{value:this._parent._context};if("."===t||"this"===t)return{value:this._context}}for(var s,a,i,c,o,l,p=-1===t.indexOf("\\.")?t.split("."):n(t),d=this,v=[],h=-1;d;){if(s=d._context,null!==s){var f=e.compute.read(s,p,e.simpleExtend({foundObservable:function(e,t){o=e,l=p.slice(t)},earlyExit:function(t,r){r>h&&(a=o,v=l,h=r,c=d,i=e.__clearReading())},executeAnonymousFunctions:!0},r));if(void 0!==f.value)return{scope:d,rootObserve:o,value:f.value,reads:l}}e.__clearReading(),d=u?null:d._parent}return a?(e.__setReading(i),{scope:c,rootObserve:a,reads:v,value:void 0}):{names:p,value:void 0}}});return e.view.Scope=u,u});
/*view/elements*/
define("can/view/elements",["can/util/util","can/view/view"],function(t){var e="undefined"!=typeof document?document:null,n=e&&function(){return 1===t.$(document.createComment("~")).length}(),o={tagToContentPropMap:{option:e&&"textContent"in document.createElement("option")?"textContent":"innerText",textarea:"value"},attrMap:t.attr.map,attrReg:/([^\s=]+)[\s]*=[\s]*/,defaultValue:t.attr.defaultValue,tagMap:{"":"span",colgroup:"col",table:"tbody",tr:"td",ol:"li",ul:"li",tbody:"tr",thead:"tr",tfoot:"tr",select:"option",optgroup:"option"},reverseTagMap:{col:"colgroup",tr:"tbody",option:"select",td:"tr",th:"tr",li:"ul"},getParentNode:function(t,e){return e&&11===t.parentNode.nodeType?e:t.parentNode},setAttr:t.attr.set,getAttr:t.attr.get,removeAttr:t.attr.remove,contentText:function(t){return"string"==typeof t?t:t||0===t?""+t:""},after:function(e,n){var o=e[e.length-1];o.nextSibling?t.insertBefore(o.parentNode,n,o.nextSibling):t.appendChild(o.parentNode,n)},replace:function(e,r){o.after(e,r),t.remove(t.$(e)).length<e.length&&!n&&t.each(e,function(t){8===t.nodeType&&t.parentNode.removeChild(t)})}};return t.view.elements=o,o});
/*view/scanner*/
define("can/view/scanner",["can/view/view","can/view/elements","can/view/callbacks/callbacks"],function(can,elements,viewCallbacks){var newLine=/(\r|\n)+/g,notEndTag=/\//,clean=function(t){return t.split("\\").join("\\\\").split("\n").join("\\n").split('"').join('\\"').split("	").join("\\t")},getTag=function(t,e,n){if(t)return t;for(;n<e.length;){if("<"===e[n]&&!notEndTag.test(e[n+1]))return elements.reverseTagMap[e[n+1]]||"span";n++}return""},bracketNum=function(t){return--t.split("{").length- --t.split("}").length},myEval=function(script){eval(script)},attrReg=/([^\s]+)[\s]*=[\s]*$/,startTxt="var ___v1ew = [];",finishTxt="return ___v1ew.join('')",put_cmd="___v1ew.push(\n",insert_cmd=put_cmd,htmlTag=null,quote=null,beforeQuote=null,rescan=null,getAttrName=function(){var t=beforeQuote.match(attrReg);return t&&t[1]},status=function(){return quote?"'"+getAttrName()+"'":htmlTag?1:0},top=function(t){return t[t.length-1]},Scanner;return can.view.Scanner=Scanner=function(t){can.extend(this,{text:{},tokens:[]},t),this.text.options=this.text.options||"",this.tokenReg=[],this.tokenSimple={"<":"<",">":">",'"':'"',"'":"'"},this.tokenComplex=[],this.tokenMap={};for(var e,n=0;e=this.tokens[n];n++)e[2]?(this.tokenReg.push(e[2]),this.tokenComplex.push({abbr:e[1],re:new RegExp(e[2]),rescan:e[3]})):(this.tokenReg.push(e[1]),this.tokenSimple[e[1]]=e[0]),this.tokenMap[e[0]]=e[1];this.tokenReg=new RegExp("("+this.tokenReg.slice(0).concat(["<",">",'"',"'"]).join("|")+")","g")},Scanner.prototype={helpers:[],scan:function(t,e){var n=[],s=0,a=this.tokenSimple,r=this.tokenComplex;t=t.replace(newLine,"\n"),this.transform&&(t=this.transform(t)),t.replace(this.tokenReg,function(e,i){var o=arguments[arguments.length-2];if(o>s&&n.push(t.substring(s,o)),a[e])n.push(e);else for(var u,c=0;u=r[c];c++)if(u.re.test(e)){n.push(u.abbr),u.rescan&&n.push(u.rescan(i));break}s=o+i.length}),s<t.length&&n.push(t.substr(s));var i,o,u,c,l="",p=[startTxt+(this.text.start||"")],h=function(t,e){p.push(put_cmd,'"',clean(t),'"'+(e||"")+");")},g=[],f=null,m=!1,k={attributeHookups:[],tagHookups:[],lastTagHookup:""},b=function(){k.lastTagHookup=k.tagHookups.pop()+k.tagHookups.length},v="",x=[],w=!1,T=!1,d=0,_=this.tokenMap;for(htmlTag=quote=beforeQuote=null;void 0!==(u=n[d++]);){if(null===f)switch(u){case _.left:case _.escapeLeft:case _.returnLeft:m=htmlTag&&1;case _.commentLeft:f=u,l.length&&h(l),l="";break;case _.escapeFull:m=htmlTag&&1,rescan=1,f=_.escapeLeft,l.length&&h(l),rescan=n[d++],l=rescan.content||rescan,rescan.before&&h(rescan.before),n.splice(d,0,_.right);break;case _.commentFull:break;case _.templateLeft:l+=_.left;break;case"<":0!==n[d].indexOf("!--")&&(htmlTag=1,m=0),l+=u;break;case">":htmlTag=0;var H="/"===l.substr(l.length-1)||"--"===l.substr(l.length-2),N="";if(k.attributeHookups.length&&(N="attrs: ['"+k.attributeHookups.join("','")+"'], ",k.attributeHookups=[]),v+k.tagHookups.length!==k.lastTagHookup&&v===top(k.tagHookups))H&&(l=l.substr(0,l.length-1)),p.push(put_cmd,'"',clean(l),'"',",can.view.pending({tagName:'"+v+"',"+N+"scope: "+(this.text.scope||"this")+this.text.options),H?(p.push("}));"),l="/>",b()):"<"===n[d]&&n[d+1]==="/"+v?(p.push("}));"),l=u,b()):(p.push(",subtemplate: function("+this.text.argNames+"){\n"+startTxt+(this.text.start||"")),l="");else if(m||!w&&elements.tagToContentPropMap[x[x.length-1]]||N){var R=",can.view.pending({"+N+"scope: "+(this.text.scope||"this")+this.text.options+'}),"';H?h(l.substr(0,l.length-1),R+'/>"'):h(l,R+'>"'),l="",m=0}else l+=u;(H||w)&&(x.pop(),v=x[x.length-1],w=!1),k.attributeHookups=[];break;case"'":case'"':if(htmlTag)if(quote&&quote===u){quote=null;var L=getAttrName();if(viewCallbacks.attr(L)&&k.attributeHookups.push(L),T){l+=u,h(l),p.push(finishTxt,"}));\n"),l="",T=!1;break}}else if(null===quote&&(quote=u,beforeQuote=i,c=getAttrName(),"img"===v&&"src"===c||"style"===c)){h(l.replace(attrReg,"")),l="",T=!0,p.push(insert_cmd,"can.view.txt(2,'"+getTag(v,n,d)+"',"+status()+",this,function(){",startTxt),h(c+"="+u);break}default:if("<"===i){v="!--"===u.substr(0,3)?"!--":u.split(/\s/)[0];var S,y=!1;0===v.indexOf("/")&&(y=!0,S=v.substr(1)),y?(top(x)===S&&(v=S,w=!0),top(k.tagHookups)===S&&(h(l.substr(0,l.length-1)),p.push(finishTxt+"}}) );"),l="><",b())):(v.lastIndexOf("/")===v.length-1&&(v=v.substr(0,v.length-1)),"!--"!==v&&viewCallbacks.tag(v)&&("content"===v&&elements.tagMap[top(x)]&&(u=u.replace("content",elements.tagMap[top(x)])),k.tagHookups.push(v)),x.push(v))}l+=u}else switch(u){case _.right:case _.returnRight:switch(f){case _.left:o=bracketNum(l),1===o?(p.push(insert_cmd,"can.view.txt(0,'"+getTag(v,n,d)+"',"+status()+",this,function(){",startTxt,l),g.push({before:"",after:finishTxt+"}));\n"})):(s=g.length&&-1===o?g.pop():{after:";"},s.before&&p.push(s.before),p.push(l,";",s.after));break;case _.escapeLeft:case _.returnLeft:o=bracketNum(l),o&&g.push({before:finishTxt,after:"}));\n"});for(var j=f===_.escapeLeft?1:0,C={insert:insert_cmd,tagName:getTag(v,n,d),status:status(),specialAttribute:T},q=0;q<this.helpers.length;q++){var E=this.helpers[q];if(E.name.test(l)){l=E.fn(l,C),E.name.source===/^>[\s]*\w*/.source&&(j=0);break}}"object"==typeof l?l.startTxt&&l.end&&T?p.push(insert_cmd,"can.view.toStr( ",l.content,"() ) );"):(l.startTxt?p.push(insert_cmd,"can.view.txt(\n"+("string"==typeof status()||(null!=l.escaped?l.escaped:j))+",\n'"+v+"',\n"+status()+",\nthis,\n"):l.startOnlyTxt&&p.push(insert_cmd,"can.view.onlytxt(this,\n"),p.push(l.content),l.end&&p.push("));")):T?p.push(insert_cmd,l,");"):p.push(insert_cmd,"can.view.txt(\n"+("string"==typeof status()||j)+",\n'"+v+"',\n"+status()+",\nthis,\nfunction(){ "+(this.text.escape||"")+"return ",l,o?startTxt:"}));\n"),rescan&&rescan.after&&rescan.after.length&&(h(rescan.after.length),rescan=null)}f=null,l="";break;case _.templateLeft:l+=_.left;break;default:l+=u}i=u}l.length&&h(l),p.push(";");var M=p.join(""),A={out:(this.text.outStart||"")+M+" "+finishTxt+(this.text.outEnd||"")};return myEval.call(A,"this.fn = (function("+this.text.argNames+"){"+A.out+"});\r\n//# sourceURL="+e+".js"),A}},can.view.pending=function(t){var e=can.view.getHooks();return can.view.hook(function(n){can.each(e,function(t){t(n)}),t.templateType="legacy",t.tagName&&viewCallbacks.tagHandler(n,t.tagName,t),can.each(t&&t.attrs||[],function(e){t.attributeName=e;var s=viewCallbacks.attr(e);s&&s(n,t)})})},can.view.tag("content",function(t,e){return e.scope}),can.view.Scanner=Scanner,Scanner});
/*view/node_lists/node_lists*/
define("can/view/node_lists/node_lists",["can/util/util","can/view/elements"],function(e){var n=!0;try{document.createTextNode("")._=0}catch(t){n=!1}var r={},i={},a="ejs_"+Math.random(),s=0,u=function(e,t){var r=t||i,u=c(e,r);return u?u:n||3!==e.nodeType?(++s,e[a]=(e.nodeName?"element_":"obj_")+s):(++s,r["text_"+s]=e,"text_"+s)},c=function(e,t){if(n||3!==e.nodeType)return e[a];for(var r in t)if(t[r]===e)return r},l=[].splice,o=[].push,p=function(e){for(var n=0,t=0,r=e.length;r>t;t++){var i=e[t];i.nodeType?n++:n+=p(i)}return n},d=function(e,n){for(var t={},r=0,i=e.length;i>r;r++){var a=f.first(e[r]);t[u(a,n)]=e[r]}return t},f={id:u,update:function(n,t){var r=f.unregisterChildren(n);t=e.makeArray(t);var i=n.length;return l.apply(n,[0,i].concat(t)),n.replacements?f.nestReplacements(n):f.nestList(n),r},nestReplacements:function(e){for(var n=0,t={},r=d(e.replacements,t),i=e.replacements.length;n<e.length&&i;){var a=e[n],s=r[c(a,t)];s&&(e.splice(n,p(s),s),i--),n++}e.replacements=[]},nestList:function(e){for(var n=0;n<e.length;){var t=e[n],i=r[u(t)];i?i!==e&&e.splice(n,p(i),i):r[u(t)]=e,n++}},last:function(e){var n=e[e.length-1];return n.nodeType?n:f.last(n)},first:function(e){var n=e[0];return n.nodeType?n:f.first(n)},register:function(e,n,t){return e.unregistered=n,e.parentList=t,t===!0?e.replacements=[]:t?(t.replacements.push(e),e.replacements=[]):f.nestList(e),e},unregisterChildren:function(n){var t=[];return e.each(n,function(e){e.nodeType?(n.replacements||delete r[u(e)],t.push(e)):o.apply(t,f.unregister(e))}),t},unregister:function(e){var n=f.unregisterChildren(e);if(e.unregistered){var t=e.unregistered;delete e.unregistered,delete e.replacements,t()}return n},nodeMap:r};return e.view.nodeLists=f,f});
/*view/parser/parser*/
define("can/view/parser/parser",["can/view/view"],function(e){function t(e){for(var t={},r=e.split(","),a=0;a<r.length;a++)t[r[a]]=!0;return t}function r(e,t){for(var r=0,a=e.length;a>r;r++){var n=e[r];t[n.tokenType].apply(t,n.args)}return e}var a="-:A-Za-z0-9_",n="[a-zA-Z_:]["+a+":.]*",s="\\s*=\\s*",i='"((?:\\\\.|[^"])*)"',o="'((?:\\\\.|[^'])*)'",l="(?:"+s+"(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?",c="\\{\\{[^\\}]*\\}\\}\\}?",u="\\{\\{([^\\}]*)\\}\\}\\}?",p=new RegExp("^<(["+a+"]+)((?:\\s*(?:(?:(?:"+n+")?"+l+")|(?:"+c+")+))*)\\s*(\\/?)>"),f=new RegExp("^<\\/(["+a+"]+)[^>]*>"),d=new RegExp("(?:(?:("+n+")|"+u+")(?:"+s+"(?:(?:"+i+")|(?:"+o+")|([^>\\s]+)))?)","g"),g=new RegExp(u,"g"),h=/<|\{\{/,m=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),b=t("address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),v=t("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),x=t("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),w=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),y=t("script,style"),k="start,end,close,attrStart,attrEnd,attrValue,chars,comment,special,done".split(","),E=function(){},A=function(t,a,n){function s(e,t,r,n){if(t=t.toLowerCase(),b[t])for(;w.last()&&v[w.last()];)i("",w.last());x[t]&&w.last()===t&&i("",t),n=m[t]||!!n,a.start(t,n),n||w.push(t),A.parseAttrs(r,a),a.end(t,n)}function i(e,t){var r;if(t)for(r=w.length-1;r>=0&&w[r]!==t;r--);else r=0;if(r>=0){for(var n=w.length-1;n>=r;n--)a.close&&a.close(w[n]);w.length=r}}function o(e,t){a.special&&a.special(t)}if("object"==typeof t)return r(t,a);var l=[];a=a||{},n&&e.each(k,function(t){var r=a[t]||E;a[t]=function(){r.apply(this,arguments)!==!1&&l.push({tokenType:t,args:e.makeArray(arguments)})}});var c,u,d,w=[],O=t;for(w.last=function(){return this[this.length-1]};t;){if(u=!0,w.last()&&y[w.last()])t=t.replace(new RegExp("([\\s\\S]*?)</"+w.last()+"[^>]*>"),function(e,t){return t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),a.chars&&a.chars(t),""}),i("",w.last());else if(0===t.indexOf("<!--")?(c=t.indexOf("-->"),c>=0&&(a.comment&&a.comment(t.substring(4,c)),t=t.substring(c+3),u=!1)):0===t.indexOf("</")?(d=t.match(f),d&&(t=t.substring(d[0].length),d[0].replace(f,i),u=!1)):0===t.indexOf("<")?(d=t.match(p),d&&(t=t.substring(d[0].length),d[0].replace(p,s),u=!1)):0===t.indexOf("{{")&&(d=t.match(g),d&&(t=t.substring(d[0].length),d[0].replace(g,o))),u){c=t.search(h);var R=0>c?t:t.substring(0,c);t=0>c?"":t.substring(c),a.chars&&R&&a.chars(R)}if(t===O)throw"Parse Error: "+t;O=t}return i(),a.done(),l};return A.parseAttrs=function(e,t){(null!=e?e:"").replace(d,function(e,r,a,n,s,i){if(a&&t.special(a),r||n||s||i){var o=arguments[3]?arguments[3]:arguments[4]?arguments[4]:arguments[5]?arguments[5]:w[r.toLowerCase()]?r:"";t.attrStart(r||"");for(var l,c=g.lastIndex=0,u=g.exec(o);u;)l=o.substring(c,g.lastIndex-u[0].length),l.length&&t.attrValue(l),t.special(u[1]),c=g.lastIndex,u=g.exec(o);l=o.substr(c,o.length),l&&t.attrValue(l),t.attrEnd(r||"")}})},e.view.parser=A,A});
/*view/live/live*/
define("can/view/live/live",["can/util/util","can/view/elements","can/view/view","can/view/node_lists/node_lists","can/view/parser/parser"],function(e,t,n,r,i){t=t||e.view.elements,r=r||e.view.NodeLists,i=i||e.view.parser;var a=function(t,n,r){var i=!1,a=function(){return i||(i=!0,r(o),e.unbind.call(t,"removed",a)),!0},o={teardownCheck:function(e){return e?!1:a()}};return e.bind.call(t,"removed",a),n(o),o},o=function(e,t,n){return a(e,function(){t.bind("change",n)},function(e){t.unbind("change",n),e.nodeList&&r.unregister(e.nodeList)})},c=function(e){var t,n={};return i.parseAttrs(e,{attrStart:function(e){n[e]="",t=e},attrValue:function(e){n[t]+=e},attrEnd:function(){}}),n},u=[].splice,d=function(e){return e&&e.nodeType},s=function(e){e.childNodes.length||e.appendChild(document.createTextNode(""))},l={list:function(n,i,o,c,d,s){var p,f=s||[n],v=[],h=function(n,i,a){var d=document.createDocumentFragment(),l=[],p=[];e.each(i,function(t,n){var i=[];s&&r.register(i,null,!0);var u=e.compute(n+a),f=o.call(c,t,u,i),v="string"==typeof f,h=e.frag(f);h=v?e.view.hookup(h):h;var g=e.makeArray(h.childNodes);s?(r.update(i,g),l.push(i)):l.push(r.register(g)),d.appendChild(h),p.push(u)});var h=a+1;if(f[h]){var g=r.first(f[h]);e.insertBefore(g.parentNode,d,g)}else t.after(1===h?[b]:[r.last(f[h-1])],d);u.apply(f,[h,0].concat(l)),u.apply(v,[a,0].concat(p));for(var m=a+p.length,w=v.length;w>m;m++)v[m](m)},g=function(t,n,i,a,o){if(a||!k.teardownCheck(b.parentNode)){0>i&&(i=v.length+i);var c=f.splice(i+1,n.length),u=[];e.each(c,function(e){var t=r.unregister(e);[].push.apply(u,t)}),v.splice(i,n.length);for(var d=i,s=v.length;s>d;d++)v[d](d);o||e.remove(e.$(u))}},b=document.createTextNode(""),m=function(e){p&&p.unbind&&p.unbind("add",h).unbind("remove",g),g({},{length:f.length-1},0,!0,e)},w=function(e,t){m(),p=t||[],p.bind&&p.bind("add",h).bind("remove",g),h({},p,0)};d=t.getParentNode(n,d);var k=a(d,function(){e.isFunction(i)&&i.bind("change",w)},function(){e.isFunction(i)&&i.unbind("change",w),m(!0)});s?(t.replace(f,b),r.update(f,[b]),s.unregistered=k.teardownCheck):l.replace(f,b,k.teardownCheck),w({},e.isFunction(i)?i():i)},html:function(n,i,a,c){var u;a=t.getParentNode(n,a),u=o(a,i,function(e,t){var n=r.first(l).parentNode;n&&p(t),u.teardownCheck(r.first(l).parentNode)});var l=c||[n],p=function(n){var i=!d(n),o=e.frag(n),c=e.makeArray(l);s(o),i&&(o=e.view.hookup(o,a)),c=r.update(l,o.childNodes),t.replace(c,o)};u.nodeList=l,c?c.unregistered=u.teardownCheck:r.register(l,u.teardownCheck),p(i())},replace:function(n,i,a){var o=n.slice(0),c=e.frag(i);return r.register(n,a),"string"==typeof i&&(c=e.view.hookup(c,n[0].parentNode)),r.update(n,c.childNodes),t.replace(o,c),n},text:function(n,i,a,c){var u=t.getParentNode(n,a),d=o(u,i,function(t,n){"unknown"!=typeof s.nodeValue&&(s.nodeValue=e.view.toStr(n)),d.teardownCheck(s.parentNode)}),s=document.createTextNode(e.view.toStr(i()));c?(c.unregistered=d.teardownCheck,d.nodeList=c,r.update(c,[s]),t.replace([n],s)):d.nodeList=l.replace([n],s,d.teardownCheck)},setAttributes:function(t,n){var r=c(n);for(var i in r)e.attr.set(t,i,r[i])},attributes:function(n,r,i){var a={},u=function(r){var i,o=c(r);for(i in o){var u=o[i],d=a[i];u!==d&&e.attr.set(n,i,u),delete a[i]}for(i in a)t.removeAttr(n,i);a=o};o(n,r,function(e,t){u(t)}),arguments.length>=3?a=c(i):u(r())},attributePlaceholder:"__!!__",attributeReplace:/__!!__/g,attribute:function(n,r,i){o(n,i,function(){t.setAttr(n,r,u.render())});var a,c=e.$(n);a=e.data(c,"hooks"),a||e.data(c,"hooks",a={});var u,d=t.getAttr(n,r),s=d.split(l.attributePlaceholder),p=[];p.push(s.shift(),s.join(l.attributePlaceholder)),a[r]?a[r].computes.push(i):a[r]={render:function(){var e=0,n=d?d.replace(l.attributeReplace,function(){return t.contentText(u.computes[e++]())}):t.contentText(u.computes[e++]());return n},computes:[i],batchNum:void 0},u=a[r],p.splice(1,0,i()),t.setAttr(n,r,p.join(""))},specialAttribute:function(e,n,r){o(e,r,function(r,i){t.setAttr(e,n,f(i))}),t.setAttr(e,n,f(r()))},simpleAttribute:function(e,n,r){o(e,r,function(r,i){t.setAttr(e,n,i)}),t.setAttr(e,n,r())}};l.attr=l.simpleAttribute,l.attrs=l.attributes;var p=/(\r|\n)+/g,f=function(e){var n=/^["'].*["']$/;return e=e.replace(t.attrReg,"").replace(p,""),n.test(e)?e.substr(1,e.length-2):e};return e.view.live=l,l});
/*view/render*/
define("can/view/render",["can/view/view","can/view/elements","can/view/live/live","can/util/string/string"],function(t,n,e){var i,r=[],u=function(t){var e=n.tagMap[t]||"span";return"span"===e?"@@!!@@":"<"+e+">"+u(e)+"</"+e+">"},o=function(n,e){if("string"==typeof n)return n;if(!n&&0!==n)return"";var i=n.hookup&&function(t,e){n.hookup.call(n,t,e)}||"function"==typeof n&&n;return i?e?"<"+e+" "+t.view.hook(i)+"></"+e+">":(r.push(i),""):""+n},c=function(n,e){return"string"==typeof n||"number"==typeof n?t.esc(n):o(n,e)},s=!1,a=function(){};return t.extend(t.view,{live:e,setupLists:function(){var n,e=t.view.lists;return t.view.lists=function(t,e){return n={list:t,renderer:e},Math.random()},function(){return t.view.lists=e,n}},getHooks:function(){var t=r.slice(0);return i=t,r=[],t},onlytxt:function(t,n){return c(n.call(t))},txt:function(f,p,l,v,h){var w,g,d,b,y=n.tagMap[p]||"span",k=!1,m=a;if(s)w=h.call(v);else{("string"==typeof l||1===l)&&(s=!0);var x=t.view.setupLists();m=function(){d.unbind("change",a)},d=t.compute(h,v,!1),d.bind("change",a),g=x(),w=d(),s=!1,k=d.hasDependencies}if(g)return m(),"<"+y+t.view.hook(function(t,n){e.list(t,g.list,g.renderer,v,n)})+"></"+y+">";if(!k||"function"==typeof w)return m(),(s||2===f||!f?o:c)(w,0===l&&y);var M=n.tagToContentPropMap[p];return 0!==l||M?1===l?(r.push(function(t){e.attributes(t,d,d()),m()}),d()):2===f?(b=l,r.push(function(t){e.specialAttribute(t,b,d),m()}),d()):(b=0===l?M:l,(0===l?i:r).push(function(t){e.attribute(t,b,d),m()}),e.attributePlaceholder):"<"+y+t.view.hook(f&&"object"!=typeof w?function(t,n){e.text(t,d,n),m()}:function(t,n){e.html(t,d,n),m()})+">"+u(y)+"</"+y+">"}}),t});
/*view/bindings/bindings*/
define("can/view/bindings/bindings",["can/util/util","can/view/callbacks/callbacks","can/control/control"],function(e){var t=function(){var e={"":!0,"true":!0,"false":!1},t=function(t){if(t&&t.getAttribute){var n=t.getAttribute("contenteditable");return e[n]}};return function(e){var n=t(e);return"boolean"==typeof n?n:!!t(e.parentNode)}}(),n=function(e){return"{"===e[0]&&"}"===e[e.length-1]?e.substr(1,e.length-2):e};e.view.attr("can-value",function(i,l){var r,c,h=n(i.getAttribute("can-value")),v=l.scope.computeData(h,{args:[]}).compute;return"input"===i.nodeName.toLowerCase()&&("checkbox"===i.type&&(r=e.attr.has(i,"can-true-value")?i.getAttribute("can-true-value"):!0,c=e.attr.has(i,"can-false-value")?i.getAttribute("can-false-value"):!1),"checkbox"===i.type||"radio"===i.type)?void new s(i,{value:v,trueValue:r,falseValue:c}):"select"===i.nodeName.toLowerCase()&&i.multiple?void new o(i,{value:v}):t(i)?void new u(i,{value:v}):void new a(i,{value:v})});var i={enter:function(e,t,n){return{event:"keyup",handler:function(e){return 13===e.keyCode?n.call(this,e):void 0}}}};e.view.attr(/can-[\w\.]+/,function(t,a){var s=a.attributeName,o=s.substr("can-".length),u=function(i){var o=n(t.getAttribute(s)),u=a.scope.read(o,{returnObserveMethods:!0,isArgument:!0});return u.value.call(u.parent,a.scope._context,e.$(this),i)};if(i[o]){var l=i[o](a,t,u);u=l.handler,o=l.event}e.bind.call(t,o,u)});var a=e.Control.extend({init:function(){"SELECT"===this.element[0].nodeName.toUpperCase()?setTimeout(e.proxy(this.set,this),1):this.set()},"{value} change":"set",set:function(){if(this.element){var e=this.options.value();this.element[0].value=null==e?"":e}},change:function(){this.element&&this.options.value(this.element[0].value)}}),s=e.Control.extend({init:function(){this.isCheckbox="checkbox"===this.element[0].type.toLowerCase(),this.check()},"{value} change":"check",check:function(){if(this.isCheckbox){var t=this.options.value(),n=this.options.trueValue||!0;this.element[0].checked=t===n}else{var i=this.options.value()==this.element[0].value?"set":"remove";e.attr[i](this.element[0],"checked",!0)}},change:function(){this.isCheckbox?this.options.value(this.element[0].checked?this.options.trueValue:this.options.falseValue):this.element[0].checked&&this.options.value(this.element[0].value)}}),o=a.extend({init:function(){this.delimiter=";",this.set()},set:function(){var t=this.options.value();"string"==typeof t?(t=t.split(this.delimiter),this.isString=!0):t&&(t=e.makeArray(t));var n={};e.each(t,function(e){n[e]=!0}),e.each(this.element[0].childNodes,function(e){e.value&&(e.selected=!!n[e.value])})},get:function(){var t=[],n=this.element[0].childNodes;return e.each(n,function(e){e.selected&&e.value&&t.push(e.value)}),t},change:function(){var t=this.get(),n=this.options.value();this.isString||"string"==typeof n?(this.isString=!0,this.options.value(t.join(this.delimiter))):n instanceof e.List?n.attr(t,!0):this.options.value(t)}}),u=e.Control.extend({init:function(){this.set(),this.on("blur","setValue")},"{value} change":"set",set:function(){var e=this.options.value();this.element[0].innerHTML="undefined"==typeof e?"":e},setValue:function(){this.options.value(this.element[0].innerHTML)}})});
/*view/mustache/mustache*/
define("can/view/mustache/mustache",["can/util/util","can/view/scope/scope","can/view/view","can/view/scanner","can/compute/compute","can/view/render","can/view/bindings/bindings"],function(e){e.view.ext=".mustache";var n="scope",t="___h4sh",r="{scope:"+n+",options:options}",i="{scope:"+n+",options:options, special: true}",s=n+",options",o=/((([^'"\s]+?=)?('.*?'|".*?"))|.*?)\s/g,a=/^(('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false|null|undefined)|((.+?)=(('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false)|(.+))))$/,c=function(e){return'{get:"'+e.replace(/"/g,'\\"')+'"}'},u=function(e){return e&&"string"==typeof e.get},f=function(n){return n instanceof e.Map||n&&!!n._get},p=function(e){return e&&e.splice&&"number"==typeof e.length},l=function(n,t,r){var i=function(e,r){return n(e||t,r)};return function(n,s){return void 0===n||n instanceof e.view.Scope||(n=t.add(n)),void 0===s||s instanceof e.view.Options||(s=r.add(s)),i(n,s||r)}},h=function(n){if(this.constructor!==h){var t=new h(n);return function(e,n){return t.render(e,n)}}return"function"==typeof n?void(this.template={fn:n}):(e.extend(this,n),void(this.template=this.scanner.scan(this.text,this.name)))};e.Mustache=e.global.Mustache=h,h.prototype.render=function(n,t){return n instanceof e.view.Scope||(n=new e.view.Scope(n||{})),t instanceof e.view.Options||(t=new e.view.Options(t||{})),t=t||{},this.template.fn.call(n,n,t)},e.extend(h.prototype,{scanner:new e.view.Scanner({text:{start:"",scope:n,options:",options: options",argNames:s},tokens:[["returnLeft","{{{","{{[{&]"],["commentFull","{{!}}","^[\\s\\t]*{{!.+?}}\\n"],["commentLeft","{{!","(\\n[\\s\\t]*{{!|{{!)"],["escapeFull","{{}}","(^[\\s\\t]*{{[#/^][^}]+?}}\\n|\\n[\\s\\t]*{{[#/^][^}]+?}}\\n|\\n[\\s\\t]*{{[#/^][^}]+?}}$)",function(e){return{before:/^\n.+?\n$/.test(e)?"\n":"",content:e.match(/\{\{(.+?)\}\}/)[1]||""}}],["escapeLeft","{{"],["returnRight","}}}"],["right","}}"]],helpers:[{name:/^>[\s]*\w*/,fn:function(n){var t=e.trim(n.replace(/^>\s?/,"")).replace(/["|']/g,"");return"can.Mustache.renderPartial('"+t+"',"+s+")"}},{name:/^\s*data\s/,fn:function(e){var t=e.match(/["|'](.*)["|']/)[1];return"can.proxy(function(__){can.data(can.$(__),'"+t+"', this.attr('.')); }, "+n+")"}},{name:/\s*\(([\$\w]+)\)\s*->([^\n]*)/,fn:function(e){var t=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,r=e.match(t);return"can.proxy(function(__){var "+r[1]+"=can.$(__);with("+n+".attr('.')){"+r[2]+"}}, this);"}},{name:/^.*$/,fn:function(n,u){var f=!1,p={content:"",startTxt:!1,startOnlyTxt:!1,end:!1};if(n=e.trim(n),n.length&&(f=n.match(/^([#^/]|else$)/))){switch(f=f[0]){case"#":case"^":u.specialAttribute?p.startOnlyTxt=!0:(p.startTxt=!0,p.escaped=0);break;case"/":return p.end=!0,p.content+='return ___v1ew.join("");}}])',p}n=n.substring(1)}if("else"!==f){var l,h=[],v=[],d=0;p.content+="can.Mustache.txt(\n"+(u.specialAttribute?i:r)+",\n"+(f?'"'+f+'"':"null")+",",(e.trim(n)+" ").replace(o,function(e,n){d&&(l=n.match(a))?l[2]?h.push(l[0]):v.push(l[4]+":"+(l[6]?l[6]:c(l[5]))):h.push(c(n)),d++}),p.content+=h.join(","),v.length&&(p.content+=",{"+t+":{"+v.join(",")+"}}")}switch(f&&"else"!==f&&(p.content+=",[\n\n"),f){case"^":case"#":p.content+="{fn:function("+s+"){var ___v1ew = [];";break;case"else":p.content+='return ___v1ew.join("");}},\n{inverse:function('+s+"){\nvar ___v1ew = [];";break;default:p.content+=")"}return f||(p.startTxt=!0,p.end=!0),p}}]})});for(var v=e.view.Scanner.prototype.helpers,d=0;d<v.length;d++)h.prototype.scanner.helpers.unshift(v[d]);return h.txt=function(n,r,i){for(var s,o,a=n.scope,c=n.options,v=[],d={fn:function(){},inverse:function(){}},g=a.attr("."),m=!0,w=3;w<arguments.length;w++){var x=arguments[w];if(r&&e.isArray(x))d=e.extend.apply(e,[d].concat(x));else if(x&&x[t]){s=x[t];for(var _ in s)u(s[_])&&(s[_]=h.get(s[_].get,n,!1,!0))}else v.push(x&&u(x)?h.get(x.get,n,!1,!0,!0):x)}if(u(i)){var y=i.get;i=h.get(i.get,n,v.length,!1),m=y===i}if(d.fn=l(d.fn,a,c),d.inverse=l(d.inverse,a,c),"^"===r){var b=d.fn;d.fn=d.inverse,d.inverse=b}return(o=m&&"string"==typeof i&&h.getHelper(i,c)||e.isFunction(i)&&!i.isComputed&&{fn:i})?(e.extend(d,{context:g,scope:a,contexts:a,hash:s}),v.push(d),function(){return o.fn.apply(g,v)||""}):function(){var n;n=e.isFunction(i)&&i.isComputed?i():i;var t,s,o,a=v.length?v:[n],c=!0,u=[];if(r)for(t=0;t<a.length;t++)o=a[t],s="undefined"!=typeof o&&f(o),p(o)?"#"===r?c=c&&!!(s?o.attr("length"):o.length):"^"===r&&(c=c&&!(s?o.attr("length"):o.length)):c="#"===r?c&&!!o:"^"===r?c&&!o:c;if(c){if("#"===r){if(p(n)){var l=f(n);for(t=0;t<n.length;t++)u.push(d.fn(l?n.attr(""+t):n[t]));return u.join("")}return d.fn(n||{})||""}return"^"===r?d.inverse(n||{})||"":""+(null!=n?n:"")}return""}},h.get=function(n,t,r,i,s){var o=t.scope.attr("."),a=t.options||{};if(r){if(h.getHelper(n,a))return n;if(t.scope&&e.isFunction(o[n]))return o[n]}var c=t.scope.computeData(n,{isArgument:i,args:[o,t.scope]}),u=c.compute;e.compute.temporarilyBind(u);{var f=c.initialValue;h.getHelper(n,a)}return s||void 0!==f&&c.scope===t.scope||!h.getHelper(n,a)?u.hasDependencies?u:f:n},h.resolve=function(n){return f(n)&&p(n)&&n.attr("length")?n:e.isFunction(n)?n():n},e.view.Options=e.view.Scope.extend({init:function(n){n.helpers||n.partials||n.tags||(n={helpers:n}),e.view.Scope.prototype.init.apply(this,arguments)}}),h._helpers={},h.registerHelper=function(e,n){this._helpers[e]={name:e,fn:n}},h.getHelper=function(e,n){var t;return n&&(t=n.attr("helpers."+e)),t?{fn:t}:this._helpers[e]},h.render=function(n,t,r){if(!e.view.cached[n]){var i=e.__clearReading();t.attr("partial")&&(n=t.attr("partial")),e.__setReading(i)}return e.view.render(n,t,r)},h.safeString=function(e){return{toString:function(){return e}}},h.renderPartial=function(n,t,r){var i=r.attr("partials."+n);return i?i.render?i.render(t,r):i(t,r):e.Mustache.render(n,t,r)},e.each({"if":function(n,t){var r;return r=e.isFunction(n)?e.compute.truthy(n)():!!h.resolve(n),r?t.fn(t.contexts||this):t.inverse(t.contexts||this)},unless:function(n,t){return h._helpers["if"].fn.apply(this,[e.isFunction(n)?e.compute(function(){return!n()}):!n,t])},each:function(n,t){var r,i,s,o=h.resolve(n),a=[];if(e.view.lists&&(o instanceof e.List||n&&n.isComputed&&void 0===o))return e.view.lists(n,function(e,n){return t.fn(t.scope.add({"@index":n}).add(e))});if(n=o,n&&p(n)){for(s=0;s<n.length;s++)a.push(t.fn(t.scope.add({"@index":s}).add(n[s])));return a.join("")}if(f(n)){for(r=e.Map.keys(n),s=0;s<r.length;s++)i=r[s],a.push(t.fn(t.scope.add({"@key":i}).add(n[i])));return a.join("")}if(n instanceof Object){for(i in n)a.push(t.fn(t.scope.add({"@key":i}).add(n[i])));return a.join("")}},"with":function(e,n){var t=e;return e=h.resolve(e),e?n.fn(t):void 0},log:function(e,n){"undefined"!=typeof console&&console.log&&(n?console.log(e,n.context):console.log(e.context))},"@index":function(n,t){t||(t=n,n=0);var r=t.scope.attr("@index");return""+((e.isFunction(r)?r():r)+n)}},function(e,n){h.registerHelper(n,e)}),e.view.register({suffix:"mustache",contentType:"x-mustache-template",script:function(e,n){return"can.Mustache(function("+s+") { "+new h({text:n,name:e}).template.out+" })"},renderer:function(e,n){return h({text:n,name:e})}}),e.mustache.registerHelper=e.proxy(e.Mustache.registerHelper,e.Mustache),e.mustache.safeString=e.Mustache.safeString,e});
/*component/component*/
define("can/component/component",["can/util/util","can/view/callbacks/callbacks","can/control/control","can/observe/observe","can/view/mustache/mustache","can/view/bindings/bindings"],function(t,e){var n=/^(dataViewId|class|id)$/i,o=/\{([^\}]+)\}/g,s=t.Component=t.Construct.extend({setup:function(){if(t.Construct.setup.apply(this,arguments),t.Component){var e=this,n=this.prototype.scope;if(this.Control=i.extend(this.prototype.events),n&&("object"!=typeof n||n instanceof t.Map)?n.prototype instanceof t.Map&&(this.Map=n):this.Map=t.Map.extend(n||{}),this.attributeScopeMappings={},t.each(this.Map?this.Map.defaults:{},function(t,n){"@"===t&&(e.attributeScopeMappings[n]=n)}),this.prototype.template)if("function"==typeof this.prototype.template){var o=this.prototype.template;this.renderer=function(){return t.view.frag(o.apply(null,arguments))}}else this.renderer=t.view.mustache(this.prototype.template);t.view.tag(this.prototype.tag,function(t,n){new e(t,n)})}}},{setup:function(o,s){var i,a,c,p={},r=this,u={};if(t.each(this.constructor.attributeScopeMappings,function(e,n){p[n]=o.getAttribute(t.hyphenate(e))}),t.each(t.makeArray(o.attributes),function(c){var l=t.camelize(c.nodeName.toLowerCase()),h=c.value;if(!(r.constructor.attributeScopeMappings[l]||n.test(l)||e.attr(c.nodeName))){if("{"===h[0]&&"}"===h[h.length-1])h=h.substr(1,h.length-2);else if("legacy"!==s.templateType)return void(p[l]=h);var d=s.scope.computeData(h,{args:[]}),f=d.compute,m=function(t,e){i=l,a.attr(l,e),i=null};f.bind("change",m),p[l]=f(),f.hasDependencies?(t.bind.call(o,"removed",function(){f.unbind("change",m)}),u[l]=d):f.unbind("change",m)}}),this.constructor.Map)a=new this.constructor.Map(p);else if(this.scope instanceof t.Map)a=this.scope;else if(t.isFunction(this.scope)){var l=this.scope(p,s.scope,o);a=l instanceof t.Map?l:l.prototype instanceof t.Map?new l(p):new(t.Map.extend(l))(p)}var h={};t.each(u,function(t,e){h[e]=function(n,o){i!==e&&t.compute(o)},a.bind(e,h[e])}),t.bind.call(o,"removed",function(){t.each(h,function(t,e){a.unbind(e,h[e])})}),t.isEmptyObject(this.constructor.attributeScopeMappings)&&"legacy"===s.templateType||t.bind.call(o,"attributes",function(e){var s=t.camelize(e.attributeName);u[s]||n.test(s)||a.attr(s,o.getAttribute(e.attributeName))}),this.scope=a,t.data(t.$(o),"scope",this.scope);var d=s.scope.add(this.scope),f={helpers:{}};t.each(this.helpers||{},function(e,n){t.isFunction(e)&&(f.helpers[n]=function(){return e.apply(a,arguments)})}),this._control=new this.constructor.Control(o,{scope:this.scope}),this.constructor.renderer?(f.tags||(f.tags={}),f.tags.content=function m(e,n){var o=s.subtemplate||n.subtemplate;o&&(delete f.tags.content,t.view.live.replace([e],o(n.scope,n.options)),f.tags.content=m)},c=this.constructor.renderer(d,s.options.add(f))):c="legacy"===s.templateType?t.view.frag(s.subtemplate?s.subtemplate(d,s.options.add(f)):""):s.subtemplate?s.subtemplate(d,s.options.add(f)):document.createDocumentFragment(),t.appendChild(o,c)}}),i=t.Control.extend({_lookup:function(t){return[t.scope,t,window]},_action:function(e,n,s){var i,a;if(o.lastIndex=0,i=o.test(e),s||!i){if(i){a=t.compute(function(){var s,i=e.replace(o,function(e,o){var i;return"scope"===o?(s=n.scope,""):(o=o.replace(/^scope\./,""),i=t.compute.read(n.scope,o.split("."),{isArgument:!0}).value,void 0===i&&(i=t.getObject(o)),"string"==typeof i?i:(s=i,""))}),a=i.split(/\s+/g),c=a.pop();return{processor:this.processors[c]||this.processors.click,parts:[i,a.join(" "),c],delegate:s||void 0}},this);var c=function(t,n){s._bindings.control[e](s.element),s._bindings.control[e]=n.processor(n.delegate||s.element,n.parts[2],n.parts[1],e,s)};return a.bind("change",c),s._bindings.readyComputes[e]={compute:a,handler:c},a()}return t.Control._action.apply(this,arguments)}}},{setup:function(e,n){return this.scope=n.scope,t.Control.prototype.setup.call(this,e,n)},off:function(){this._bindings&&t.each(this._bindings.readyComputes||{},function(t){t.compute.unbind("change",t.handler)}),t.Control.prototype.off.apply(this,arguments),this._bindings.readyComputes={}}});return t.$.fn&&(t.$.fn.scope=function(e){var n=this.data("scope");return n||(n=new t.Map,this.data("scope",n)),e?n.attr(e):n}),s});
/*model/model*/
define("can/model/model",["can/util/util","can/map/map","can/list/list"],function(t){var e=function(e,r,i){var n=new t.Deferred;return e.then(function(){var e=t.makeArray(arguments),s=!0;try{e[0]=i.apply(r,e)}catch(o){s=!1,n.rejectWith(n,[o].concat(e))}s&&n.resolveWith(n,e)},function(){n.rejectWith(this,arguments)}),"function"==typeof e.abort&&(n.abort=function(){return e.abort()}),n},r=0,i=function(e){return t.__reading(e,e.constructor.id),e.__get(e.constructor.id)},n=function(e,r,i,n,s,o){var a={};if("string"==typeof e){var u=e.split(/\s+/);a.url=u.pop(),u.length&&(a.type=u.pop())}else t.extend(a,e);return a.data="object"!=typeof r||t.isArray(r)?r:t.extend(a.data||{},r),a.url=t.sub(a.url,a.data,!0),t.ajax(t.extend({type:i||"post",dataType:n||"json",success:s,error:o},a))},s=function(r,n,s,o,a){var u;t.isArray(r)?(u=r[1],r=r[0]):u=r.serialize(),u=[u];var c,d,l=r.constructor;return("update"===n||"destroy"===n)&&u.unshift(i(r)),d=l[n].apply(l,u),c=e(d,r,function(t){return r[a||n+"d"](t,d),r}),d.abort&&(c.abort=function(){d.abort()}),c.then(s,o),c},o={models:function(e,r,i){if(t.Model._reqs++,e){if(e instanceof this.List)return e;var n=this,s=[],o=n.List||f,a=r instanceof t.List?r:new o,u=e instanceof f,c=u?e.serialize():e;if(c=n.parseModels(c,i),c.data&&(e=c,c=c.data),"undefined"==typeof c)throw new Error("Could not get any raw data while converting using .models");return a.length&&a.splice(0),t.each(c,function(t){s.push(n.model(t,i))}),a.push.apply(a,s),t.isArray(e)||t.each(e,function(t,e){"data"!==e&&a.attr(e,t)}),setTimeout(t.proxy(this._clean,this),1),a}},model:function(e,r,i){if(e){e="function"==typeof e.serialize?e.serialize():this.parseModel(e,i);var n=e[this.id];(n||0===n)&&this.store[n]&&(r=this.store[n]);var s=r&&t.isFunction(r.attr)?r.attr(e,this.removeAttr||!1):new this(e);return s}}},a={parseModel:function(e){return function(r){return e?t.getObject(e,r):r}},parseModels:function(e){return function(r){if(t.isArray(r))return r;e=e||"data";var i=t.getObject(e,r);if(!t.isArray(i))throw new Error("Could not get any raw data while converting using .models");return i}}},u={create:{url:"_shortName",type:"post"},update:{data:function(e,r){r=r||{};var i=this.id;return r[i]&&r[i]!==e&&(r["new"+t.capitalize(e)]=r[i],delete r[i]),r[i]=e,r},type:"put"},destroy:{type:"delete",data:function(t,e){return e=e||{},e.id=e[this.id]=t,e}},findAll:{url:"_shortName"},findOne:{}},c=function(t,e){return function(r){return r=t.data?t.data.apply(this,arguments):r,n(e||this[t.url||"_url"],r,t.type||"get")}},d=function(t,e){if(t.resource){var r=t.resource.replace(/\/+$/,"");return"findAll"===e||"create"===e?r:r+"/{"+t.id+"}"}};t.Model=t.Map.extend({fullName:"can.Model",_reqs:0,setup:function(e,i,n,s){if("string"!=typeof i&&(s=n,n=i),s||(s=n),this.store={},t.Map.setup.apply(this,arguments),t.Model){n&&n.List?(this.List=n.List,this.List.Map=this):this.List=e.List.extend({Map:this},{});var l=this,p=t.proxy(this._clean,l);t.each(u,function(r,i){if(n&&n[i]&&("string"==typeof n[i]||"object"==typeof n[i])?l[i]=c(r,n[i]):n&&n.resource&&!t.isFunction(n[i])&&(l[i]=c(r,d(l,i))),l["make"+t.capitalize(i)]){var s=l["make"+t.capitalize(i)](l[i]);t.Construct._overwrite(l,e,i,function(){t.Model._reqs++;var e=s.apply(this,arguments),r=e.then(p,p);return r.abort=e.abort,r})}});var h={};t.each(o,function(r,i){var s="parse"+t.capitalize(i),o=n&&n[i]||l[i];"string"==typeof o?(l[s]=o,t.Construct._overwrite(l,e,i,r)):n&&n[i]&&(h[s]=!0)}),t.each(a,function(r,i){var s=n&&n[i]||l[i];if("string"==typeof s)t.Construct._overwrite(l,e,i,r(s));else if(!(n&&t.isFunction(n[i])||l[i])){var o=r();o.useModelConverter=h[i],t.Construct._overwrite(l,e,i,o)}}),"can.Model"!==l.fullName&&l.fullName||(l.fullName="Model"+ ++r),t.Model._reqs=0,this._url=this._shortName+"/{"+this.id+"}"}},_ajax:c,_makeRequest:s,_clean:function(){if(t.Model._reqs--,!t.Model._reqs)for(var e in this.store)this.store[e]._bindings||delete this.store[e];return arguments[0]},models:o.models,model:o.model},{setup:function(e){var r=e&&e[this.constructor.id];t.Model._reqs&&null!=r&&(this.constructor.store[r]=this),t.Map.prototype.setup.apply(this,arguments)},isNew:function(){var t=i(this);return!(t||0===t)},save:function(t,e){return s(this,this.isNew()?"create":"update",t,e)},destroy:function(e,r){if(this.isNew()){var i=this,n=t.Deferred();return n.then(e,r),n.done(function(t){i.destroyed(t)}).resolve(i)}return s(this,"destroy",e,r,"destroyed")},_bindsetup:function(){return this.constructor.store[this.__get(this.constructor.id)]=this,t.Map.prototype._bindsetup.apply(this,arguments)},_bindteardown:function(){return delete this.constructor.store[i(this)],t.Map.prototype._bindteardown.apply(this,arguments)},___set:function(e,r){t.Map.prototype.___set.call(this,e,r),e===this.constructor.id&&this._bindings&&(this.constructor.store[i(this)]=this)}});var l=function(t){return function(e,r,i){return this[t](e,null,i)}},p=function(t){return this.parseModel.useModelConverter?this.model(t):this.parseModel(t)},h={makeFindAll:l("models"),makeFindOne:l("model"),makeCreate:p,makeUpdate:p};t.each(h,function(r,i){t.Model[i]=function(i){return function(){var n=t.makeArray(arguments),s=t.isFunction(n[1])?n.splice(0,1):n.splice(0,2),o=e(i.apply(this,s),this,r);return o.then(n[0],n[1]),o}}}),t.each(["created","updated","destroyed"],function(e){t.Model.prototype[e]=function(r){var i=this,n=i.constructor;r&&"object"==typeof r&&this.attr(t.isFunction(r.attr)?r.attr():r),t.dispatch.call(this,{type:"change",target:this},[e]),t.dispatch.call(n,e,[this])}});var f=t.Model.List=t.List.extend({_bubbleRule:function(e,r){return t.List._bubbleRule(e,r)||"destroyed"}},{setup:function(e){t.isPlainObject(e)&&!t.isArray(e)?(t.List.prototype.setup.apply(this),this.replace(t.isDeferred(e)?e:this.constructor.Map.findAll(e))):t.List.prototype.setup.apply(this,arguments),this._init=1,this.bind("destroyed",t.proxy(this._destroyed,this)),delete this._init},_destroyed:function(t,e){if(/\w+/.test(e))for(var r;(r=this.indexOf(t.target))>-1;)this.splice(r,1)}});return t.Model});
/*util/string/deparam/deparam*/
define("can/util/string/deparam/deparam",["can/util/util","can/util/string/string"],function(t){var n=/^\d+$/,e=/([^\[\]]+)|(\[\])/g,r=/([^?#]*)(#.*)?$/,i=function(t){return decodeURIComponent(t.replace(/\+/g," "))};return t.extend(t,{deparam:function(a){var u,c,o={};return a&&r.test(a)&&(u=a.split("&"),t.each(u,function(t){var r=t.split("="),a=i(r.shift()),u=i(r.join("=")),p=o;if(a){r=a.match(e);for(var s=0,d=r.length-1;d>s;s++)p[r[s]]||(p[r[s]]=n.test(r[s+1])||"[]"===r[s+1]?[]:{}),p=p[r[s]];c=r.pop(),"[]"===c?p.push(u):p[c]=u}})),o}}),t});
/*route/route*/
define("can/route/route",["can/util/util","can/map/map","can/list/list","can/util/string/deparam/deparam"],function(t){var e,r,n,a,u=/\:([\w\.]+)/g,o=/^(?:&[^=]+=[^&]*)+/,i=function(e){var r=[];return t.each(e,function(e,n){r.push(("className"===n?"class":n)+'="'+("href"===n?e:t.esc(e))+'"')}),r.join(" ")},c=function(t,e){var r=0,n=0,a={};for(var u in t.defaults)t.defaults[u]===e[u]&&(a[u]=1,r++);for(;n<t.names.length;n++){if(!e.hasOwnProperty(t.names[n]))return-1;a[t.names[n]]||r++}return r},l=window.location,s=function(t){return(t+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")},d=t.each,f=t.extend,h=function(e){return e&&"object"==typeof e?(e=e instanceof t.Map?e.attr():t.isFunction(e.slice)?e.slice():t.extend({},e),t.each(e,function(t,r){e[r]=h(t)})):void 0!==e&&null!==e&&t.isFunction(e.toString)&&(e=e.toString()),e},p=function(t){return t.replace(/\\/g,"")},g=function(){a=1,clearTimeout(e),e=setTimeout(function(){a=0;var e=t.route.data.serialize(),r=t.route.param(e,!0);t.route._call("setURL",r),t.batch.trigger(m,"__url",[r,n]),n=r},10)},m=t.extend({},t.event);t.route=function(e,r){var n=t.route._call("root");n.lastIndexOf("/")===n.length-1&&0===e.indexOf("/")&&(e=e.substr(1)),r=r||{};for(var a,o,i=[],c="",l=u.lastIndex=0,d=t.route._call("querySeparator"),f=t.route._call("matchSlashes");a=u.exec(e);)i.push(a[1]),c+=p(e.substring(l,u.lastIndex-a[0].length)),o="\\"+(p(e.substr(u.lastIndex,1))||d+(f?"":"|/")),c+="([^"+o+"]"+(r[a[1]]?"*":"+")+")",l=u.lastIndex;return c+=e.substr(l).replace("\\",""),t.route.routes[e]={test:new RegExp("^"+c+"($|"+s(d)+")"),route:e,names:i,defaults:r,length:e.split("/").length},t.route},f(t.route,{param:function(e,r){var n,a,o=0,i=e.route,l=0;if(delete e.route,d(e,function(){l++}),d(t.route.routes,function(t){return a=c(t,e),a>o&&(n=t,o=a),a>=l?!1:void 0}),t.route.routes[i]&&c(t.route.routes[i],e)===o&&(n=t.route.routes[i]),n){var s,h=f({},e),p=n.route.replace(u,function(t,r){return delete h[r],e[r]===n.defaults[r]?"":encodeURIComponent(e[r])}).replace("\\","");return d(n.defaults,function(t,e){h[e]===t&&delete h[e]}),s=t.param(h),r&&t.route.attr("route",n.route),p+(s?t.route._call("querySeparator")+s:"")}return t.isEmptyObject(e)?"":t.route._call("querySeparator")+t.param(e)},deparam:function(e){var r=t.route._call("root");r.lastIndexOf("/")===r.length-1&&0===e.indexOf("/")&&(e=e.substr(1));var n={length:-1},a=t.route._call("querySeparator"),u=t.route._call("paramsMatcher");if(d(t.route.routes,function(t){t.test.test(e)&&t.length>n.length&&(n=t)}),n.length>-1){var o=e.match(n.test),i=o.shift(),c=e.substr(i.length-(o[o.length-1]===a?1:0)),l=c&&u.test(c)?t.deparam(c.slice(1)):{};return l=f(!0,{},n.defaults,l),d(o,function(t,e){t&&t!==a&&(l[n.names[e]]=decodeURIComponent(t))}),l.route=n.route,l}return e.charAt(0)!==a&&(e=a+e),u.test(e)?t.deparam(e.slice(1)):{}},data:new t.Map({}),map:function(e){var r;r=e.prototype instanceof t.Map?new e:e,t.route.data=r},routes:{},ready:function(e){return e!==!0&&(t.route._setup(),t.route.setState()),t.route},url:function(e,r){return r&&(e=t.extend({},t.route.deparam(t.route._call("matchingPartOfURL")),e)),t.route._call("root")+t.route.param(e)},link:function(e,r,n,a){return"<a "+i(f({href:t.route.url(r,a)},n))+">"+e+"</a>"},current:function(e){return t.__reading(m,"__url"),this._call("matchingPartOfURL")===t.route.param(e)},bindings:{hashchange:{paramsMatcher:o,querySeparator:"&",matchSlashes:!1,bind:function(){t.bind.call(window,"hashchange",_)},unbind:function(){t.unbind.call(window,"hashchange",_)},matchingPartOfURL:function(){return l.href.split(/#!?/)[1]||""},setURL:function(t){return l.hash="#!"+t,t},root:"#!"}},defaultBinding:"hashchange",currentBinding:null,_setup:function(){t.route.currentBinding||(t.route._call("bind"),t.route.bind("change",g),t.route.currentBinding=t.route.defaultBinding)},_teardown:function(){t.route.currentBinding&&(t.route._call("unbind"),t.route.unbind("change",g),t.route.currentBinding=null),clearTimeout(e),a=0},_call:function(){var e=t.makeArray(arguments),r=e.shift(),n=t.route.bindings[t.route.currentBinding||t.route.defaultBinding],a=n[r];return a.apply?a.apply(n,e):a}}),d(["bind","unbind","on","off","delegate","undelegate","removeAttr","compute","_get","__get","each"],function(e){t.route[e]=function(){return t.route.data[e]?t.route.data[e].apply(t.route.data,arguments):void 0}}),t.route.attr=function(e,r){var n,a=typeof e;return n=void 0===r?arguments:"string"!==a&&"number"!==a?[h(e),r]:[e,h(r)],t.route.data.attr.apply(t.route.data,n)};var _=t.route.setState=function(){var e=t.route._call("matchingPartOfURL"),u=r;if(r=t.route.deparam(e),!a||e!==n){t.batch.start();for(var o in u)r[o]||t.route.removeAttr(o);t.route.attr(r),t.batch.trigger(m,"__url",[e,n]),t.batch.stop()}};return t.route});
/*control/route/route*/
define("can/control/route/route",["can/util/util","can/route/route","can/control/control"],function(t){return t.Control.processors.route=function(o,r,u,n,e){u=u||"",t.route.routes[u]||("/"===u[0]&&(u=u.substring(1)),t.route(u));var c,i=function(o){if(t.route.attr("route")===u&&(void 0===o.batchNum||o.batchNum!==c)){c=o.batchNum;var r=t.route.attr();delete r.route,t.isFunction(e[n])?e[n](r):e[e[n]](r)}};return t.route.bind("change",i),function(){t.route.unbind("change",i)}},t});
