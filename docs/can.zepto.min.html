<!DOCTYPE html>

<html>
<head>
  <title>can.zepto.min.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="can.construct.proxy.html">
                can.construct.proxy.js
              </a>
            
              
              <a class="source" href="can.construct.super.html">
                can.construct.super.js
              </a>
            
              
              <a class="source" href="can.control.plugin.html">
                can.control.plugin.js
              </a>
            
              
              <a class="source" href="can.dojo.html">
                can.dojo.js
              </a>
            
              
              <a class="source" href="can.dojo.min.html">
                can.dojo.min.js
              </a>
            
              
              <a class="source" href="can.fixture.html">
                can.fixture.js
              </a>
            
              
              <a class="source" href="can.jquery.html">
                can.jquery.js
              </a>
            
              
              <a class="source" href="can.jquery.min.html">
                can.jquery.min.js
              </a>
            
              
              <a class="source" href="can.model.queue.html">
                can.model.queue.js
              </a>
            
              
              <a class="source" href="can.mootools.html">
                can.mootools.js
              </a>
            
              
              <a class="source" href="can.mootools.min.html">
                can.mootools.min.js
              </a>
            
              
              <a class="source" href="can.object.html">
                can.object.js
              </a>
            
              
              <a class="source" href="can.observe.attributes.html">
                can.observe.attributes.js
              </a>
            
              
              <a class="source" href="can.observe.backup.html">
                can.observe.backup.js
              </a>
            
              
              <a class="source" href="can.observe.delegate.html">
                can.observe.delegate.js
              </a>
            
              
              <a class="source" href="can.observe.setter.html">
                can.observe.setter.js
              </a>
            
              
              <a class="source" href="can.observe.validations.html">
                can.observe.validations.js
              </a>
            
              
              <a class="source" href="can.util.string.html">
                can.util.string.js
              </a>
            
              
              <a class="source" href="can.view.modifiers.html">
                can.view.modifiers.js
              </a>
            
              
              <a class="source" href="can.view.mustache.html">
                can.view.mustache.js
              </a>
            
              
              <a class="source" href="can.yui.html">
                can.yui.js
              </a>
            
              
              <a class="source" href="can.yui.min.html">
                can.yui.min.js
              </a>
            
              
              <a class="source" href="can.zepto.html">
                can.zepto.js
              </a>
            
              
              <a class="source" href="can.zepto.min.html">
                can.zepto.min.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>can.zepto.min.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="comment">/*!
 * CanJS - 1.1.6
 * http://canjs.us/
 * Copyright (c) 2013 Bitovi
 * Wed, 05 Jun 2013 18:02:51 GMT
 * Licensed MIT
 * Includes: CanJS default build
 * Download from: http://canjs.us/
 */</span>
!<span class="keyword">function</span>(<span class="literal">undefined</span>){<span class="keyword">var</span> __m4=<span class="keyword">function</span>(){<span class="keyword">var</span> a=window.can||{};(<span class="string">"undefined"</span>==<span class="keyword">typeof</span> GLOBALCAN||GLOBALCAN!==!<span class="number">1</span>)&amp;&amp;(window.can=a),a.isDeferred=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="keyword">this</span>.isFunction;<span class="keyword">return</span> a&amp;&amp;b(a.then)&amp;&amp;b(a.pipe)};<span class="keyword">var</span> b=<span class="number">0</span>;<span class="keyword">return</span> a.cid=<span class="keyword">function</span>(a,c){<span class="keyword">return</span> a._cid?a._cid:a._cid=(c||<span class="string">""</span>)+ ++b},a.VERSION=<span class="string">"@EDGE"</span>,a}(),__m6=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=Object.prototype.hasOwnProperty,c=<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="literal">null</span>!=a&amp;&amp;a==a.window},d=<span class="keyword">function</span>(a){<span class="keyword">if</span>(!a||<span class="string">"object"</span>!=<span class="keyword">typeof</span> a||a.nodeType||c(a))<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">try</span>{<span class="keyword">if</span>(a.constructor&amp;&amp;!b.call(a,<span class="string">"constructor"</span>)&amp;&amp;!b.call(a.constructor.prototype,<span class="string">"isPrototypeOf"</span>))<span class="keyword">return</span>!<span class="number">1</span>}<span class="keyword">catch</span>(d){<span class="keyword">return</span>!<span class="number">1</span>}<span class="keyword">var</span> e;<span class="keyword">for</span>(e <span class="keyword">in</span> a);<span class="keyword">return</span> e===<span class="literal">undefined</span>||b.call(a,e)};<span class="keyword">return</span> a.isPlainObject=d,a}(__m4),__m7=<span class="keyword">function</span>(a){<span class="keyword">return</span> a.addEvent=<span class="keyword">function</span>(a,b){<span class="keyword">this</span>.__bindEvents||(<span class="keyword">this</span>.__bindEvents={});<span class="keyword">var</span> c=a.split(<span class="string">"."</span>)[<span class="number">0</span>];<span class="keyword">return</span> <span class="keyword">this</span>.__bindEvents[c]||(<span class="keyword">this</span>.__bindEvents[c]=[]),<span class="keyword">this</span>.__bindEvents[c].push({handler:b,name:a}),<span class="keyword">this</span>},a.removeEvent=<span class="keyword">function</span>(a,b){<span class="keyword">if</span>(<span class="keyword">this</span>.__bindEvents){<span class="keyword">for</span>(<span class="keyword">var</span> c,d=<span class="number">0</span>,e=<span class="keyword">this</span>.__bindEvents[a.split(<span class="string">"."</span>)[<span class="number">0</span>]];d&lt;e.length;)c=e[d],b&amp;&amp;c.handler===b||!b&amp;&amp;c.name===a?e.splice(d,<span class="number">1</span>):d++;<span class="keyword">return</span> <span class="keyword">this</span>}},a.dispatch=<span class="keyword">function</span>(b){<span class="keyword">if</span>(<span class="keyword">this</span>.__bindEvents){<span class="keyword">var</span> c=b.type.split(<span class="string">"."</span>)[<span class="number">0</span>],d=(<span class="keyword">this</span>.__bindEvents[c]||[]).slice(<span class="number">0</span>),e=<span class="keyword">this</span>,f=[b].concat(b.data||[]);a.each(d,<span class="keyword">function</span>(a){b.data=f.slice(<span class="number">1</span>),a.handler.apply(e,f)})}},a}(__m4),__m8=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="regexp">/^\s*&lt;(\w+)[^&gt;]*&gt;/</span>,c=<span class="keyword">function</span>(c,d){d===<span class="literal">undefined</span>&amp;&amp;(d=b.test(c)&amp;&amp;RegExp.$<span class="number">1</span>),c&amp;&amp;a.isFunction(c.replace)&amp;&amp;(c=c.replace(<span class="regexp">/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/gi</span>,<span class="string">"&lt;$1&gt;&lt;/$2&gt;"</span>));<span class="keyword">var</span> e=document.createElement(<span class="string">"div"</span>),f=document.createElement(<span class="string">"div"</span>);<span class="string">"tbody"</span>===d||<span class="string">"tfoot"</span>===d||<span class="string">"thead"</span>===d?(f.innerHTML=<span class="string">"&lt;table&gt;"</span>+c+<span class="string">"&lt;/table&gt;"</span>,e=<span class="number">3</span>===f.firstChild.nodeType?f.lastChild:f.firstChild):<span class="string">"tr"</span>===d?(f.innerHTML=<span class="string">"&lt;table&gt;&lt;tbody&gt;"</span>+c+<span class="string">"&lt;/tbody&gt;&lt;/table&gt;"</span>,e=<span class="number">3</span>===f.firstChild.nodeType?f.lastChild:f.firstChild.firstChild):<span class="string">"td"</span>===d||<span class="string">"th"</span>===d?(f.innerHTML=<span class="string">"&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;"</span>+c+<span class="string">"&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;"</span>,e=<span class="number">3</span>===f.firstChild.nodeType?f.lastChild:f.firstChild.firstChild.firstChild):<span class="string">"option"</span>===d?(f.innerHTML=<span class="string">"&lt;select&gt;"</span>+c+<span class="string">"&lt;/select&gt;"</span>,e=<span class="number">3</span>===f.firstChild.nodeType?f.lastChild:f.firstChild):e.innerHTML=<span class="string">""</span>+c;<span class="keyword">var</span> g={},h=e.childNodes;g.length=h.length;<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;h.length;i++)g[i]=h[i];<span class="keyword">return</span>[].slice.call(g)};<span class="keyword">return</span> a.buildFragment=<span class="keyword">function</span>(b){<span class="keyword">var</span> d=c(b),e=document.createDocumentFragment();<span class="keyword">return</span> a.each(d,<span class="keyword">function</span>(a){e.appendChild(a)}),e},a}(__m4),__m9=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="keyword">function</span>(a,b){<span class="keyword">for</span>(<span class="keyword">var</span> c <span class="keyword">in</span> b)b.hasOwnProperty(c)&amp;&amp;(a[c]=b[c])},c=<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="keyword">this</span> <span class="keyword">instanceof</span> c?(<span class="keyword">this</span>._doneFuncs=[],<span class="keyword">this</span>._failFuncs=[],<span class="keyword">this</span>._resultArgs=<span class="literal">null</span>,<span class="keyword">this</span>._status=<span class="string">""</span>,a&amp;&amp;a.call(<span class="keyword">this</span>,<span class="keyword">this</span>),<span class="keyword">void</span> <span class="number">0</span>):<span class="keyword">new</span> c};a.Deferred=c,a.when=c.when=<span class="keyword">function</span>(){<span class="keyword">var</span> b=a.makeArray(arguments);<span class="keyword">if</span>(b.length&lt;<span class="number">2</span>){<span class="keyword">var</span> d=b[<span class="number">0</span>];<span class="keyword">return</span> d&amp;&amp;a.isFunction(d.isResolved)&amp;&amp;a.isFunction(d.isRejected)?d:c().resolve(d)}<span class="keyword">var</span> e=c(),f=<span class="number">0</span>,g=[];<span class="keyword">return</span> a.each(b,<span class="keyword">function</span>(a,c){a.done(<span class="keyword">function</span>(){g[c]=arguments.length&lt;<span class="number">2</span>?arguments[<span class="number">0</span>]:arguments,++f==b.length&amp;&amp;e.resolve.apply(e,g)}).fail(<span class="keyword">function</span>(){e.reject(<span class="number">1</span>===arguments.length?arguments[<span class="number">0</span>]:arguments)})}),e};<span class="keyword">var</span> d=<span class="keyword">function</span>(a,b){<span class="keyword">return</span> <span class="keyword">function</span>(c){<span class="keyword">var</span> d=<span class="keyword">this</span>._resultArgs=arguments.length&gt;<span class="number">1</span>?arguments[<span class="number">1</span>]:[];<span class="keyword">return</span> <span class="keyword">this</span>.exec(c,<span class="keyword">this</span>[a],d,b)}},e=<span class="keyword">function</span>(b,c){<span class="keyword">return</span> <span class="keyword">function</span>(){<span class="keyword">var</span> d=<span class="keyword">this</span>;<span class="keyword">return</span> a.each(Array.prototype.slice.call(arguments),<span class="keyword">function</span>(a,e,f){a&amp;&amp;(a.constructor===Array?f.callee.apply(d,a):(d._status===c&amp;&amp;a.apply(d,d._resultArgs||[]),d[b].push(a)))}),<span class="keyword">this</span>}};<span class="keyword">return</span> b(c.prototype,{pipe:<span class="keyword">function</span>(b,c){<span class="keyword">var</span> d=a.Deferred();<span class="keyword">return</span> <span class="keyword">this</span>.done(<span class="keyword">function</span>(){d.resolve(b.apply(<span class="keyword">this</span>,arguments))}),<span class="keyword">this</span>.fail(<span class="keyword">function</span>(){c?d.reject(c.apply(<span class="keyword">this</span>,arguments)):d.reject.apply(d,arguments)}),d},resolveWith:d(<span class="string">"_doneFuncs"</span>,<span class="string">"rs"</span>),rejectWith:d(<span class="string">"_failFuncs"</span>,<span class="string">"rj"</span>),done:e(<span class="string">"_doneFuncs"</span>,<span class="string">"rs"</span>),fail:e(<span class="string">"_failFuncs"</span>,<span class="string">"rj"</span>),always:<span class="keyword">function</span>(){<span class="keyword">var</span> b=a.makeArray(arguments);<span class="keyword">return</span> b.length&amp;&amp;b[<span class="number">0</span>]&amp;&amp;<span class="keyword">this</span>.done(b[<span class="number">0</span>]).fail(b[<span class="number">0</span>]),<span class="keyword">this</span>},then:<span class="keyword">function</span>(){<span class="keyword">var</span> b=a.makeArray(arguments);<span class="keyword">return</span> b.length&gt;<span class="number">1</span>&amp;&amp;b[<span class="number">1</span>]&amp;&amp;<span class="keyword">this</span>.fail(b[<span class="number">1</span>]),b.length&amp;&amp;b[<span class="number">0</span>]&amp;&amp;<span class="keyword">this</span>.done(b[<span class="number">0</span>]),<span class="keyword">this</span>},state:<span class="keyword">function</span>(){<span class="keyword">switch</span>(<span class="keyword">this</span>._status){<span class="keyword">case</span><span class="string">"rs"</span>:<span class="keyword">return</span><span class="string">"resolved"</span>;<span class="keyword">case</span><span class="string">"rj"</span>:<span class="keyword">return</span><span class="string">"rejected"</span>;<span class="keyword">default</span>:<span class="keyword">return</span><span class="string">"pending"</span>}},isResolved:<span class="keyword">function</span>(){<span class="keyword">return</span><span class="string">"rs"</span>===<span class="keyword">this</span>._status},isRejected:<span class="keyword">function</span>(){<span class="keyword">return</span><span class="string">"rj"</span>===<span class="keyword">this</span>._status},reject:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.rejectWith(<span class="keyword">this</span>,arguments)},resolve:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.resolveWith(<span class="keyword">this</span>,arguments)},exec:<span class="keyword">function</span>(b,c,d,e){<span class="keyword">return</span><span class="string">""</span>!==<span class="keyword">this</span>._status?<span class="keyword">this</span>:(<span class="keyword">this</span>._status=e,a.each(c,<span class="keyword">function</span>(a){a.apply(b,d)}),<span class="keyword">this</span>)}}),a}(__m4),__m10=<span class="keyword">function</span>(a){<span class="keyword">return</span> a.each=<span class="keyword">function</span>(a,b,c){<span class="keyword">var</span> d,e=<span class="number">0</span>;<span class="keyword">if</span>(a)<span class="keyword">if</span>(<span class="string">"number"</span>==<span class="keyword">typeof</span> a.length&amp;&amp;a.pop)<span class="keyword">for</span>(a.attr&amp;&amp;a.attr(<span class="string">"length"</span>),d=a.length;d&gt;e&amp;&amp;b.call(c||a[e],a[e],e,a)!==!<span class="number">1</span>;e++);<span class="keyword">else</span> <span class="keyword">if</span>(a.hasOwnProperty)<span class="keyword">for</span>(d <span class="keyword">in</span> a)<span class="keyword">if</span>(a.hasOwnProperty(d)&amp;&amp;b.call(c||a[d],a[d],d,a)===!<span class="number">1</span>)<span class="keyword">break</span>;<span class="keyword">return</span> a},a}(__m4),__m3=<span class="keyword">function</span>(a){<span class="function"><span class="keyword">function</span> <span class="title">b</span><span class="params">(a,b)</span>{</span><span class="keyword">var</span> g=a[h],i=g&amp;&amp;e[g];<span class="keyword">return</span> b===<span class="literal">undefined</span>?i||c(a):i&amp;&amp;i[b]||f.call(d(a),b)}<span class="function"><span class="keyword">function</span> <span class="title">c</span><span class="params">(a,b,c)</span>{</span><span class="keyword">var</span> d=a[h]||(a[h]=++g),f=e[d]||(e[d]={});<span class="keyword">return</span> b!==<span class="literal">undefined</span>&amp;&amp;(f[b]=c),f}<span class="keyword">var</span> d=Zepto,e={},f=d.fn.data,g=d.uuid=+<span class="keyword">new</span> Date,h=d.expando=<span class="string">"Zepto"</span>+g;d.fn.data=<span class="keyword">function</span>(a,e){<span class="keyword">return</span> e===<span class="literal">undefined</span>?<span class="number">0</span>==<span class="keyword">this</span>.length?<span class="literal">undefined</span>:b(<span class="keyword">this</span>[<span class="number">0</span>],a):<span class="keyword">this</span>.each(<span class="keyword">function</span>(f){c(<span class="keyword">this</span>,a,d.isFunction(e)?e.call(<span class="keyword">this</span>,f,b(<span class="keyword">this</span>,a)):e)})},d.cleanData=<span class="keyword">function</span>(b){<span class="keyword">for</span>(<span class="keyword">var</span> c,d=<span class="number">0</span>;(c=b[d])!==<span class="literal">undefined</span>;d++){a.trigger(c,<span class="string">"destroyed"</span>,[],!<span class="number">1</span>);<span class="keyword">var</span> f=c[h];<span class="keyword">delete</span> e[f]}};<span class="keyword">var</span> i=a.each;d.extend(a,Zepto),a.each=i;<span class="keyword">var</span> j=<span class="keyword">function</span>(a,b){<span class="keyword">return</span> a[<span class="number">0</span>]&amp;&amp;a[<span class="number">0</span>][b]||a[b]};a.trigger=<span class="keyword">function</span>(b,c,e,f){b.trigger?b.trigger(c,e):j(b,<span class="string">"dispatchEvent"</span>)?f===!<span class="number">1</span>?d([b]).triggerHandler(c,e):d([b]).trigger(c,e):(<span class="string">"string"</span>==<span class="keyword">typeof</span> c&amp;&amp;(c={type:c}),c.target=c.target||b,c.data=e,a.dispatch.call(b,c))},a.$=Zepto,a.bind=<span class="keyword">function</span>(b,c){<span class="keyword">return</span> <span class="keyword">this</span>.bind?<span class="keyword">this</span>.bind(b,c):j(<span class="keyword">this</span>,<span class="string">"addEventListener"</span>)?d([<span class="keyword">this</span>]).bind(b,c):a.addEvent.call(<span class="keyword">this</span>,b,c),<span class="keyword">this</span>},a.unbind=<span class="keyword">function</span>(b,c){<span class="keyword">return</span> <span class="keyword">this</span>.unbind?<span class="keyword">this</span>.unbind(b,c):j(<span class="keyword">this</span>,<span class="string">"addEventListener"</span>)?d([<span class="keyword">this</span>]).unbind(b,c):a.removeEvent.call(<span class="keyword">this</span>,b,c),<span class="keyword">this</span>},a.delegate=<span class="keyword">function</span>(a,b,c){<span class="keyword">this</span>.delegate?<span class="keyword">this</span>.delegate(a,b,c):d([<span class="keyword">this</span>]).delegate(a,b,c)},a.undelegate=<span class="keyword">function</span>(a,b,c){<span class="keyword">this</span>.undelegate?<span class="keyword">this</span>.undelegate(a,b,c):d([<span class="keyword">this</span>]).undelegate(a,b,c)},d.each([<span class="string">"append"</span>,<span class="string">"filter"</span>,<span class="string">"addClass"</span>,<span class="string">"remove"</span>,<span class="string">"data"</span>],<span class="keyword">function</span>(b,c){a[c]=<span class="keyword">function</span>(b){<span class="keyword">return</span> b[c].apply(b,a.makeArray(arguments).slice(<span class="number">1</span>))}}),a.makeArray=<span class="keyword">function</span>(b){<span class="keyword">var</span> c=[];<span class="keyword">return</span> a.each(b,<span class="keyword">function</span>(a,b){c[b]=a}),c},a.proxy=<span class="keyword">function</span>(a,b){<span class="keyword">return</span> <span class="keyword">function</span>(){<span class="keyword">return</span> a.apply(b,arguments)}};<span class="keyword">var</span> k=d.ajaxSettings.xhr;d.ajaxSettings.xhr=<span class="keyword">function</span>(){<span class="keyword">var</span> a=k(),b=a.open;<span class="keyword">return</span> a.open=<span class="keyword">function</span>(a,c){b.call(<span class="keyword">this</span>,a,c,l===<span class="literal">undefined</span>?!<span class="number">0</span>:l)},a};<span class="keyword">var</span> l,m=d.ajax,n=<span class="keyword">function</span>(a,b){<span class="keyword">for</span>(<span class="keyword">var</span> c <span class="keyword">in</span> a)b[c]=<span class="string">"function"</span>==<span class="keyword">typeof</span> b[c]?<span class="keyword">function</span>(){a[c].apply(a,arguments)}:c[a]};<span class="keyword">return</span> a.ajax=<span class="keyword">function</span>(b){<span class="keyword">var</span> c=b.success,d=b.error,e=a.Deferred();b.success=<span class="keyword">function</span>(a){n(f,e),e.resolve.call(e,a),c&amp;&amp;c.apply(<span class="keyword">this</span>,arguments)},b.error=<span class="keyword">function</span>(){n(f,e),e.reject.apply(e,arguments),d&amp;&amp;d.apply(<span class="keyword">this</span>,arguments)},b.async===!<span class="number">1</span>&amp;&amp;(l=!<span class="number">1</span>);<span class="keyword">var</span> f=m(b);<span class="keyword">return</span> l=<span class="literal">undefined</span>,n(f,e),e},d.fn.empty=<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="keyword">function</span>(){d.cleanData(<span class="keyword">this</span>.getElementsByTagName(<span class="string">"*"</span>)),<span class="keyword">this</span>.innerHTML=<span class="string">""</span>})},d.fn.remove=<span class="keyword">function</span>(){<span class="keyword">return</span> d.cleanData(<span class="keyword">this</span>),<span class="keyword">this</span>.each(<span class="keyword">function</span>(){<span class="literal">null</span>!=<span class="keyword">this</span>.parentNode&amp;&amp;(<span class="keyword">this</span>.getElementsByTagName&amp;&amp;d.cleanData(<span class="keyword">this</span>.getElementsByTagName(<span class="string">"*"</span>)),<span class="keyword">this</span>.parentNode.removeChild(<span class="keyword">this</span>))}),<span class="keyword">this</span>},a.trim=<span class="keyword">function</span>(a){<span class="keyword">return</span> a.trim()},a.isEmptyObject=<span class="keyword">function</span>(a){<span class="keyword">var</span> b;<span class="keyword">for</span>(b <span class="keyword">in</span> a);<span class="keyword">return</span> b===<span class="literal">undefined</span>},a.extend=<span class="keyword">function</span>(b){<span class="keyword">if</span>(b===!<span class="number">0</span>){<span class="keyword">var</span> c=a.makeArray(arguments);<span class="keyword">return</span> c.shift(),d.extend.apply(d,c)}<span class="keyword">return</span> d.extend.apply(d,arguments)},a.get=<span class="keyword">function</span>(a,b){<span class="keyword">return</span> a[b]},a}(__m4,Zepto,__m6,__m7,__m8,__m9,__m10),__m2=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="regexp">/_|-/</span>,c=<span class="regexp">/\=\=/</span>,d=<span class="regexp">/([A-Z]+)([A-Z][a-z])/g</span>,e=<span class="regexp">/([a-z\d])([A-Z])/g</span>,f=<span class="regexp">/([a-z\d])([A-Z])/g</span>,g=<span class="regexp">/\{([^\}]+)\}/g</span>,h=<span class="regexp">/"/g</span>,i=<span class="regexp">/'/g</span>,j=<span class="keyword">function</span>(a,b,c){<span class="keyword">var</span> d=a[b];<span class="keyword">return</span> d===<span class="literal">undefined</span>&amp;&amp;c===!<span class="number">0</span>&amp;&amp;(d=a[b]={}),d},k=<span class="keyword">function</span>(a){<span class="keyword">return</span><span class="regexp">/^f|^o/</span>.test(<span class="keyword">typeof</span> a)};<span class="keyword">return</span> a.extend(a,{esc:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="literal">null</span>===a||a===<span class="literal">undefined</span>||isNaN(a)&amp;&amp;<span class="string">"NaN"</span>==<span class="string">""</span>+a;<span class="keyword">return</span>(<span class="string">""</span>+(b?<span class="string">""</span>:a)).replace(<span class="regexp">/&amp;/g</span>,<span class="string">"&amp;amp;"</span>).replace(<span class="regexp">/&lt;/g</span>,<span class="string">"&amp;lt;"</span>).replace(<span class="regexp">/&gt;/g</span>,<span class="string">"&amp;gt;"</span>).replace(h,<span class="string">"&amp;#34;"</span>).replace(i,<span class="string">"&amp;#39;"</span>)},getObject:<span class="keyword">function</span>(b,c,d){<span class="keyword">var</span> e,f,g,h,i=b?b.split(<span class="string">"."</span>):[],l=i.length,m=<span class="number">0</span>;<span class="keyword">if</span>(c=a.isArray(c)?c:[c||window],h=c.length,!l)<span class="keyword">return</span> c[<span class="number">0</span>];<span class="keyword">for</span>(m;h&gt;m;m++){<span class="keyword">for</span>(e=c[m],g=<span class="literal">undefined</span>,f=<span class="number">0</span>;l&gt;f&amp;&amp;k(e);f++)g=e,e=j(g,i[f]);<span class="keyword">if</span>(g!==<span class="literal">undefined</span>&amp;&amp;e!==<span class="literal">undefined</span>)<span class="keyword">break</span>}<span class="keyword">if</span>(d===!<span class="number">1</span>&amp;&amp;e!==<span class="literal">undefined</span>&amp;&amp;<span class="keyword">delete</span> g[i[f-<span class="number">1</span>]],d===!<span class="number">0</span>&amp;&amp;e===<span class="literal">undefined</span>)<span class="keyword">for</span>(e=c[<span class="number">0</span>],f=<span class="number">0</span>;l&gt;f&amp;&amp;k(e);f++)e=j(e,i[f],!<span class="number">0</span>);<span class="keyword">return</span> e},capitalize:<span class="keyword">function</span>(a){<span class="keyword">return</span> a.charAt(<span class="number">0</span>).toUpperCase()+a.slice(<span class="number">1</span>)},underscore:<span class="keyword">function</span>(a){<span class="keyword">return</span> a.replace(c,<span class="string">"/"</span>).replace(d,<span class="string">"$1_$2"</span>).replace(e,<span class="string">"$1_$2"</span>).replace(f,<span class="string">"_"</span>).toLowerCase()},sub:<span class="keyword">function</span>(b,c,d){<span class="keyword">var</span> e=[];<span class="keyword">return</span> b=b||<span class="string">""</span>,e.push(b.replace(g,<span class="keyword">function</span>(b,f){<span class="keyword">var</span> g=a.getObject(f,c,d===!<span class="number">0</span>?!<span class="number">1</span>:<span class="literal">undefined</span>);<span class="keyword">return</span> g===<span class="literal">undefined</span>?(e=<span class="literal">null</span>,<span class="string">""</span>):k(g)&amp;&amp;e?(e.push(g),<span class="string">""</span>):<span class="string">""</span>+g})),<span class="literal">null</span>===e?e:e.length&lt;=<span class="number">1</span>?e[<span class="number">0</span>]:e},replacer:g,undHash:b}),a}(__m3),__m1=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="number">0</span>;<span class="keyword">return</span> a.Construct=<span class="keyword">function</span>(){<span class="keyword">return</span> arguments.length?a.Construct.extend.apply(a.Construct,arguments):<span class="keyword">void</span> <span class="number">0</span>},a.extend(a.Construct,{newInstance:<span class="keyword">function</span>(){<span class="keyword">var</span> a,b=<span class="keyword">this</span>.instance();<span class="keyword">return</span> b.setup&amp;&amp;(a=b.setup.apply(b,arguments)),b.init&amp;&amp;b.init.apply(b,a||arguments),b},_inherit:<span class="keyword">function</span>(b,c,d){a.extend(d||b,b||{})},_overwrite:<span class="keyword">function</span>(a,b,c,d){a[c]=d},setup:<span class="keyword">function</span>(b){<span class="keyword">this</span>.defaults=a.extend(!<span class="number">0</span>,{},b.defaults,<span class="keyword">this</span>.defaults)},instance:<span class="keyword">function</span>(){b=<span class="number">1</span>;<span class="keyword">var</span> a=<span class="keyword">new</span> <span class="keyword">this</span>;<span class="keyword">return</span> b=<span class="number">0</span>,a},extend:<span class="keyword">function</span>(c,d,e){<span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">()</span>{</span><span class="keyword">return</span> b?<span class="keyword">void</span> <span class="number">0</span>:<span class="keyword">this</span>.constructor!==f&amp;&amp;arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):<span class="keyword">this</span>.constructor.newInstance.apply(<span class="keyword">this</span>.constructor,arguments)}<span class="string">"string"</span>!=<span class="keyword">typeof</span> c&amp;&amp;(e=d,d=c,c=<span class="literal">null</span>),e||(e=d,d=<span class="literal">null</span>),e=e||{};<span class="keyword">var</span> g,h,i,j,k=<span class="keyword">this</span>,l=<span class="keyword">this</span>.prototype;j=<span class="keyword">this</span>.instance(),a.Construct._inherit(e,l,j);<span class="keyword">for</span>(g <span class="keyword">in</span> k)k.hasOwnProperty(g)&amp;&amp;(f[g]=k[g]);<span class="keyword">if</span>(a.Construct._inherit(d,k,f),c){<span class="keyword">var</span> m=c.split(<span class="string">"."</span>),h=m.pop(),n=a.getObject(m.join(<span class="string">"."</span>),window,!<span class="number">0</span>),i=n,o=a.underscore(c.replace(<span class="regexp">/\./g</span>,<span class="string">"_"</span>)),p=a.underscore(h);n[h]=f}a.extend(f,{constructor:f,prototype:j,namespace:i,_shortName:p,fullName:c,_fullName:o}),h!==<span class="literal">undefined</span>&amp;&amp;(f.shortName=h),f.prototype.constructor=f;<span class="keyword">var</span> q=[k].concat(a.makeArray(arguments)),r=f.setup.apply(f,q);<span class="keyword">return</span> f.init&amp;&amp;f.init.apply(f,r||q),f}}),a.Construct}(__m2),__m12=<span class="keyword">function</span>(a){<span class="keyword">return</span> a.bindAndSetup=<span class="keyword">function</span>(){<span class="keyword">return</span> a.addEvent.apply(<span class="keyword">this</span>,arguments),<span class="keyword">this</span>._init||(<span class="keyword">this</span>._bindings?<span class="keyword">this</span>._bindings++:(<span class="keyword">this</span>._bindings=<span class="number">1</span>,<span class="keyword">this</span>._bindsetup&amp;&amp;<span class="keyword">this</span>._bindsetup())),<span class="keyword">this</span>},a.unbindAndTeardown=<span class="keyword">function</span>(){<span class="keyword">return</span> a.removeEvent.apply(<span class="keyword">this</span>,arguments),<span class="keyword">this</span>._bindings--,<span class="keyword">this</span>._bindings||<span class="keyword">this</span>._bindteardown&amp;&amp;<span class="keyword">this</span>._bindteardown(),<span class="keyword">this</span>},a}(__m3),__m11=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="keyword">function</span>(b){<span class="keyword">return</span> b&amp;&amp;!a.isDeferred(b)&amp;&amp;(a.isArray(b)||a.isPlainObject(b)||b <span class="keyword">instanceof</span> a.Observe)},c=<span class="keyword">function</span>(b,c){<span class="keyword">return</span> a.each(b,<span class="keyword">function</span>(a){a&amp;&amp;a.unbind&amp;&amp;a.unbind(<span class="string">"change"</span>+c)})},d=<span class="keyword">function</span>(b,d,g,h,i){<span class="keyword">return</span> h=h||f,i=i||f.List,b <span class="keyword">instanceof</span> f?g._bindings&amp;&amp;c([b],g._cid):b=a.isArray(b)?<span class="keyword">new</span> i(b):<span class="keyword">new</span> h(b),g._bindings&amp;&amp;e(b,d,g),b},e=<span class="keyword">function</span>(b,c,d){b.bind(<span class="string">"change"</span>+d._cid,<span class="keyword">function</span>(){<span class="keyword">var</span> e=a.makeArray(arguments),f=e.shift();e[<span class="number">0</span>]=(<span class="string">"*"</span>===c?[d.indexOf(b),e[<span class="number">0</span>]]:[c,e[<span class="number">0</span>]]).join(<span class="string">"."</span>),f.triggeredNS=f.triggeredNS||{},f.triggeredNS[d._cid]||(f.triggeredNS[d._cid]=!<span class="number">0</span>,a.trigger(d,f,e))})};observeId=<span class="number">0</span>,serialize=<span class="keyword">function</span>(c,d,e){<span class="keyword">return</span> c.each(<span class="keyword">function</span>(c,f){e[f]=b(c)&amp;&amp;a.isFunction(c[d])?c[d]():c}),e},attrParts=<span class="keyword">function</span>(b,c){<span class="keyword">return</span> c?[b]:a.isArray(b)?b:(<span class="string">""</span>+b).split(<span class="string">"."</span>)},batchNum=<span class="number">1</span>,transactions=<span class="number">0</span>,batchEvents=[],stopCallbacks=[],makeBindSetup=<span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="keyword">function</span>(){<span class="keyword">var</span> b=<span class="keyword">this</span>;<span class="keyword">this</span>._each(<span class="keyword">function</span>(c,d){c&amp;&amp;c.bind&amp;&amp;e(c,a||d,b)})}};<span class="keyword">var</span> f=a.Map=a.Observe=a.Construct({bind:a.bindAndSetup,unbind:a.unbindAndTeardown,id:<span class="string">"id"</span>,canMakeObserve:b,startBatch:<span class="keyword">function</span>(a){transactions++,a&amp;&amp;stopCallbacks.push(a)},stopBatch:<span class="keyword">function</span>(b,c){<span class="keyword">if</span>(b?transactions=<span class="number">0</span>:transactions--,<span class="number">0</span>==transactions){<span class="keyword">var</span> d=batchEvents.slice(<span class="number">0</span>),e=stopCallbacks.slice(<span class="number">0</span>);batchEvents=[],stopCallbacks=[],batchNum++,c&amp;&amp;<span class="keyword">this</span>.startBatch(),a.each(d,<span class="keyword">function</span>(b){a.trigger.apply(a,b)}),a.each(e,<span class="keyword">function</span>(a){a()})}},triggerBatch:<span class="keyword">function</span>(b,c,d){<span class="keyword">if</span>(!b._init){<span class="keyword">if</span>(<span class="number">0</span>==transactions)<span class="keyword">return</span> a.trigger(b,c,d);c=<span class="string">"string"</span>==<span class="keyword">typeof</span> c?{type:c}:c,c.batchNum=batchNum,batchEvents.push([b,c,d])}},keys:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=[];f.__reading&amp;&amp;f.__reading(a,<span class="string">"__keys"</span>);<span class="keyword">for</span>(<span class="keyword">var</span> c <span class="keyword">in</span> a._data)b.push(c);<span class="keyword">return</span> b}},{setup:<span class="keyword">function</span>(b){<span class="keyword">this</span>._data={},a.cid(<span class="keyword">this</span>,<span class="string">".observe"</span>),<span class="keyword">this</span>._init=<span class="number">1</span>,<span class="keyword">this</span>.attr(b),<span class="keyword">this</span>.bind(<span class="string">"change"</span>+<span class="keyword">this</span>._cid,a.proxy(<span class="keyword">this</span>._changes,<span class="keyword">this</span>)),<span class="keyword">delete</span> <span class="keyword">this</span>._init},_bindsetup:makeBindSetup(),_bindteardown:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="keyword">this</span>._cid;<span class="keyword">this</span>._each(<span class="keyword">function</span>(b){c([b],a)})},_changes:<span class="keyword">function</span>(a,b,c,d,e){f.triggerBatch(<span class="keyword">this</span>,{type:b,batchNum:a.batchNum},[d,e])},_triggerChange:<span class="keyword">function</span>(){f.triggerBatch(<span class="keyword">this</span>,<span class="string">"change"</span>,a.makeArray(arguments))},_each:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="keyword">this</span>.__get();<span class="keyword">for</span>(<span class="keyword">var</span> c <span class="keyword">in</span> b)b.hasOwnProperty(c)&amp;&amp;a(b[c],c)},attr:<span class="keyword">function</span>(a,b){<span class="keyword">var</span> c=<span class="keyword">typeof</span> a;<span class="keyword">return</span><span class="string">"string"</span>!==c&amp;&amp;<span class="string">"number"</span>!==c?<span class="keyword">this</span>._attrs(a,b):<span class="number">1</span>===arguments.length?(f.__reading&amp;&amp;f.__reading(<span class="keyword">this</span>,a),<span class="keyword">this</span>._get(a)):(<span class="keyword">this</span>._set(a,b),<span class="keyword">this</span>)},each:<span class="keyword">function</span>(){<span class="keyword">return</span> f.__reading&amp;&amp;f.__reading(<span class="keyword">this</span>,<span class="string">"__keys"</span>),a.each.apply(<span class="literal">undefined</span>,[<span class="keyword">this</span>.__get()].concat(a.makeArray(arguments)))},removeAttr:<span class="keyword">function</span>(b){<span class="keyword">var</span> c=<span class="keyword">this</span> <span class="keyword">instanceof</span> a.Observe.List,d=attrParts(b),e=d.shift(),g=c?<span class="keyword">this</span>[e]:<span class="keyword">this</span>._data[e];<span class="keyword">return</span> d.length?g.removeAttr(d):(c?<span class="keyword">this</span>.splice(e,<span class="number">1</span>):e <span class="keyword">in</span> <span class="keyword">this</span>._data&amp;&amp;(<span class="keyword">delete</span> <span class="keyword">this</span>._data[e],e <span class="keyword">in</span> <span class="keyword">this</span>.constructor.prototype||<span class="keyword">delete</span> <span class="keyword">this</span>[e],f.triggerBatch(<span class="keyword">this</span>,<span class="string">"__keys"</span>),<span class="keyword">this</span>._triggerChange(e,<span class="string">"remove"</span>,<span class="literal">undefined</span>,g)),g)},_get:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="string">"string"</span>==<span class="keyword">typeof</span> a&amp;&amp;!!~a.indexOf(<span class="string">"."</span>)&amp;&amp;<span class="keyword">this</span>.__get(a);<span class="keyword">if</span>(b)<span class="keyword">return</span> b;<span class="keyword">var</span> c=attrParts(a),d=<span class="keyword">this</span>.__get(c.shift());<span class="keyword">return</span> c.length?d?d._get(c):<span class="literal">undefined</span>:d},__get:<span class="keyword">function</span>(a){<span class="keyword">return</span> a?<span class="keyword">this</span>._data[a]:<span class="keyword">this</span>._data},_set:<span class="keyword">function</span>(a,c,d){<span class="keyword">var</span> e=attrParts(a,d),f=e.shift(),g=<span class="keyword">this</span>.__get(f);<span class="keyword">if</span>(b(g)&amp;&amp;e.length)g._set(e,c);<span class="keyword">else</span>{<span class="keyword">if</span>(e.length)<span class="keyword">throw</span><span class="string">"can.Observe: Object does not exist"</span>;<span class="keyword">this</span>.__convert&amp;&amp;(c=<span class="keyword">this</span>.__convert(f,c)),<span class="keyword">this</span>.__set(f,c,g)}},__set:<span class="keyword">function</span>(a,e,g){<span class="keyword">if</span>(e!==g){<span class="keyword">var</span> h=<span class="keyword">this</span>.__get().hasOwnProperty(a)?<span class="string">"set"</span>:<span class="string">"add"</span>;<span class="keyword">this</span>.___set(a,b(e)?d(e,a,<span class="keyword">this</span>):e),<span class="string">"add"</span>==h&amp;&amp;f.triggerBatch(<span class="keyword">this</span>,<span class="string">"__keys"</span>,<span class="literal">undefined</span>),<span class="keyword">this</span>._triggerChange(a,h,e,g),g&amp;&amp;c([g],<span class="keyword">this</span>._cid)}},___set:<span class="keyword">function</span>(a,b){<span class="keyword">this</span>._data[a]=b,a <span class="keyword">in</span> <span class="keyword">this</span>.constructor.prototype||(<span class="keyword">this</span>[a]=b)},bind:a.bindAndSetup,unbind:a.unbindAndTeardown,serialize:<span class="keyword">function</span>(){<span class="keyword">return</span> serialize(<span class="keyword">this</span>,<span class="string">"serialize"</span>,{})},_attrs:<span class="keyword">function</span>(c,d){<span class="keyword">if</span>(c===<span class="literal">undefined</span>)<span class="keyword">return</span> serialize(<span class="keyword">this</span>,<span class="string">"attr"</span>,{});c=a.extend({},c);<span class="keyword">var</span> e,g,h=<span class="keyword">this</span>;f.startBatch(),<span class="keyword">this</span>.each(<span class="keyword">function</span>(e,f){<span class="keyword">return</span> g=c[f],g===<span class="literal">undefined</span>?(d&amp;&amp;h.removeAttr(f),<span class="keyword">void</span> <span class="number">0</span>):(h.__convert&amp;&amp;(g=h.__convert(f,g)),g <span class="keyword">instanceof</span> a.Observe?h.__set(f,g,e):b(e)&amp;&amp;b(g)&amp;&amp;e.attr?e.attr(g,d):e!=g&amp;&amp;h.__set(f,g,e),<span class="keyword">delete</span> c[f],<span class="keyword">void</span> <span class="number">0</span>)});<span class="keyword">for</span>(<span class="keyword">var</span> e <span class="keyword">in</span> c)g=c[e],<span class="keyword">this</span>._set(e,g,!<span class="number">0</span>);<span class="keyword">return</span> f.stopBatch(),<span class="keyword">this</span>},compute:<span class="keyword">function</span>(b){<span class="keyword">return</span> a.compute(<span class="keyword">this</span>,b)}}),g=[].splice,h=f({setup:<span class="keyword">function</span>(b,c){<span class="keyword">this</span>.length=<span class="number">0</span>,a.cid(<span class="keyword">this</span>,<span class="string">".observe"</span>),<span class="keyword">this</span>._init=<span class="number">1</span>,a.isDeferred(b)?<span class="keyword">this</span>.replace(b):<span class="keyword">this</span>.push.apply(<span class="keyword">this</span>,a.makeArray(b||[])),<span class="keyword">this</span>.bind(<span class="string">"change"</span>+<span class="keyword">this</span>._cid,a.proxy(<span class="keyword">this</span>._changes,<span class="keyword">this</span>)),a.extend(<span class="keyword">this</span>,c),<span class="keyword">delete</span> <span class="keyword">this</span>._init},_triggerChange:<span class="keyword">function</span>(a,b,c,d){f.prototype._triggerChange.apply(<span class="keyword">this</span>,arguments),~a.indexOf(<span class="string">"."</span>)||(<span class="string">"add"</span>===b?(f.triggerBatch(<span class="keyword">this</span>,b,[c,+a]),f.triggerBatch(<span class="keyword">this</span>,<span class="string">"length"</span>,[<span class="keyword">this</span>.length])):<span class="string">"remove"</span>===b?(f.triggerBatch(<span class="keyword">this</span>,b,[d,+a]),f.triggerBatch(<span class="keyword">this</span>,<span class="string">"length"</span>,[<span class="keyword">this</span>.length])):f.triggerBatch(<span class="keyword">this</span>,b,[c,+a]))},__get:<span class="keyword">function</span>(a){<span class="keyword">return</span> a?<span class="keyword">this</span>[a]:<span class="keyword">this</span>},___set:<span class="keyword">function</span>(a,b){<span class="keyword">this</span>[a]=b,+a&gt;=<span class="keyword">this</span>.length&amp;&amp;(<span class="keyword">this</span>.length=+a+<span class="number">1</span>)},_each:<span class="keyword">function</span>(a){<span class="keyword">for</span>(<span class="keyword">var</span> b=<span class="keyword">this</span>.__get(),c=<span class="number">0</span>;c&lt;b.length;c++)a(b[c],c)},_bindsetup:makeBindSetup(<span class="string">"*"</span>),serialize:<span class="keyword">function</span>(){<span class="keyword">return</span> serialize(<span class="keyword">this</span>,<span class="string">"serialize"</span>,[])},splice:<span class="keyword">function</span>(e,f){<span class="keyword">var</span> h,i=a.makeArray(arguments);<span class="keyword">for</span>(h=<span class="number">2</span>;h&lt;i.length;h++){<span class="keyword">var</span> j=i[h];b(j)&amp;&amp;(i[h]=d(j,<span class="string">"*"</span>,<span class="keyword">this</span>,<span class="keyword">this</span>.constructor.Observe,<span class="keyword">this</span>.constructor))}f===<span class="literal">undefined</span>&amp;&amp;(f=i[<span class="number">1</span>]=<span class="keyword">this</span>.length-e);<span class="keyword">var</span> k=g.apply(<span class="keyword">this</span>,i);<span class="keyword">return</span> a.Observe.startBatch(),f&gt;<span class="number">0</span>&amp;&amp;(<span class="keyword">this</span>._triggerChange(<span class="string">""</span>+e,<span class="string">"remove"</span>,<span class="literal">undefined</span>,k),c(k,<span class="keyword">this</span>._cid)),i.length&gt;<span class="number">2</span>&amp;&amp;<span class="keyword">this</span>._triggerChange(<span class="string">""</span>+e,<span class="string">"add"</span>,i.slice(<span class="number">2</span>),k),a.Observe.stopBatch(),k},_attrs:<span class="keyword">function</span>(b,c){<span class="keyword">return</span> b===<span class="literal">undefined</span>?serialize(<span class="keyword">this</span>,<span class="string">"attr"</span>,[]):(b=a.makeArray(b),f.startBatch(),<span class="keyword">this</span>._updateAttrs(b,c),f.stopBatch(),<span class="keyword">void</span> <span class="number">0</span>)},_updateAttrs:<span class="keyword">function</span>(a,c){<span class="keyword">for</span>(<span class="keyword">var</span> d=Math.min(a.length,<span class="keyword">this</span>.length),e=<span class="number">0</span>;d&gt;e;e++){<span class="keyword">var</span> f=<span class="keyword">this</span>[e],g=a[e];b(f)&amp;&amp;b(g)?f.attr(g,c):f!=g&amp;&amp;<span class="keyword">this</span>._set(e,g)}a.length&gt;<span class="keyword">this</span>.length?<span class="keyword">this</span>.push.apply(<span class="keyword">this</span>,a.slice(<span class="keyword">this</span>.length)):a.length&lt;<span class="keyword">this</span>.length&amp;&amp;c&amp;&amp;<span class="keyword">this</span>.splice(a.length)}}),i=<span class="keyword">function</span>(b){<span class="keyword">return</span> b[<span class="number">0</span>]&amp;&amp;a.isArray(b[<span class="number">0</span>])?b[<span class="number">0</span>]:a.makeArray(b)};<span class="keyword">return</span> a.each({push:<span class="string">"length"</span>,unshift:<span class="number">0</span>},<span class="keyword">function</span>(a,c){<span class="keyword">var</span> e=[][c];h.prototype[c]=<span class="keyword">function</span>(){<span class="keyword">var</span> c,f,g=[],h=a?<span class="keyword">this</span>.length:<span class="number">0</span>,i=arguments.length;<span class="keyword">for</span>(<span class="keyword">this</span>.constructor;i--;)f=arguments[i],g[i]=b(f)?d(f,<span class="string">"*"</span>,<span class="keyword">this</span>,<span class="keyword">this</span>.constructor.Observe,<span class="keyword">this</span>.constructor):f;<span class="keyword">return</span> c=e.apply(<span class="keyword">this</span>,g),(!<span class="keyword">this</span>.comparator||g.length)&amp;&amp;<span class="keyword">this</span>._triggerChange(<span class="string">""</span>+h,<span class="string">"add"</span>,g,<span class="literal">undefined</span>),c}}),a.each({pop:<span class="string">"length"</span>,shift:<span class="number">0</span>},<span class="keyword">function</span>(a,b){h.prototype[b]=<span class="keyword">function</span>(){<span class="keyword">var</span> c=i(arguments),d=a&amp;&amp;<span class="keyword">this</span>.length?<span class="keyword">this</span>.length-<span class="number">1</span>:<span class="number">0</span>,e=[][b].apply(<span class="keyword">this</span>,c);<span class="keyword">return</span> <span class="keyword">this</span>._triggerChange(<span class="string">""</span>+d,<span class="string">"remove"</span>,<span class="literal">undefined</span>,[e]),e&amp;&amp;e.unbind&amp;&amp;e.unbind(<span class="string">"change"</span>+<span class="keyword">this</span>._cid),e}}),a.extend(h.prototype,{indexOf:<span class="keyword">function</span>(b){<span class="keyword">return</span> <span class="keyword">this</span>.attr(<span class="string">"length"</span>),a.inArray(b,<span class="keyword">this</span>)},join:[].join,reverse:[].reverse,slice:<span class="keyword">function</span>(){<span class="keyword">var</span> a=Array.prototype.slice.apply(<span class="keyword">this</span>,arguments);<span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">this</span>.constructor(a)},concat:<span class="keyword">function</span>(){<span class="keyword">var</span> b=[];<span class="keyword">return</span> a.each(a.makeArray(arguments),<span class="keyword">function</span>(c,d){b[d]=c <span class="keyword">instanceof</span> a.Observe.List?c.serialize():c}),<span class="keyword">new</span> <span class="keyword">this</span>.constructor(Array.prototype.concat.apply(<span class="keyword">this</span>.serialize(),b))},forEach:<span class="keyword">function</span>(b,c){a.each(<span class="keyword">this</span>,b,c||<span class="keyword">this</span>)},replace:<span class="keyword">function</span>(b){<span class="keyword">return</span> a.isDeferred(b)?b.then(a.proxy(<span class="keyword">this</span>.replace,<span class="keyword">this</span>)):<span class="keyword">this</span>.splice.apply(<span class="keyword">this</span>,[<span class="number">0</span>,<span class="keyword">this</span>.length].concat(a.makeArray(b||[]))),<span class="keyword">this</span>}}),a.List=f.List=h,f.setup=<span class="keyword">function</span>(){a.Construct.setup.apply(<span class="keyword">this</span>,arguments),<span class="keyword">this</span>.List=f.List({Observe:<span class="keyword">this</span>},{})},f}(__m3,__m12,__m1),__m13=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="keyword">function</span>(b,c){<span class="keyword">var</span> d;a.Observe&amp;&amp;(d=a.Observe.__reading,a.Observe.__reading=<span class="keyword">function</span>(a,b){e.push({obj:a,attr:b+<span class="string">""</span>})});<span class="keyword">var</span> e=[],f=b.call(c);<span class="keyword">return</span> a.Observe&amp;&amp;(a.Observe.__reading=d),{value:f,observed:e}},c=<span class="keyword">function</span>(c,d,e,f){<span class="keyword">var</span> g,h={},i=!<span class="number">0</span>,j={value:<span class="literal">undefined</span>,teardown:<span class="keyword">function</span>(){<span class="keyword">for</span>(<span class="keyword">var</span> a <span class="keyword">in</span> h){<span class="keyword">var</span> b=h[a];b.observe.obj.unbind(b.observe.attr,k),<span class="keyword">delete</span> h[a]}}},k=<span class="keyword">function</span>(a){<span class="keyword">if</span>(!(f&amp;&amp;!f.bound||a.batchNum!==<span class="literal">undefined</span>&amp;&amp;a.batchNum===g)){<span class="keyword">var</span> b=j.value,c=l();j.value=c,c!==b&amp;&amp;e(c,b),g=g=a.batchNum}},l=<span class="keyword">function</span>(){<span class="keyword">var</span> e=b(c,d),f=e.observed,g=e.value;i=!i,a.each(f,<span class="keyword">function</span>(a){h[a.obj._cid+<span class="string">"|"</span>+a.attr]?h[a.obj._cid+<span class="string">"|"</span>+a.attr].matched=i:(h[a.obj._cid+<span class="string">"|"</span>+a.attr]={matched:i,observe:a},a.obj.bind(a.attr,k))});<span class="keyword">for</span>(<span class="keyword">var</span> j <span class="keyword">in</span> h){<span class="keyword">var</span> l=h[j];l.matched!==i&amp;&amp;(l.observe.obj.unbind(l.observe.attr,k),<span class="keyword">delete</span> h[j])}<span class="keyword">return</span> g};<span class="keyword">return</span> j.value=l(),j.isListening=!a.isEmptyObject(h),j};<span class="keyword">return</span> a.compute=<span class="keyword">function</span>(d,e,f){<span class="keyword">if</span>(d&amp;&amp;d.isComputed)<span class="keyword">return</span> d;<span class="keyword">var</span> g,h,i,j={bound:!<span class="number">1</span>,hasDependencies:!<span class="number">1</span>},k=<span class="keyword">function</span>(){},l=<span class="keyword">function</span>(){},m=<span class="keyword">function</span>(){<span class="keyword">return</span> i},n=<span class="keyword">function</span>(a){i=a},o=!<span class="number">0</span>;<span class="keyword">if</span>(h=<span class="keyword">function</span>(b){<span class="keyword">if</span>(arguments.length){<span class="keyword">var</span> c=i,d=n.call(e,b,c);<span class="keyword">return</span> h.hasDependencies?m.call(e):(i=d===<span class="literal">undefined</span>?m.call(e):d,c!==i&amp;&amp;a.Observe.triggerBatch(h,<span class="string">"change"</span>,[i,c]),i)}<span class="keyword">return</span> a.Observe.__reading&amp;&amp;o&amp;&amp;a.Observe.__reading(h,<span class="string">"change"</span>),j.bound?i:m.call(e)},<span class="string">"function"</span>==<span class="keyword">typeof</span> d)n=d,m=d,o=f===!<span class="number">1</span>?!<span class="number">1</span>:!<span class="number">0</span>,h.hasDependencies=!<span class="number">1</span>,k=<span class="keyword">function</span>(a){g=c(d,e||<span class="keyword">this</span>,a,j),h.hasDependencies=g.isListening,i=g.value},l=<span class="keyword">function</span>(){g.teardown()};<span class="keyword">else</span> <span class="keyword">if</span>(e)<span class="keyword">if</span>(<span class="string">"string"</span>==<span class="keyword">typeof</span> e){<span class="keyword">var</span> p=e,q=d <span class="keyword">instanceof</span> a.Observe;q&amp;&amp;(h.hasDependencies=!<span class="number">0</span>),m=<span class="keyword">function</span>(){<span class="keyword">return</span> q?d.attr(p):d[p]},n=<span class="keyword">function</span>(a){q?d.attr(p,a):d[p]=a};<span class="keyword">var</span> r;k=<span class="keyword">function</span>(c){r=<span class="keyword">function</span>(){c(m(),i)},a.bind.call(d,f||p,r),i=b(m).value},l=<span class="keyword">function</span>(){a.unbind.call(d,f||p,r)}}<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"function"</span>==<span class="keyword">typeof</span> e)i=d,n=e;<span class="keyword">else</span>{i=d;<span class="keyword">var</span> s=e;m=s.get||m,n=s.set||n,k=s.on||k,l=s.off||l}<span class="keyword">else</span> i=d;h.isComputed=!<span class="number">0</span>,a.cid(h,<span class="string">"compute"</span>);<span class="keyword">var</span> t=<span class="keyword">function</span>(b,c){i=b,a.Observe.triggerBatch(h,<span class="string">"change"</span>,[b,c])};<span class="keyword">return</span> a.extend(h,{_bindsetup:<span class="keyword">function</span>(){j.bound=!<span class="number">0</span>,k.call(<span class="keyword">this</span>,t)},_bindteardown:<span class="keyword">function</span>(){l.call(<span class="keyword">this</span>,t),j.bound=!<span class="number">1</span>},bind:a.bindAndSetup,unbind:a.unbindAndTeardown})},a.compute.binder=c,a.compute}(__m3,__m12),__m14=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="keyword">function</span>(b,c,d){<span class="keyword">var</span> e=<span class="keyword">new</span> a.Deferred;<span class="keyword">return</span> b.then(<span class="keyword">function</span>(){<span class="keyword">var</span> b=a.makeArray(arguments);b[<span class="number">0</span>]=c[d](b[<span class="number">0</span>]),e.resolveWith(e,b)},<span class="keyword">function</span>(){e.rejectWith(<span class="keyword">this</span>,arguments)}),<span class="string">"function"</span>==<span class="keyword">typeof</span> b.abort&amp;&amp;(e.abort=<span class="keyword">function</span>(){<span class="keyword">return</span> b.abort()}),e},c=<span class="number">0</span>,d=<span class="keyword">function</span>(b){<span class="keyword">return</span> a.Observe.__reading&amp;&amp;a.Observe.__reading(b,b.constructor.id),b.__get(b.constructor.id)},e=<span class="keyword">function</span>(b,c,d,e,f,g){<span class="keyword">var</span> h={};<span class="keyword">if</span>(<span class="string">"string"</span>==<span class="keyword">typeof</span> b){<span class="keyword">var</span> i=b.split(<span class="regexp">/\s+/</span>);h.url=i.pop(),i.length&amp;&amp;(h.type=i.pop())}<span class="keyword">else</span> a.extend(h,b);<span class="keyword">return</span> h.data=<span class="string">"object"</span>!=<span class="keyword">typeof</span> c||a.isArray(c)?c:a.extend(h.data||{},c),h.url=a.sub(h.url,h.data,!<span class="number">0</span>),a.ajax(a.extend({type:d||<span class="string">"post"</span>,dataType:e||<span class="string">"json"</span>,success:f,error:g},h))},f=<span class="keyword">function</span>(b,c,e,f,g){<span class="keyword">var</span> h;a.isArray(b)?(h=b[<span class="number">1</span>],b=b[<span class="number">0</span>]):h=b.serialize(),h=[h];<span class="keyword">var</span> i,j,k=b.constructor;<span class="keyword">return</span><span class="string">"destroy"</span>==c&amp;&amp;h.shift(),<span class="string">"create"</span>!==c&amp;&amp;h.unshift(d(b)),j=k[c].apply(k,h),i=j.pipe(<span class="keyword">function</span>(a){<span class="keyword">return</span> b[g||c+<span class="string">"d"</span>](a,j),b}),j.abort&amp;&amp;(i.abort=<span class="keyword">function</span>(){j.abort()}),i.then(e,f),i},g={create:{url:<span class="string">"_shortName"</span>,type:<span class="string">"post"</span>},update:{data:<span class="keyword">function</span>(b,c){c=c||{};<span class="keyword">var</span> d=<span class="keyword">this</span>.id;<span class="keyword">return</span> c[d]&amp;&amp;c[d]!==b&amp;&amp;(c[<span class="string">"new"</span>+a.capitalize(b)]=c[d],<span class="keyword">delete</span> c[d]),c[d]=b,c},type:<span class="string">"put"</span>},destroy:{type:<span class="string">"delete"</span>,data:<span class="keyword">function</span>(a){<span class="keyword">var</span> b={};<span class="keyword">return</span> b.id=b[<span class="keyword">this</span>.id]=a,b}},findAll:{url:<span class="string">"_shortName"</span>},findOne:{}},h=<span class="keyword">function</span>(a,b){<span class="keyword">return</span> <span class="keyword">function</span>(c){<span class="keyword">return</span> c=a.data?a.data.apply(<span class="keyword">this</span>,arguments):c,e(b||<span class="keyword">this</span>[a.url||<span class="string">"_url"</span>],c,a.type||<span class="string">"get"</span>)}};a.Model=a.Observe({fullName:<span class="string">"can.Model"</span>,_reqs:<span class="number">0</span>,setup:<span class="keyword">function</span>(b){<span class="keyword">if</span>(<span class="keyword">this</span>.store={},a.Observe.setup.apply(<span class="keyword">this</span>,arguments),a.Model){<span class="keyword">this</span>.List=i({Observe:<span class="keyword">this</span>},{});<span class="keyword">var</span> d=<span class="keyword">this</span>,e=a.proxy(<span class="keyword">this</span>._clean,d);a.each(g,<span class="keyword">function</span>(c,f){<span class="keyword">if</span>(a.isFunction(d[f])||(d[f]=h(c,d[f])),d[<span class="string">"make"</span>+a.capitalize(f)]){<span class="keyword">var</span> g=d[<span class="string">"make"</span>+a.capitalize(f)](d[f]);a.Construct._overwrite(d,b,f,<span class="keyword">function</span>(){a.Model._reqs++;<span class="keyword">var</span> b=g.apply(<span class="keyword">this</span>,arguments),c=b.then(e,e);<span class="keyword">return</span> c.abort=b.abort,c})}}),<span class="string">"can.Model"</span>!=d.fullName&amp;&amp;d.fullName||(d.fullName=<span class="string">"Model"</span>+ ++c),a.Model._reqs=<span class="number">0</span>,<span class="keyword">this</span>._url=<span class="keyword">this</span>._shortName+<span class="string">"/{"</span>+<span class="keyword">this</span>.id+<span class="string">"}"</span>}},_ajax:h,_makeRequest:f,_clean:<span class="keyword">function</span>(){<span class="keyword">if</span>(a.Model._reqs--,!a.Model._reqs)<span class="keyword">for</span>(<span class="keyword">var</span> b <span class="keyword">in</span> <span class="keyword">this</span>.store)<span class="keyword">this</span>.store[b]._bindings||<span class="keyword">delete</span> <span class="keyword">this</span>.store[b];<span class="keyword">return</span> arguments[<span class="number">0</span>]},models:<span class="keyword">function</span>(b,c){<span class="keyword">if</span>(a.Model._reqs++,b){<span class="keyword">if</span>(b <span class="keyword">instanceof</span> <span class="keyword">this</span>.List)<span class="keyword">return</span> b;<span class="keyword">var</span> d=<span class="keyword">this</span>,e=[],f=c <span class="keyword">instanceof</span> a.Observe.List?c:<span class="keyword">new</span>(d.List||i),g=a.isArray(b),h=b <span class="keyword">instanceof</span> i,j=g?b:h?b.serialize():b.data;<span class="keyword">return</span> f.length&amp;&amp;f.splice(<span class="number">0</span>),a.each(j,<span class="keyword">function</span>(a){e.push(d.model(a))}),f.push.apply(f,e),g||a.each(b,<span class="keyword">function</span>(a,b){<span class="string">"data"</span>!==b&amp;&amp;f.attr(b,a)}),setTimeout(a.proxy(<span class="keyword">this</span>._clean,<span class="keyword">this</span>),<span class="number">1</span>),f}},model:<span class="keyword">function</span>(b){<span class="keyword">if</span>(b){b <span class="keyword">instanceof</span> <span class="keyword">this</span>&amp;&amp;(b=b.serialize());<span class="keyword">var</span> c=b[<span class="keyword">this</span>.id],d=(c||<span class="number">0</span>===c)&amp;&amp;<span class="keyword">this</span>.store[c]?<span class="keyword">this</span>.store[c].attr(b,<span class="keyword">this</span>.removeAttr||!<span class="number">1</span>):<span class="keyword">new</span> <span class="keyword">this</span>(b);<span class="keyword">return</span> a.Model._reqs&amp;&amp;(<span class="keyword">this</span>.store[b[<span class="keyword">this</span>.id]]=d),d}}},{isNew:<span class="keyword">function</span>(){<span class="keyword">var</span> a=d(<span class="keyword">this</span>);<span class="keyword">return</span>!(a||<span class="number">0</span>===a)},save:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> f(<span class="keyword">this</span>,<span class="keyword">this</span>.isNew()?<span class="string">"create"</span>:<span class="string">"update"</span>,a,b)},destroy:<span class="keyword">function</span>(b,c){<span class="keyword">if</span>(<span class="keyword">this</span>.isNew()){<span class="keyword">var</span> d=<span class="keyword">this</span>,e=a.Deferred();<span class="keyword">return</span> e.then(b,c),e.done(<span class="keyword">function</span>(a){d.destroyed(a)}).resolve(d)}<span class="keyword">return</span> f(<span class="keyword">this</span>,<span class="string">"destroy"</span>,b,c,<span class="string">"destroyed"</span>)},_bindsetup:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.constructor.store[<span class="keyword">this</span>.__get(<span class="keyword">this</span>.constructor.id)]=<span class="keyword">this</span>,a.Observe.prototype._bindsetup.apply(<span class="keyword">this</span>,arguments)},_bindteardown:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">delete</span> <span class="keyword">this</span>.constructor.store[d(<span class="keyword">this</span>)],a.Observe.prototype._bindteardown.apply(<span class="keyword">this</span>,arguments)},___set:<span class="keyword">function</span>(b,c){a.Observe.prototype.___set.call(<span class="keyword">this</span>,b,c),b===<span class="keyword">this</span>.constructor.id&amp;&amp;<span class="keyword">this</span>._bindings&amp;&amp;(<span class="keyword">this</span>.constructor.store[d(<span class="keyword">this</span>)]=<span class="keyword">this</span>)}}),a.each({makeFindAll:<span class="string">"models"</span>,makeFindOne:<span class="string">"model"</span>,makeCreate:<span class="string">"model"</span>,makeUpdate:<span class="string">"model"</span>},<span class="keyword">function</span>(c,d){a.Model[d]=<span class="keyword">function</span>(d){<span class="keyword">return</span> <span class="keyword">function</span>(){<span class="keyword">var</span> e=a.makeArray(arguments),f=a.isFunction(e[<span class="number">1</span>])?e.splice(<span class="number">0</span>,<span class="number">1</span>):e.splice(<span class="number">0</span>,<span class="number">2</span>),g=b(d.apply(<span class="keyword">this</span>,f),<span class="keyword">this</span>,c);<span class="keyword">return</span> g.then(e[<span class="number">0</span>],e[<span class="number">1</span>]),g}}}),a.each([<span class="string">"created"</span>,<span class="string">"updated"</span>,<span class="string">"destroyed"</span>],<span class="keyword">function</span>(b){a.Model.prototype[b]=<span class="keyword">function</span>(c){<span class="keyword">var</span> d,e=<span class="keyword">this</span>.constructor;d=c&amp;&amp;<span class="string">"object"</span>==<span class="keyword">typeof</span> c&amp;&amp;<span class="keyword">this</span>.attr(c.attr?c.attr():c),a.trigger(<span class="keyword">this</span>,<span class="string">"change"</span>,b),a.trigger(e,b,<span class="keyword">this</span>)}});<span class="keyword">var</span> i=a.Model.List=a.Observe.List({setup:<span class="keyword">function</span>(b){a.isPlainObject(b)&amp;&amp;!a.isArray(b)?(a.Observe.List.prototype.setup.apply(<span class="keyword">this</span>),<span class="keyword">this</span>.replace(<span class="keyword">this</span>.constructor.Observe.findAll(b))):a.Observe.List.prototype.setup.apply(<span class="keyword">this</span>,arguments)},_changes:<span class="keyword">function</span>(b,c){<span class="keyword">if</span>(a.Observe.List.prototype._changes.apply(<span class="keyword">this</span>,arguments),<span class="regexp">/\w+\.destroyed/</span>.test(c)){<span class="keyword">var</span> d=<span class="keyword">this</span>.indexOf(b.target);-<span class="number">1</span>!=d&amp;&amp;<span class="keyword">this</span>.splice(d,<span class="number">1</span>)}}});<span class="keyword">return</span> a.Model}(__m3,__m11),__m15=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=a.isFunction,c=a.makeArray,d=<span class="number">1</span>,e=a.view=a.template=<span class="keyword">function</span>(c,d,f,g){b(f)&amp;&amp;(g=f,f=<span class="literal">undefined</span>);<span class="keyword">var</span> h=<span class="keyword">function</span>(a){<span class="keyword">return</span> e.frag(a)},i=b(g)?<span class="keyword">function</span>(a){g(h(a))}:<span class="literal">null</span>,j=e.render(c,d,f,i),k=a.Deferred();<span class="keyword">return</span> b(j)?j:a.isDeferred(j)?(j.then(<span class="keyword">function</span>(a,b){k.resolve.call(k,h(a),b)},<span class="keyword">function</span>(){k.fail.apply(k,arguments)}),k):h(j)};a.extend(e,{frag:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> e.hookup(e.fragment(a),b)},fragment:<span class="keyword">function</span>(b){<span class="keyword">var</span> c=a.buildFragment(b,document.body);<span class="keyword">return</span> c.childNodes.length||c.appendChild(document.createTextNode(<span class="string">""</span>)),c},toId:<span class="keyword">function</span>(b){<span class="keyword">return</span> a.map(b.toString().split(<span class="regexp">/\/|\./g</span>),<span class="keyword">function</span>(a){<span class="keyword">return</span> a?a:<span class="keyword">void</span> <span class="number">0</span>}).join(<span class="string">"_"</span>)},hookup:<span class="keyword">function</span>(b,c){<span class="keyword">var</span> d,f,g=[];<span class="keyword">return</span> a.each(b.childNodes?a.makeArray(b.childNodes):b,<span class="keyword">function</span>(b){<span class="number">1</span>===b.nodeType&amp;&amp;(g.push(b),g.push.apply(g,a.makeArray(b.getElementsByTagName(<span class="string">"*"</span>))))}),a.each(g,<span class="keyword">function</span>(a){a.getAttribute&amp;&amp;(d=a.getAttribute(<span class="string">"data-view-id"</span>))&amp;&amp;(f=e.hookups[d])&amp;&amp;(f(a,c,d),<span class="keyword">delete</span> e.hookups[d],a.removeAttribute(<span class="string">"data-view-id"</span>))}),b},hookups:{},hook:<span class="keyword">function</span>(a){<span class="keyword">return</span> e.hookups[++d]=a,<span class="string">" data-view-id='"</span>+d+<span class="string">"'"</span>},cached:{},cachedRenderers:{},cache:!<span class="number">0</span>,register:<span class="keyword">function</span>(a){<span class="keyword">this</span>.types[<span class="string">"."</span>+a.suffix]=a},types:{},ext:<span class="string">".ejs"</span>,registerScript:<span class="keyword">function</span>(){},preload:<span class="keyword">function</span>(){},render:<span class="keyword">function</span>(d,f,j,k){b(j)&amp;&amp;(k=j,j=<span class="literal">undefined</span>);<span class="keyword">var</span> l=h(f);<span class="keyword">if</span>(l.length){<span class="keyword">var</span> m=<span class="keyword">new</span> a.Deferred,n=a.extend({},f);<span class="keyword">return</span> l.push(g(d,!<span class="number">0</span>)),a.when.apply(a,l).then(<span class="keyword">function</span>(b){<span class="keyword">var</span> d,e=c(arguments),g=e.pop();<span class="keyword">if</span>(a.isDeferred(f))n=i(b);<span class="keyword">else</span> <span class="keyword">for</span>(<span class="keyword">var</span> h <span class="keyword">in</span> f)a.isDeferred(f[h])&amp;&amp;(n[h]=i(e.shift()));d=g(n,j),m.resolve(d,n),k&amp;&amp;k(d,n)},<span class="keyword">function</span>(){m.reject.apply(m,arguments)}),m}<span class="keyword">var</span> o,p=b(k),m=g(d,p);<span class="keyword">if</span>(p)o=m,m.then(<span class="keyword">function</span>(a){k(f?a(f,j):a)});<span class="keyword">else</span>{<span class="keyword">if</span>(<span class="string">"resolved"</span>===m.state()&amp;&amp;m.__view_id){<span class="keyword">var</span> q=e.cachedRenderers[m.__view_id];<span class="keyword">return</span> f?q(f,j):q}m.then(<span class="keyword">function</span>(a){o=f?a(f,j):a})}<span class="keyword">return</span> o},registerView:<span class="keyword">function</span>(b,c,d,f){<span class="keyword">var</span> g=(d||e.types[e.ext]).renderer(b,c);<span class="keyword">return</span> f=f||<span class="keyword">new</span> a.Deferred,e.cache&amp;&amp;(e.cached[b]=f,f.__view_id=b,e.cachedRenderers[b]=g),f.resolve(g)}});<span class="keyword">var</span> f=<span class="keyword">function</span>(a,b){<span class="keyword">if</span>(!a.length)<span class="keyword">throw</span><span class="string">"can.view: No template or empty template:"</span>+b},g=<span class="keyword">function</span>(b,c){<span class="keyword">var</span> d,g,h,i=b.match(<span class="regexp">/\.[\w\d]+$/</span>);<span class="keyword">if</span>(b.match(<span class="regexp">/^#/</span>)&amp;&amp;(b=b.substr(<span class="number">1</span>)),(g=document.getElementById(b))&amp;&amp;(i=<span class="string">"."</span>+g.type.match(<span class="regexp">/\/(x\-)?(.+)/</span>)[<span class="number">2</span>]),i||e.cached[b]||(b+=i=e.ext),a.isArray(i)&amp;&amp;(i=i[<span class="number">0</span>]),h=e.toId(b),b.match(<span class="regexp">/^\/\//</span>)){<span class="keyword">var</span> j=b.substr(<span class="number">2</span>);b=window.steal?steal.config().root.mapJoin(<span class="string">""</span>+steal.id(j)):j}<span class="keyword">if</span>(d=e.types[i],e.cached[h])<span class="keyword">return</span> e.cached[h];<span class="keyword">if</span>(g)<span class="keyword">return</span> e.registerView(h,g.innerHTML,d);<span class="keyword">var</span> k=<span class="keyword">new</span> a.Deferred;<span class="keyword">return</span> a.ajax({async:c,url:b,dataType:<span class="string">"text"</span>,error:<span class="keyword">function</span>(a){f(<span class="string">""</span>,b),k.reject(a)},success:<span class="keyword">function</span>(a){f(a,b),e.registerView(h,a,d,k)}}),k},h=<span class="keyword">function</span>(b){<span class="keyword">var</span> c=[];<span class="keyword">if</span>(a.isDeferred(b))<span class="keyword">return</span>[b];<span class="keyword">for</span>(<span class="keyword">var</span> d <span class="keyword">in</span> b)a.isDeferred(b[d])&amp;&amp;c.push(b[d]);<span class="keyword">return</span> c},i=<span class="keyword">function</span>(b){<span class="keyword">return</span> a.isArray(b)&amp;&amp;<span class="string">"success"</span>===b[<span class="number">1</span>]?b[<span class="number">0</span>]:b};<span class="keyword">return</span> window.steal&amp;&amp;steal.type(<span class="string">"view js"</span>,<span class="keyword">function</span>(a,b){<span class="keyword">var</span> c=e.types[<span class="string">"."</span>+a.type],d=e.toId(a.id);a.text=<span class="string">"steal('"</span>+(c.plugin||<span class="string">"can/view/"</span>+a.type)+<span class="string">"',function(can){return "</span>+<span class="string">"can.view.preload('"</span>+d+<span class="string">"',"</span>+a.text+<span class="string">");\n})"</span>,b()}),a.extend(e,{register:<span class="keyword">function</span>(b){<span class="keyword">this</span>.types[<span class="string">"."</span>+b.suffix]=b,window.steal&amp;&amp;steal.type(b.suffix+<span class="string">" view js"</span>,<span class="keyword">function</span>(a,b){<span class="keyword">var</span> c=e.types[<span class="string">"."</span>+a.type],d=e.toId(a.id+<span class="string">""</span>);a.text=c.script(d,a.text),b()}),e[b.suffix]=<span class="keyword">function</span>(c,d){<span class="keyword">if</span>(!d){<span class="keyword">var</span> f=<span class="keyword">function</span>(){<span class="keyword">return</span> e.frag(f.render.apply(<span class="keyword">this</span>,arguments))};<span class="keyword">return</span> f.render=<span class="keyword">function</span>(){<span class="keyword">var</span> a=b.renderer(<span class="literal">null</span>,c);<span class="keyword">return</span> a.apply(a,arguments)},f}<span class="keyword">return</span> e.preload(c,b.renderer(c,d)),a.view(c)}},registerScript:<span class="keyword">function</span>(a,b,c){<span class="keyword">return</span><span class="string">"can.view.preload('"</span>+b+<span class="string">"',"</span>+e.types[<span class="string">"."</span>+a].script(b,c)+<span class="string">");"</span>},preload:<span class="keyword">function</span>(b,c){<span class="function"><span class="keyword">function</span> <span class="title">d</span><span class="params">()</span>{</span><span class="keyword">return</span> e.frag(c.apply(<span class="keyword">this</span>,arguments))}<span class="keyword">return</span> e.cached[b]=(<span class="keyword">new</span> a.Deferred).resolve(<span class="keyword">function</span>(a,b){<span class="keyword">return</span> c.call(a,a,b)}),d.render=c,d}}),a}(__m3),__m18=<span class="keyword">function</span>(){<span class="keyword">var</span> a={tagToContentPropMap:{option:<span class="string">"textContent"</span><span class="keyword">in</span> document.createElement(<span class="string">"option"</span>)?<span class="string">"textContent"</span>:<span class="string">"innerText"</span>,textarea:<span class="string">"value"</span>},attrMap:{<span class="string">"class"</span>:<span class="string">"className"</span>,value:<span class="string">"value"</span>,innerText:<span class="string">"innerText"</span>,textContent:<span class="string">"textContent"</span>,checked:!<span class="number">0</span>,disabled:!<span class="number">0</span>,readonly:!<span class="number">0</span>,required:!<span class="number">0</span>},defaultValue:[<span class="string">"input"</span>,<span class="string">"textarea"</span>],tagMap:{<span class="string">""</span>:<span class="string">"span"</span>,table:<span class="string">"tbody"</span>,tr:<span class="string">"td"</span>,ol:<span class="string">"li"</span>,ul:<span class="string">"li"</span>,tbody:<span class="string">"tr"</span>,thead:<span class="string">"tr"</span>,tfoot:<span class="string">"tr"</span>,select:<span class="string">"option"</span>,optgroup:<span class="string">"option"</span>},reverseTagMap:{tr:<span class="string">"tbody"</span>,option:<span class="string">"select"</span>,td:<span class="string">"tr"</span>,th:<span class="string">"tr"</span>,li:<span class="string">"ul"</span>},getParentNode:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> b&amp;&amp;<span class="number">11</span>===a.parentNode.nodeType?b:a.parentNode},setAttr:<span class="keyword">function</span>(b,c,d){<span class="keyword">var</span> e=b.nodeName.toString().toLowerCase(),f=a.attrMap[c];f===!<span class="number">0</span>?b[c]=!<span class="number">0</span>:f?(b[f]=d,<span class="string">"value"</span>===f&amp;&amp;can.inArray(e,a.defaultValue)&gt;=<span class="number">0</span>&amp;&amp;(b.defaultValue=d)):b.setAttribute(c,d)},getAttr:<span class="keyword">function</span>(b,c){<span class="keyword">return</span>(a.attrMap[c]&amp;&amp;b[a.attrMap[c]]?b[a.attrMap[c]]:b.getAttribute(c))||<span class="string">""</span>},removeAttr:<span class="keyword">function</span>(b,c){a.attrMap[c]===!<span class="number">0</span>?b[c]=!<span class="number">1</span>:b.removeAttribute(c)},contentText:<span class="keyword">function</span>(a){<span class="keyword">return</span><span class="string">"string"</span>==<span class="keyword">typeof</span> a?a:a||<span class="number">0</span>===a?<span class="string">""</span>+a:<span class="string">""</span>}};<span class="keyword">return</span> a}(),__m17=<span class="keyword">function</span>(can,elements){<span class="keyword">var</span> newLine=<span class="regexp">/(\r|\n)+/g</span>,clean=<span class="keyword">function</span>(a){<span class="keyword">return</span> a.split(<span class="string">"\\"</span>).join(<span class="string">"\\\\"</span>).split(<span class="string">"\n"</span>).join(<span class="string">"\\n"</span>).split(<span class="string">'"'</span>).join(<span class="string">'\\"'</span>).split(<span class="string">"	"</span>).join(<span class="string">"\\t"</span>)},getTag=<span class="keyword">function</span>(a,b,c){<span class="keyword">if</span>(a)<span class="keyword">return</span> a;<span class="keyword">for</span>(;c&lt;b.length;){<span class="keyword">if</span>(<span class="string">"&lt;"</span>==b[c]&amp;&amp;elements.reverseTagMap[b[c+<span class="number">1</span>]])<span class="keyword">return</span> elements.reverseTagMap[b[c+<span class="number">1</span>]];c++}<span class="keyword">return</span><span class="string">""</span>},bracketNum=<span class="keyword">function</span>(a){<span class="keyword">return</span>--a.split(<span class="string">"{"</span>).length- --a.split(<span class="string">"}"</span>).length},myEval=<span class="keyword">function</span>(script){eval(script)},attrReg=<span class="regexp">/([^\s]+)[\s]*=[\s]*$/</span>,startTxt=<span class="string">"var ___v1ew = [];"</span>,finishTxt=<span class="string">"return ___v1ew.join('')"</span>,put_cmd=<span class="string">"___v1ew.push("</span>,insert_cmd=put_cmd,htmlTag=<span class="literal">null</span>,quote=<span class="literal">null</span>,beforeQuote=<span class="literal">null</span>,rescan=<span class="literal">null</span>,status=<span class="keyword">function</span>(){<span class="keyword">return</span> quote?<span class="string">"'"</span>+beforeQuote.match(attrReg)[<span class="number">1</span>]+<span class="string">"'"</span>:htmlTag?<span class="number">1</span>:<span class="number">0</span>};<span class="keyword">return</span> can.view.Scanner=Scanner=<span class="keyword">function</span>(a){can.extend(<span class="keyword">this</span>,{text:{},tokens:[]},a),<span class="keyword">this</span>.tokenReg=[],<span class="keyword">this</span>.tokenSimple={<span class="string">"&lt;"</span>:<span class="string">"&lt;"</span>,<span class="string">"&gt;"</span>:<span class="string">"&gt;"</span>,<span class="string">'"'</span>:<span class="string">'"'</span>,<span class="string">"'"</span>:<span class="string">"'"</span>},<span class="keyword">this</span>.tokenComplex=[],<span class="keyword">this</span>.tokenMap={};<span class="keyword">for</span>(<span class="keyword">var</span> b,c=<span class="number">0</span>;b=<span class="keyword">this</span>.tokens[c];c++)b[<span class="number">2</span>]?(<span class="keyword">this</span>.tokenReg.push(b[<span class="number">2</span>]),<span class="keyword">this</span>.tokenComplex.push({abbr:b[<span class="number">1</span>],re:<span class="keyword">new</span> RegExp(b[<span class="number">2</span>]),rescan:b[<span class="number">3</span>]})):(<span class="keyword">this</span>.tokenReg.push(b[<span class="number">1</span>]),<span class="keyword">this</span>.tokenSimple[b[<span class="number">1</span>]]=b[<span class="number">0</span>]),<span class="keyword">this</span>.tokenMap[b[<span class="number">0</span>]]=b[<span class="number">1</span>];<span class="keyword">this</span>.tokenReg=<span class="keyword">new</span> RegExp(<span class="string">"("</span>+<span class="keyword">this</span>.tokenReg.slice(<span class="number">0</span>).concat([<span class="string">"&lt;"</span>,<span class="string">"&gt;"</span>,<span class="string">'"'</span>,<span class="string">"'"</span>]).join(<span class="string">"|"</span>)+<span class="string">")"</span>,<span class="string">"g"</span>)},Scanner.prototype={helpers:[{name:<span class="regexp">/\s*\(([\$\w]+)\)\s*-&gt;([^\n]*)/</span>,fn:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="regexp">/\s*\(([\$\w]+)\)\s*-&gt;([^\n]*)/</span>,c=a.match(b);<span class="keyword">return</span><span class="string">"can.proxy(function(__){var "</span>+c[<span class="number">1</span>]+<span class="string">"=can.$(__);"</span>+c[<span class="number">2</span>]+<span class="string">"}, this);"</span>}}],scan:<span class="keyword">function</span>(a,b){<span class="keyword">var</span> c=[],d=<span class="number">0</span>,e=<span class="keyword">this</span>.tokenSimple,f=<span class="keyword">this</span>.tokenComplex;a=a.replace(newLine,<span class="string">"\n"</span>),<span class="keyword">this</span>.transform&amp;&amp;(a=<span class="keyword">this</span>.transform(a)),a.replace(<span class="keyword">this</span>.tokenReg,<span class="keyword">function</span>(b,g){<span class="keyword">var</span> h=arguments[arguments.length-<span class="number">2</span>];<span class="keyword">if</span>(h&gt;d&amp;&amp;c.push(a.substring(d,h)),e[b])c.push(b);<span class="keyword">else</span> <span class="keyword">for</span>(<span class="keyword">var</span> i,j=<span class="number">0</span>;i=f[j];j++)<span class="keyword">if</span>(i.re.test(b)){c.push(i.abbr),i.rescan&amp;&amp;c.push(i.rescan(g));<span class="keyword">break</span>}d=h+g.length}),d&lt;a.length&amp;&amp;c.push(a.substr(d));<span class="keyword">var</span> g,h,i,j=<span class="string">""</span>,k=[startTxt+(<span class="keyword">this</span>.text.start||<span class="string">""</span>)],l=<span class="keyword">function</span>(a,b){k.push(put_cmd,<span class="string">'"'</span>,clean(a),<span class="string">'"'</span>+(b||<span class="string">""</span>)+<span class="string">");"</span>)},m=[],n=<span class="literal">null</span>,o=!<span class="number">1</span>,p=<span class="string">""</span>,q=[],r=!<span class="number">1</span>,s=<span class="number">0</span>,t=<span class="keyword">this</span>.tokenMap;<span class="keyword">for</span>(htmlTag=quote=beforeQuote=<span class="literal">null</span>;(i=c[s++])!==<span class="literal">undefined</span>;){<span class="keyword">if</span>(<span class="literal">null</span>===n)<span class="keyword">switch</span>(i){<span class="keyword">case</span> t.left:<span class="keyword">case</span> t.escapeLeft:<span class="keyword">case</span> t.returnLeft:o=htmlTag&amp;&amp;<span class="number">1</span>;<span class="keyword">case</span> t.commentLeft:n=i,j.length&amp;&amp;l(j),j=<span class="string">""</span>;<span class="keyword">break</span>;<span class="keyword">case</span> t.escapeFull:o=htmlTag&amp;&amp;<span class="number">1</span>,rescan=<span class="number">1</span>,n=t.escapeLeft,j.length&amp;&amp;l(j),rescan=c[s++],j=rescan.content||rescan,rescan.before&amp;&amp;l(rescan.before),c.splice(s,<span class="number">0</span>,t.right);<span class="keyword">break</span>;<span class="keyword">case</span> t.commentFull:<span class="keyword">break</span>;<span class="keyword">case</span> t.templateLeft:j+=t.left;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">"&lt;"</span>:<span class="number">0</span>!==c[s].indexOf(<span class="string">"!--"</span>)&amp;&amp;(htmlTag=<span class="number">1</span>,o=<span class="number">0</span>),j+=i;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">"&gt;"</span>:htmlTag=<span class="number">0</span>;<span class="keyword">var</span> u=<span class="string">"/"</span>==j.substr(j.length-<span class="number">1</span>)||<span class="string">"--"</span>==j.substr(j.length-<span class="number">2</span>);o||!r&amp;&amp;elements.tagToContentPropMap[q[q.length-<span class="number">1</span>]]?(u?l(j.substr(<span class="number">0</span>,j.length-<span class="number">1</span>),<span class="string">',can.view.pending(),"/&gt;"'</span>):l(j,<span class="string">',can.view.pending(),"&gt;"'</span>),j=<span class="string">""</span>,o=<span class="number">0</span>):j+=i,(u||r)&amp;&amp;(q.pop(),p=q[q.length-<span class="number">1</span>],r=!<span class="number">1</span>);<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">"'"</span>:<span class="keyword">case</span><span class="string">'"'</span>:htmlTag&amp;&amp;(quote&amp;&amp;quote===i?quote=<span class="literal">null</span>:<span class="literal">null</span>===quote&amp;&amp;(quote=i,beforeQuote=g));<span class="keyword">default</span>:<span class="string">"&lt;"</span>===g&amp;&amp;(p=i.split(<span class="regexp">/\s/</span>)[<span class="number">0</span>],<span class="number">0</span>===p.indexOf(<span class="string">"/"</span>)&amp;&amp;q[q.length-<span class="number">1</span>]===p.substr(<span class="number">1</span>)?(p=q[q.length-<span class="number">1</span>],r=!<span class="number">0</span>):q.push(p)),j+=i}<span class="keyword">else</span> <span class="keyword">switch</span>(i){<span class="keyword">case</span> t.right:<span class="keyword">case</span> t.returnRight:<span class="keyword">switch</span>(n){<span class="keyword">case</span> t.left:h=bracketNum(j),<span class="number">1</span>==h?(k.push(insert_cmd,<span class="string">"can.view.txt(0,'"</span>+getTag(p,c,s)+<span class="string">"',"</span>+status()+<span class="string">",this,function(){"</span>,startTxt,j),m.push({before:<span class="string">""</span>,after:finishTxt+<span class="string">"}));\n"</span>})):(d=m.length&amp;&amp;-<span class="number">1</span>==h?m.pop():{after:<span class="string">";"</span>},d.before&amp;&amp;k.push(d.before),k.push(j,<span class="string">";"</span>,d.after));
<span class="keyword">break</span>;<span class="keyword">case</span> t.escapeLeft:<span class="keyword">case</span> t.returnLeft:h=bracketNum(j),h&amp;&amp;m.push({before:finishTxt,after:<span class="string">"}));"</span>});<span class="keyword">for</span>(<span class="keyword">var</span> v=n===t.escapeLeft?<span class="number">1</span>:<span class="number">0</span>,w={insert:insert_cmd,tagName:getTag(p,c,s),status:status()},x=<span class="number">0</span>;x&lt;<span class="keyword">this</span>.helpers.length;x++){<span class="keyword">var</span> y=<span class="keyword">this</span>.helpers[x];<span class="keyword">if</span>(y.name.test(j)){j=y.fn(j,w),y.name.source==<span class="regexp">/^&gt;[\s]*\w*/</span>.source&amp;&amp;(v=<span class="number">0</span>);<span class="keyword">break</span>}}<span class="string">"object"</span>==<span class="keyword">typeof</span> j?j.raw&amp;&amp;k.push(j.raw):k.push(insert_cmd,<span class="string">"can.view.txt("</span>+v+<span class="string">",'"</span>+p+<span class="string">"',"</span>+status()+<span class="string">",this,function(){ "</span>+(<span class="keyword">this</span>.text.escape||<span class="string">""</span>)+<span class="string">"return "</span>,j,h?startTxt:<span class="string">"}));"</span>),rescan&amp;&amp;rescan.after&amp;&amp;rescan.after.length&amp;&amp;(l(rescan.after.length),rescan=<span class="literal">null</span>)}n=<span class="literal">null</span>,j=<span class="string">""</span>;<span class="keyword">break</span>;<span class="keyword">case</span> t.templateLeft:j+=t.left;<span class="keyword">break</span>;<span class="keyword">default</span>:j+=i}g=i}j.length&amp;&amp;l(j),k.push(<span class="string">";"</span>);<span class="keyword">var</span> z=k.join(<span class="string">""</span>),A={out:<span class="string">"with(_VIEW) { with (_CONTEXT) {"</span>+z+<span class="string">" "</span>+finishTxt+<span class="string">"}}"</span>};<span class="keyword">return</span> myEval.call(A,<span class="string">"this.fn = (function(_CONTEXT,_VIEW){"</span>+A.out+<span class="string">"});\r\n//@ sourceURL="</span>+b+<span class="string">".js"</span>),A}},Scanner}(__m15,__m18),__m21=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=!<span class="number">0</span>;<span class="keyword">try</span>{document.createTextNode(<span class="string">""</span>)._=<span class="number">0</span>}<span class="keyword">catch</span>(c){b=!<span class="number">1</span>}<span class="keyword">var</span> d={},e={},f={},g=<span class="string">"ejs_"</span>+Math.random(),h=<span class="number">0</span>,i=<span class="keyword">function</span>(a){<span class="keyword">if</span>(b||<span class="number">3</span>!==a.nodeType)<span class="keyword">return</span> a[g]?a[g]:a[g]=(a.nodeName?<span class="string">"element_"</span>:<span class="string">"obj_"</span>)+ ++h;<span class="keyword">for</span>(<span class="keyword">var</span> c <span class="keyword">in</span> e)<span class="keyword">if</span>(e[c]===a)<span class="keyword">return</span> c;<span class="keyword">return</span> e[<span class="string">"text_"</span>+ ++h]=a,<span class="string">"text_"</span>+h},j=<span class="keyword">function</span>(b,c){<span class="keyword">var</span> e=d[i(b)];<span class="keyword">if</span>(e){<span class="keyword">var</span> f=a.inArray(c,e);f&gt;=<span class="number">0</span>&amp;&amp;e.splice(f,<span class="number">1</span>),e.length||<span class="keyword">delete</span> d[i(b)]}},k=<span class="keyword">function</span>(a,b){<span class="keyword">var</span> c=d[i(a)];c||(c=d[i(a)]=[]),c.push(b)},l={id:i,replace:<span class="keyword">function</span>(b,c){b=a.makeArray(b);<span class="keyword">var</span> e=b[<span class="number">0</span>];a.each(a.makeArray(d[i(e)]),<span class="keyword">function</span>(d){<span class="keyword">var</span> g=f[d],h=a.inArray(e,g),i=a.inArray(b[b.length-<span class="number">1</span>],g);<span class="keyword">if</span>(h&gt;=<span class="number">0</span>&amp;&amp;i&gt;=<span class="number">0</span>){<span class="keyword">for</span>(<span class="keyword">var</span> m=h;i&gt;=m;m++){<span class="keyword">var</span> n=g[m];j(n,d)}g.splice.apply(g,[h,i-h+<span class="number">1</span>].concat(c)),a.each(c,<span class="keyword">function</span>(a){k(a,d)})}<span class="keyword">else</span> l.unregister(g)})},register:<span class="keyword">function</span>(b){<span class="keyword">var</span> c=i(b);f[c]=b,a.each(b,<span class="keyword">function</span>(a){k(a,c)})},unregister:<span class="keyword">function</span>(b){<span class="keyword">var</span> c=i(b);a.each(b,<span class="keyword">function</span>(a){j(a,c)}),<span class="keyword">delete</span> f[c]},nodeMap:d,nodeListMap:f};<span class="keyword">return</span> l}(__m3),__m20=<span class="keyword">function</span>(a,b,c,d){<span class="keyword">var</span> e=<span class="keyword">function</span>(b,c,d){<span class="keyword">var</span> e=<span class="keyword">function</span>(){d(f),a.unbind.call(b,<span class="string">"destroyed"</span>,e)},f={teardownCheck:<span class="keyword">function</span>(a){a||e()}};<span class="keyword">return</span> a.bind.call(b,<span class="string">"destroyed"</span>,e),c(f),f},f=<span class="keyword">function</span>(a,b,c){<span class="keyword">return</span> e(a,<span class="keyword">function</span>(){b.bind(<span class="string">"change"</span>,c)},<span class="keyword">function</span>(a){b.unbind(<span class="string">"change"</span>,c),a.nodeList&amp;&amp;d.unregister(a.nodeList)})},g=<span class="keyword">function</span>(a){<span class="keyword">return</span>(a||<span class="string">""</span>).replace(<span class="regexp">/['"]/g</span>,<span class="string">""</span>).split(<span class="string">"="</span>)};insertElementsAfter=<span class="keyword">function</span>(a,b){<span class="keyword">var</span> c=a[a.length-<span class="number">1</span>];c.nextSibling?c.parentNode.insertBefore(b,c.nextSibling):c.parentNode.appendChild(b)};<span class="keyword">var</span> h={nodeLists:d,list:<span class="keyword">function</span>(c,f,g,h,i){<span class="keyword">var</span> j=[],k=<span class="keyword">function</span>(b,c,e){<span class="keyword">var</span> f=document.createDocumentFragment(),k=[];<span class="keyword">if</span>(a.each(c,<span class="keyword">function</span>(b){<span class="keyword">var</span> c=g.call(h,b),d=a.view.frag(c,i);k.push(a.makeArray(d.childNodes)),f.appendChild(d)}),j[e]){<span class="keyword">var</span> l=j[e][<span class="number">0</span>];l.parentNode.insertBefore(f,l)}<span class="keyword">else</span> insertElementsAfter(<span class="number">0</span>==e?[m]:j[e-<span class="number">1</span>],f);a.each(k,<span class="keyword">function</span>(a){d.register(a)}),[].splice.apply(j,[e,<span class="number">0</span>].concat(k))},l=<span class="keyword">function</span>(b,c,e){<span class="keyword">var</span> f=j.splice(e,c.length),g=[];a.each(f,<span class="keyword">function</span>(a){[].push.apply(g,a),d.replace(a,[]),d.unregister(a)}),a.remove(a.$(g))},i=b.getParentNode(c,i),m=document.createTextNode(<span class="string">""</span>);e(i,<span class="keyword">function</span>(){f.bind(<span class="string">"add"</span>,k).bind(<span class="string">"remove"</span>,l)},<span class="keyword">function</span>(){f.unbind(<span class="string">"add"</span>,k).unbind(<span class="string">"remove"</span>,l),a.each(j,<span class="keyword">function</span>(a){d.unregister(a)})}),insertElementsAfter([c],m),a.remove(a.$(c)),k({},f,<span class="number">0</span>)},html:<span class="keyword">function</span>(c,e,g){<span class="keyword">var</span> h,g=b.getParentNode(c,g),i=f(g,e,<span class="keyword">function</span>(a,b){<span class="keyword">var</span> c=h[<span class="number">0</span>].parentNode;c&amp;&amp;j(b),i.teardownCheck(h[<span class="number">0</span>].parentNode)}),j=<span class="keyword">function</span>(b){<span class="keyword">var</span> e=a.view.frag(b,g),f=a.makeArray(e.childNodes);<span class="keyword">if</span>(insertElementsAfter(h||[c],e),h){<span class="keyword">var</span> j=a.makeArray(h);d.replace(h,f),a.remove(a.$(j))}<span class="keyword">else</span> a.remove(a.$(c)),h=f,i.nodeList=h,d.register(h)};j(e(),[c])},text:<span class="keyword">function</span>(a,c,d){<span class="keyword">var</span> e=b.getParentNode(a,d),g=f(a.parentNode!==e?a.parentNode:e,c,<span class="keyword">function</span>(a,b){<span class="string">"unknown"</span>!=<span class="keyword">typeof</span> h.nodeValue&amp;&amp;(h.nodeValue=<span class="string">""</span>+b),g.teardownCheck(h.parentNode)}),h=document.createTextNode(c());a.parentNode!==e?(e=a.parentNode,e.insertBefore(h,a),e.removeChild(a)):(e.insertBefore(h,a),e.removeChild(a))},attributes:<span class="keyword">function</span>(a,c,d){<span class="keyword">var</span> e=<span class="keyword">function</span>(c){<span class="keyword">var</span> d=g(c),e=d.shift();e!=h&amp;&amp;h&amp;&amp;b.removeAttr(a,h),e&amp;&amp;(b.setAttr(a,e,d.join(<span class="string">"="</span>)),h=e)};<span class="keyword">if</span>(f(a,c,<span class="keyword">function</span>(a,b){e(b)}),arguments.length&gt;=<span class="number">3</span>)<span class="keyword">var</span> h=g(d)[<span class="number">0</span>];<span class="keyword">else</span> e(c())},attributePlaceholder:<span class="string">"__!!__"</span>,attributeReplace:<span class="regexp">/__!!__/g</span>,attribute:<span class="keyword">function</span>(c,d,e){f(c,e,<span class="keyword">function</span>(){b.setAttr(c,d,j.render())});<span class="keyword">var</span> g,i=a.$(c);g=a.data(i,<span class="string">"hooks"</span>),g||a.data(i,<span class="string">"hooks"</span>,g={});<span class="keyword">var</span> j,k=b.getAttr(c,d),l=k.split(h.attributePlaceholder),m=[];m.push(l.shift(),l.join(h.attributePlaceholder)),g[d]?g[d].computes.push(e):g[d]={render:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="number">0</span>,c=k?k.replace(h.attributeReplace,<span class="keyword">function</span>(){<span class="keyword">return</span> b.contentText(j.computes[a++]())}):b.contentText(j.computes[a++]());<span class="keyword">return</span> c},computes:[e],batchNum:<span class="literal">undefined</span>},j=g[d],m.splice(<span class="number">1</span>,<span class="number">0</span>,e()),b.setAttr(c,d,m.join(<span class="string">""</span>))}};<span class="keyword">return</span> h}(__m3,__m18,__m15,__m21),__m19=<span class="keyword">function</span>(a,b,c){<span class="keyword">var</span> d=[],e=<span class="keyword">function</span>(a){<span class="keyword">var</span> c=b.tagMap[a]||<span class="string">"span"</span>;<span class="keyword">return</span><span class="string">"span"</span>===c?<span class="string">"@@!!@@"</span>:<span class="string">"&lt;"</span>+c+<span class="string">"&gt;"</span>+e(c)+<span class="string">"&lt;/"</span>+c+<span class="string">"&gt;"</span>},f=<span class="keyword">function</span>(b,c){<span class="keyword">if</span>(<span class="string">"string"</span>==<span class="keyword">typeof</span> b)<span class="keyword">return</span> b;<span class="keyword">if</span>(!b&amp;&amp;<span class="number">0</span>!==b)<span class="keyword">return</span><span class="string">""</span>;<span class="keyword">var</span> e=b.hookup&amp;&amp;<span class="keyword">function</span>(a,c){b.hookup.call(b,a,c)}||<span class="string">"function"</span>==<span class="keyword">typeof</span> b&amp;&amp;b;<span class="keyword">return</span> e?c?<span class="string">"&lt;"</span>+c+<span class="string">" "</span>+a.view.hook(e)+<span class="string">"&gt;&lt;/"</span>+c+<span class="string">"&gt;"</span>:(d.push(e),<span class="string">""</span>):<span class="string">""</span>+b},g=<span class="keyword">function</span>(b){<span class="keyword">return</span><span class="string">"string"</span>==<span class="keyword">typeof</span> b||<span class="string">"number"</span>==<span class="keyword">typeof</span> b?a.esc(b):f(b)};<span class="keyword">return</span> a.extend(a.view,{live:c,setupLists:<span class="keyword">function</span>(){<span class="keyword">var</span> b,c=a.view.lists;<span class="keyword">return</span> a.view.lists=<span class="keyword">function</span>(a,c){b={list:a,renderer:c}},<span class="keyword">function</span>(){<span class="keyword">return</span> a.view.lists=c,b}},pending:<span class="keyword">function</span>(){<span class="keyword">var</span> b=d.slice(<span class="number">0</span>);<span class="keyword">return</span> lastHookups=b,d=[],a.view.hook(<span class="keyword">function</span>(c){a.each(b,<span class="keyword">function</span>(a){a(c)})})},txt:<span class="keyword">function</span>(h,i,j,k,l){<span class="keyword">var</span> m=a.view.setupLists(),n=<span class="keyword">function</span>(){},o=<span class="keyword">function</span>(){p.unbind(<span class="string">"change"</span>,n)},p=a.compute(l,k,!<span class="number">1</span>);p.bind(<span class="string">"change"</span>,n);<span class="keyword">var</span> q=b.tagMap[i]||<span class="string">"span"</span>,r=m(),s=p();<span class="keyword">if</span>(r)<span class="keyword">return</span><span class="string">"&lt;"</span>+q+a.view.hook(<span class="keyword">function</span>(a,b){c.list(a,r.list,r.renderer,k,b)})+<span class="string">"&gt;&lt;/"</span>+q+<span class="string">"&gt;"</span>;<span class="keyword">if</span>(!p.hasDependencies)<span class="keyword">return</span> o(),(h||<span class="number">0</span>!==j?g:f)(s,<span class="number">0</span>===j&amp;&amp;q);<span class="keyword">var</span> t=b.tagToContentPropMap[i];<span class="keyword">if</span>(<span class="number">0</span>!==j||t){<span class="keyword">if</span>(<span class="number">1</span>===j)<span class="keyword">return</span> d.push(<span class="keyword">function</span>(a){c.attributes(a,p,p()),o()}),p();<span class="keyword">var</span> u=<span class="number">0</span>===j?t:j;<span class="keyword">return</span>(<span class="number">0</span>===j?lastHookups:d).push(<span class="keyword">function</span>(a){c.attribute(a,u,p),o()}),c.attributePlaceholder}<span class="keyword">return</span><span class="string">"&lt;"</span>+q+a.view.hook(h?<span class="keyword">function</span>(a,b){c.text(a,p,b),o()}:<span class="keyword">function</span>(a,b){c.html(a,p,b),o()})+<span class="string">"&gt;"</span>+e(q)+<span class="string">"&lt;/"</span>+q+<span class="string">"&gt;"</span>}}),a}(__m15,__m18,__m20,__m2),__m16=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=a.extend,c=<span class="keyword">function</span>(a){<span class="keyword">if</span>(<span class="keyword">this</span>.constructor!=c){<span class="keyword">var</span> d=<span class="keyword">new</span> c(a);<span class="keyword">return</span> <span class="keyword">function</span>(a,b){<span class="keyword">return</span> d.render(a,b)}}<span class="keyword">return</span><span class="string">"function"</span>==<span class="keyword">typeof</span> a?(<span class="keyword">this</span>.template={fn:a},<span class="keyword">void</span> <span class="number">0</span>):(b(<span class="keyword">this</span>,a),<span class="keyword">this</span>.template=<span class="keyword">this</span>.scanner.scan(<span class="keyword">this</span>.text,<span class="keyword">this</span>.name),<span class="keyword">void</span> <span class="number">0</span>)};<span class="keyword">return</span> a.EJS=c,c.prototype.render=<span class="keyword">function</span>(a,b){<span class="keyword">return</span> a=a||{},<span class="keyword">this</span>.template.fn.call(a,a,<span class="keyword">new</span> c.Helpers(a,b||{}))},b(c.prototype,{scanner:<span class="keyword">new</span> a.view.Scanner({tokens:[[<span class="string">"templateLeft"</span>,<span class="string">"&lt;%%"</span>],[<span class="string">"templateRight"</span>,<span class="string">"%&gt;"</span>],[<span class="string">"returnLeft"</span>,<span class="string">"&lt;%=="</span>],[<span class="string">"escapeLeft"</span>,<span class="string">"&lt;%="</span>],[<span class="string">"commentLeft"</span>,<span class="string">"&lt;%#"</span>],[<span class="string">"left"</span>,<span class="string">"&lt;%"</span>],[<span class="string">"right"</span>,<span class="string">"%&gt;"</span>],[<span class="string">"returnRight"</span>,<span class="string">"%&gt;"</span>]],transform:<span class="keyword">function</span>(a){<span class="keyword">return</span> a.replace(<span class="regexp">/&lt;%([\s\S]+?)%&gt;/gm</span>,<span class="keyword">function</span>(a,b){<span class="keyword">var</span> c,d,e=[];b.replace(<span class="regexp">/[{}]/gm</span>,<span class="keyword">function</span>(a,b){e.push([a,b])});<span class="keyword">do</span> <span class="keyword">for</span>(c=!<span class="number">1</span>,d=e.length-<span class="number">2</span>;d&gt;=<span class="number">0</span>;d--)<span class="keyword">if</span>(<span class="string">"{"</span>==e[d][<span class="number">0</span>]&amp;&amp;<span class="string">"}"</span>==e[d+<span class="number">1</span>][<span class="number">0</span>]){e.splice(d,<span class="number">2</span>),c=!<span class="number">0</span>;<span class="keyword">break</span>}<span class="keyword">while</span>(c);<span class="keyword">if</span>(e.length&gt;=<span class="number">2</span>){<span class="keyword">var</span> f,g=[<span class="string">"&lt;%"</span>],h=<span class="number">0</span>;<span class="keyword">for</span>(d=<span class="number">0</span>;f=e[d];d++)g.push(b.substring(h,h=f[<span class="number">1</span>])),<span class="string">"{"</span>==f[<span class="number">0</span>]&amp;&amp;d&lt;e.length-<span class="number">1</span>||<span class="string">"}"</span>==f[<span class="number">0</span>]&amp;&amp;d&gt;<span class="number">0</span>?g.push(<span class="string">"{"</span>==f[<span class="number">0</span>]?<span class="string">"{ %&gt;&lt;% "</span>:<span class="string">" %&gt;&lt;% }"</span>):g.push(f[<span class="number">0</span>]),++h;<span class="keyword">return</span> g.push(b.substring(h),<span class="string">"%&gt;"</span>),g.join(<span class="string">""</span>)}<span class="keyword">return</span><span class="string">"&lt;%"</span>+b+<span class="string">"%&gt;"</span>})}})}),c.Helpers=<span class="keyword">function</span>(a,c){<span class="keyword">this</span>._data=a,<span class="keyword">this</span>._extras=c,b(<span class="keyword">this</span>,c)},c.Helpers.prototype={list:<span class="keyword">function</span>(b,c){a.each(b,<span class="keyword">function</span>(a,d){c(a,d,b)})},each:<span class="keyword">function</span>(b,c){a.isArray(b)?<span class="keyword">this</span>.list(b,c):a.view.lists(b,c)}},a.view.register({suffix:<span class="string">"ejs"</span>,script:<span class="keyword">function</span>(a,b){<span class="keyword">return</span><span class="string">"can.EJS(function(_CONTEXT,_VIEW) { "</span>+<span class="keyword">new</span> c({text:b,name:a}).template.out+<span class="string">" })"</span>},renderer:<span class="keyword">function</span>(a,b){<span class="keyword">return</span> c({text:b,name:a})}}),a}(__m3,__m15,__m2,__m13,__m17,__m19),__m22=<span class="keyword">function</span>(a){<span class="keyword">var</span> b,c=<span class="keyword">function</span>(b,c,d){<span class="keyword">return</span> a.bind.call(b,c,d),<span class="keyword">function</span>(){a.unbind.call(b,c,d)}},d=a.isFunction,e=a.extend,f=a.each,g=[].slice,h=<span class="regexp">/\{([^\}]+)\}/g</span>,i=a.getObject(<span class="string">"$.event.special"</span>,[a])||{},j=<span class="keyword">function</span>(b,c,d,e){<span class="keyword">return</span> a.delegate.call(b,c,d,e),<span class="keyword">function</span>(){a.undelegate.call(b,c,d,e)}},k=<span class="keyword">function</span>(b,d,e,f){<span class="keyword">return</span> f?j(b,a.trim(f),d,e):c(b,d,e)},l=a.Control=a.Construct({setup:<span class="keyword">function</span>(){<span class="keyword">if</span>(a.Construct.setup.apply(<span class="keyword">this</span>,arguments),a.Control){<span class="keyword">var</span> b,c=<span class="keyword">this</span>;c.actions={};<span class="keyword">for</span>(b <span class="keyword">in</span> c.prototype)c._isAction(b)&amp;&amp;(c.actions[b]=c._action(b))}},_shifter:<span class="keyword">function</span>(b,c){<span class="keyword">var</span> e=<span class="string">"string"</span>==<span class="keyword">typeof</span> c?b[c]:c;<span class="keyword">return</span> d(e)||(e=b[e]),<span class="keyword">function</span>(){<span class="keyword">return</span> b.called=c,e.apply(b,[<span class="keyword">this</span>.nodeName?a.$(<span class="keyword">this</span>):<span class="keyword">this</span>].concat(g.call(arguments,<span class="number">0</span>)))}},_isAction:<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="keyword">this</span>.prototype[a],c=<span class="keyword">typeof</span> b;<span class="keyword">return</span><span class="string">"constructor"</span>!==a&amp;&amp;(<span class="string">"function"</span>==c||<span class="string">"string"</span>==c&amp;&amp;d(<span class="keyword">this</span>.prototype[b]))&amp;&amp;!!(i[a]||m[a]||<span class="regexp">/[^\w]/</span>.test(a))},_action:<span class="keyword">function</span>(c,d){<span class="keyword">if</span>(h.lastIndex=<span class="number">0</span>,d||!h.test(c)){<span class="keyword">var</span> e=d?a.sub(c,[d,window]):c;<span class="keyword">if</span>(!e)<span class="keyword">return</span> <span class="literal">null</span>;<span class="keyword">var</span> f=a.isArray(e),g=f?e[<span class="number">1</span>]:e,i=g.split(<span class="regexp">/\s+/g</span>),j=i.pop();<span class="keyword">return</span>{processor:m[j]||b,parts:[g,i.join(<span class="string">" "</span>),j],delegate:f?e[<span class="number">0</span>]:<span class="literal">undefined</span>}}},processors:{},defaults:{}},{setup:<span class="keyword">function</span>(b,c){<span class="keyword">var</span> d,f=<span class="keyword">this</span>.constructor,g=f.pluginName||f._fullName;<span class="keyword">return</span> <span class="keyword">this</span>.element=a.$(b),g&amp;&amp;<span class="string">"can_control"</span>!==g&amp;&amp;<span class="keyword">this</span>.element.addClass(g),(d=a.data(<span class="keyword">this</span>.element,<span class="string">"controls"</span>))||a.data(<span class="keyword">this</span>.element,<span class="string">"controls"</span>,d=[]),d.push(<span class="keyword">this</span>),<span class="keyword">this</span>.options=e({},f.defaults,c),<span class="keyword">this</span>.on(),[<span class="keyword">this</span>.element,<span class="keyword">this</span>.options]},on:<span class="keyword">function</span>(b,c,d,e){<span class="keyword">if</span>(!b){<span class="keyword">this</span>.off();<span class="keyword">var</span> f,g,h=<span class="keyword">this</span>.constructor,i=<span class="keyword">this</span>._bindings,j=h.actions,l=<span class="keyword">this</span>.element,m=a.Control._shifter(<span class="keyword">this</span>,<span class="string">"destroy"</span>);<span class="keyword">for</span>(f <span class="keyword">in</span> j)j.hasOwnProperty(f)&amp;&amp;(g=j[f]||h._action(f,<span class="keyword">this</span>.options))&amp;&amp;i.push(g.processor(g.delegate||l,g.parts[<span class="number">2</span>],g.parts[<span class="number">1</span>],f,<span class="keyword">this</span>));<span class="keyword">return</span> a.bind.call(l,<span class="string">"destroyed"</span>,m),i.push(<span class="keyword">function</span>(b){a.unbind.call(b,<span class="string">"destroyed"</span>,m)}),i.length}<span class="keyword">return</span><span class="string">"string"</span>==<span class="keyword">typeof</span> b&amp;&amp;(e=d,d=c,c=b,b=<span class="keyword">this</span>.element),e===<span class="literal">undefined</span>&amp;&amp;(e=d,d=c,c=<span class="literal">null</span>),<span class="string">"string"</span>==<span class="keyword">typeof</span> e&amp;&amp;(e=a.Control._shifter(<span class="keyword">this</span>,e)),<span class="keyword">this</span>._bindings.push(k(b,d,e,c)),<span class="keyword">this</span>._bindings.length},off:<span class="keyword">function</span>(){<span class="keyword">var</span> a=<span class="keyword">this</span>.element[<span class="number">0</span>];f(<span class="keyword">this</span>._bindings||[],<span class="keyword">function</span>(b){b(a)}),<span class="keyword">this</span>._bindings=[]},destroy:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="literal">null</span>!==<span class="keyword">this</span>.element){<span class="keyword">var</span> b,c=<span class="keyword">this</span>.constructor,d=c.pluginName||c._fullName;<span class="keyword">this</span>.off(),d&amp;&amp;<span class="string">"can_control"</span>!==d&amp;&amp;<span class="keyword">this</span>.element.removeClass(d),b=a.data(<span class="keyword">this</span>.element,<span class="string">"controls"</span>),b.splice(a.inArray(<span class="keyword">this</span>,b),<span class="number">1</span>),a.trigger(<span class="keyword">this</span>,<span class="string">"destroyed"</span>),<span class="keyword">this</span>.element=<span class="literal">null</span>}}}),m=a.Control.processors,b=<span class="keyword">function</span>(b,c,d,e,f){<span class="keyword">return</span> k(b,c,a.Control._shifter(f,e),d)};<span class="keyword">return</span> f([<span class="string">"change"</span>,<span class="string">"click"</span>,<span class="string">"contextmenu"</span>,<span class="string">"dblclick"</span>,<span class="string">"keydown"</span>,<span class="string">"keyup"</span>,<span class="string">"keypress"</span>,<span class="string">"mousedown"</span>,<span class="string">"mousemove"</span>,<span class="string">"mouseout"</span>,<span class="string">"mouseover"</span>,<span class="string">"mouseup"</span>,<span class="string">"reset"</span>,<span class="string">"resize"</span>,<span class="string">"scroll"</span>,<span class="string">"select"</span>,<span class="string">"submit"</span>,<span class="string">"focusin"</span>,<span class="string">"focusout"</span>,<span class="string">"mouseenter"</span>,<span class="string">"mouseleave"</span>,<span class="string">"touchstart"</span>,<span class="string">"touchmove"</span>,<span class="string">"touchcancel"</span>,<span class="string">"touchend"</span>,<span class="string">"touchleave"</span>],<span class="keyword">function</span>(a){m[a]=b}),l}(__m3,__m1),__m24=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="regexp">/^\d+$/</span>,c=<span class="regexp">/([^\[\]]+)|(\[\])/g</span>,d=<span class="regexp">/([^?#]*)(#.*)?$/</span>,e=<span class="keyword">function</span>(a){<span class="keyword">return</span> decodeURIComponent(a.replace(<span class="regexp">/\+/g</span>,<span class="string">" "</span>))};<span class="keyword">return</span> a.extend(a,{deparam:<span class="keyword">function</span>(f){<span class="keyword">var</span> g,h,i={};<span class="keyword">return</span> f&amp;&amp;d.test(f)&amp;&amp;(g=f.split(<span class="string">"&amp;"</span>),a.each(g,<span class="keyword">function</span>(a){<span class="keyword">var</span> d=a.split(<span class="string">"="</span>),f=e(d.shift()),g=e(d.join(<span class="string">"="</span>)),j=i;<span class="keyword">if</span>(f){d=f.match(c);<span class="keyword">for</span>(<span class="keyword">var</span> k=<span class="number">0</span>,l=d.length-<span class="number">1</span>;l&gt;k;k++)j[d[k]]||(j[d[k]]=b.test(d[k+<span class="number">1</span>])||<span class="string">"[]"</span>==d[k+<span class="number">1</span>]?[]:{}),j=j[d[k]];h=d.pop(),<span class="string">"[]"</span>==h?j.push(g):j[h]=g}})),i}}),a}(__m3,__m2),__m23=<span class="keyword">function</span>(a){<span class="keyword">var</span> b=<span class="regexp">/\:([\w\.]+)/g</span>,c=<span class="regexp">/^(?:&amp;[^=]+=[^&amp;]*)+/</span>,d=<span class="keyword">function</span>(b){<span class="keyword">var</span> c=[];<span class="keyword">return</span> a.each(b,<span class="keyword">function</span>(b,d){c.push((<span class="string">"className"</span>===d?<span class="string">"class"</span>:d)+<span class="string">'="'</span>+(<span class="string">"href"</span>===d?b:a.esc(b))+<span class="string">'"'</span>)}),c.join(<span class="string">" "</span>)},e=<span class="keyword">function</span>(a,b){<span class="keyword">var</span> c=<span class="number">0</span>,d=<span class="number">0</span>,e={};<span class="keyword">for</span>(<span class="keyword">var</span> f <span class="keyword">in</span> a.defaults)a.defaults[f]===b[f]&amp;&amp;(e[f]=<span class="number">1</span>,c++);<span class="keyword">for</span>(;d&lt;a.names.length;d++){<span class="keyword">if</span>(!b.hasOwnProperty(a.names[d]))<span class="keyword">return</span>-<span class="number">1</span>;e[a.names[d]]||c++}<span class="keyword">return</span> c},f=!<span class="number">0</span>,g=window.location,h=<span class="keyword">function</span>(a){<span class="keyword">return</span>(a+<span class="string">""</span>).replace(<span class="regexp">/([.?*+\^$\[\]\\(){}|\-])/g</span>,<span class="string">"\\$1"</span>)},i=a.each,j=a.extend;a.route=<span class="keyword">function</span>(c,d){d=d||{};<span class="keyword">var</span> e=[],f=c.replace(b,<span class="keyword">function</span>(b,f,g){e.push(f);<span class="keyword">var</span> h=<span class="string">"\\"</span>+(c.substr(g+b.length,<span class="number">1</span>)||a.route._querySeparator);<span class="keyword">return</span><span class="string">"([^"</span>+h+<span class="string">"]"</span>+(d[f]?<span class="string">"*"</span>:<span class="string">"+"</span>)+<span class="string">")"</span>});<span class="keyword">return</span> a.route.routes[c]={test:<span class="keyword">new</span> RegExp(<span class="string">"^"</span>+f+<span class="string">"($|"</span>+h(a.route._querySeparator)+<span class="string">")"</span>),route:c,names:e,defaults:d,length:c.split(<span class="string">"/"</span>).length},a.route},j(a.route,{_querySeparator:<span class="string">"&amp;"</span>,_paramsMatcher:c,param:<span class="keyword">function</span>(c,d){<span class="keyword">var</span> f,g,h=<span class="number">0</span>,k=c.route,l=<span class="number">0</span>;<span class="keyword">if</span>(<span class="keyword">delete</span> c.route,i(c,<span class="keyword">function</span>(){l++}),i(a.route.routes,<span class="keyword">function</span>(a){<span class="keyword">return</span> g=e(a,c),g&gt;h&amp;&amp;(f=a,h=g),g&gt;=l?!<span class="number">1</span>:<span class="keyword">void</span> <span class="number">0</span>}),a.route.routes[k]&amp;&amp;e(a.route.routes[k],c)===h&amp;&amp;(f=a.route.routes[k]),f){<span class="keyword">var</span> m,n=j({},c),o=f.route.replace(b,<span class="keyword">function</span>(a,b){<span class="keyword">return</span> <span class="keyword">delete</span> n[b],c[b]===f.defaults[b]?<span class="string">""</span>:encodeURIComponent(c[b])});<span class="keyword">return</span> i(f.defaults,<span class="keyword">function</span>(a,b){n[b]===a&amp;&amp;<span class="keyword">delete</span> n[b]}),m=a.param(n),d&amp;&amp;a.route.attr(<span class="string">"route"</span>,f.route),o+(m?a.route._querySeparator+m:<span class="string">""</span>)}<span class="keyword">return</span> a.isEmptyObject(c)?<span class="string">""</span>:a.route._querySeparator+a.param(c)},deparam:<span class="keyword">function</span>(b){<span class="keyword">var</span> c={length:-<span class="number">1</span>};<span class="keyword">if</span>(i(a.route.routes,<span class="keyword">function</span>(a){a.test.test(b)&amp;&amp;a.length&gt;c.length&amp;&amp;(c=a)}),c.length&gt;-<span class="number">1</span>){<span class="keyword">var</span> d=b.match(c.test),e=d.shift(),f=b.substr(e.length-(d[d.length-<span class="number">1</span>]===a.route._querySeparator?<span class="number">1</span>:<span class="number">0</span>)),g=f&amp;&amp;a.route._paramsMatcher.test(f)?a.deparam(f.slice(<span class="number">1</span>)):{};<span class="keyword">return</span> g=j(!<span class="number">0</span>,{},c.defaults,g),i(d,<span class="keyword">function</span>(b,d){b&amp;&amp;b!==a.route._querySeparator&amp;&amp;(g[c.names[d]]=decodeURIComponent(b))}),g.route=c.route,g}<span class="keyword">return</span> b.charAt(<span class="number">0</span>)!==a.route._querySeparator&amp;&amp;(b=a.route._querySeparator+b),a.route._paramsMatcher.test(b)?a.deparam(b.slice(<span class="number">1</span>)):{}},data:<span class="keyword">new</span> a.Observe({}),routes:{},ready:<span class="keyword">function</span>(b){<span class="keyword">return</span> b===!<span class="number">1</span>&amp;&amp;(f=b),(b===!<span class="number">0</span>||f===!<span class="number">0</span>)&amp;&amp;(a.route._setup(),o()),a.route},url:<span class="keyword">function</span>(b,c){<span class="keyword">return</span> c&amp;&amp;(b=j({},l,b)),<span class="string">"#!"</span>+a.route.param(b)},link:<span class="keyword">function</span>(b,c,e,f){<span class="keyword">return</span><span class="string">"&lt;a "</span>+d(j({href:a.route.url(c,f)},e))+<span class="string">"&gt;"</span>+b+<span class="string">"&lt;/a&gt;"</span>},current:<span class="keyword">function</span>(b){<span class="keyword">return</span> g.hash==<span class="string">"#!"</span>+a.route.param(b)},_setup:<span class="keyword">function</span>(){a.bind.call(window,<span class="string">"hashchange"</span>,o)},_getHash:<span class="keyword">function</span>(){<span class="keyword">return</span> g.href.split(<span class="regexp">/#!?/</span>)[<span class="number">1</span>]||<span class="string">""</span>},_setHash:<span class="keyword">function</span>(b){<span class="keyword">var</span> c=a.route.param(b,!<span class="number">0</span>);<span class="keyword">return</span> g.hash=<span class="string">"#!"</span>+c,c}}),i([<span class="string">"bind"</span>,<span class="string">"unbind"</span>,<span class="string">"delegate"</span>,<span class="string">"undelegate"</span>,<span class="string">"attr"</span>,<span class="string">"removeAttr"</span>],<span class="keyword">function</span>(b){a.route[b]=<span class="keyword">function</span>(){<span class="keyword">return</span> a.route.data[b]?a.route.data[b].apply(a.route.data,arguments):<span class="keyword">void</span> <span class="number">0</span>}});<span class="keyword">var</span> k,l,m,n,o=a.route.setState=<span class="keyword">function</span>(){<span class="keyword">var</span> b=a.route._getHash();l=a.route.deparam(b),n&amp;&amp;b===m||a.route.attr(l,!<span class="number">0</span>)};<span class="keyword">return</span> a.route.bind(<span class="string">"change"</span>,<span class="keyword">function</span>(){n=<span class="number">1</span>,clearTimeout(k),k=setTimeout(<span class="keyword">function</span>(){n=<span class="number">0</span>;<span class="keyword">var</span> b=a.route.data.serialize();m=a.route._setHash(b)},<span class="number">1</span>)}),a.bind.call(document,<span class="string">"ready"</span>,a.route.ready),<span class="string">"complete"</span>!==document.readyState&amp;&amp;<span class="string">"interactive"</span>!==document.readyState||!f||a.route.ready(),a.route.constructor.canMakeObserve=a.Observe.canMakeObserve,a.route}(__m3,__m11,__m24),__m25=<span class="keyword">function</span>(a){<span class="keyword">return</span> a.Control.processors.route=<span class="keyword">function</span>(b,c,d,e,f){d=d||<span class="string">""</span>,a.route(d);<span class="keyword">var</span> g,h=<span class="keyword">function</span>(b){<span class="keyword">if</span>(a.route.attr(<span class="string">"route"</span>)===d&amp;&amp;(b.batchNum===<span class="literal">undefined</span>||b.batchNum!==g)){g=b.batchNum;<span class="keyword">var</span> c=a.route.attr();<span class="keyword">delete</span> c.route,a.isFunction(f[e])?f[e](c):f[f[e]](c)}};<span class="keyword">return</span> a.route.bind(<span class="string">"change"</span>,h),<span class="keyword">function</span>(){a.route.unbind(<span class="string">"change"</span>,h)}},a}(__m3,__m23,__m22);window.can=__m4}();</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
