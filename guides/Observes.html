<!DOCTYPE html>

<!--[if lt IE 7]>
<html class="no-js ie lt-ie9 lt-ie8 lt-ie7" lang="en">
<![endif]-->
<!--[if IE 7]>
<html class="no-js ie lt-ie9 lt-ie8" lang="en">
<![endif]-->
<!--[if IE 8]>
<html class="no-js ie lt-ie9" lang="en">
<![endif]-->
<!--[if IE 9]>
<html class="no-js ie ie9" lang="en">
<![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
	<meta charset="utf-8">
	<title>CanJS - Observable Objects </title>
	<meta name="description" content="">
	<meta name="author" content="">

	<link rel="stylesheet" type="text/css" href="../resources/styles.css" />
	<!--[if lt IE 9]>
   <script type="text/javascript" src="../shared/resources/html5shiv.js"></script>
    <!--<![endif]-->
</head>

<body class="guides">
	<header>
		<nav class="container">

			<div class="logo-menu">
				<a class="brand canjs" href="../index.html">CanJS</a>
				<ul class="dropdown-menu">
					<li><a href="http://javascriptmvc.com">JavaScriptMVC</a></li>
					<li class="active"><a href="../index.html">CanJS</a></li>
					<li><a href="http://jquerypp.com">jQuery++</a></li>
					<li><a href="http://javascriptmvc.com/docs.html#!stealjs">StealJS</a></li>
					<li><a href="http://javascriptmvc.com/docs.html#!FuncUnit">FuncUnit</a></li>
					<li><a href="http://javascriptmvc.com/docs.html#!DocumentJS">DocumentJS</a></li>
				</ul>
			</div>

			<ul class="nav">
				<li class=""><a href="../index.html">Home</a></li>
				<li class="active"><a href="../guides/index.html">Guides</a></li>
				<li class=""><a href="../docs/index.html">Api</a></li>
				<li class=""><a href="../community.html#!forums">Community</a></li>
				<li class=""><a href="../download.html">Download</a></li>
			</ul>

			<div class="pull-right">
				<div class="bitovi-menu">
					<a href="http://bitovi.com" class="bitovi icon-bits">Bitovi</a>
					<ul class="dropdown-menu">
						<li><a href="http://bitovi.com">Bitovi.com</a></li>
						<li><a href="http://bitovi.com/blog/">Blog</a></li>
						<li><a href="http://bitovi.com/consulting/">Consulting</a></li>
						<li><a href="http://bitovi.com/training/">Training</a></li>
						<li><a href="http://bitovi.com/open-source/">Open Source</a></li>
						<li><a href="http://bitovi.com/people/">People</a></li>
						<li><a href="http://bitovi.com/contact/">Contact Us</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</header>

	<div class="container api">
	<nav class="sidebar">
		
		<ul class="api">
	
	<li class="search-container active">
		<a href="Tutorial.html" data-search="Getting Started">
			Getting Started
		</a>
		
		<ul class="search-container">
		
			
				

<li class="search-container ">
<a href="Constructs.html" data-search="Constructor Functions">
	Constructor Functions
</a>
</li>



			
		
			
				

<li class="search-container active">
<a href="Observes.html" data-search="Observable Objects">
	Observable Objects
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Models.html" data-search="Models &amp; Retrieving Data">
	Models &amp; Retrieving Data
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Templates.html" data-search="Templates">
	Templates
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="EJS.html" data-search="EJS">
	EJS
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Mustache.html" data-search="Mustache">
	Mustache
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Controls.html" data-search="Controls">
	Controls
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Deferreds.html" data-search="Deferreds">
	Deferreds
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Routing.html" data-search="Routing">
	Routing
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Utilities.html" data-search="Utility Functions">
	Utility Functions
</a>
</li>



			
		
		</ul>
	
	</li>
	
	<li class="search-container">
		<a href="Using.html" data-search="Using CanJS">
			Using CanJS
		</a>
		
	</li>
	
	<li class="search-container">
		<a href="Why.html" data-search="Why CanJS?">
			Why CanJS?
		</a>
		
	</li>
	
	<li class="search-container">
		<a href="Recipes.html" data-search="Recipes">
			Recipes
		</a>
		
		<ul class="search-container">
		
			
				

<li class="search-container ">
<a href="RecipesControls.html" data-search="Controls">
	Controls
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="RecipesLiveBindings.html" data-search="Live Bindings">
	Live Bindings
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="RecipesRouting.html" data-search="Routing">
	Routing
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="RecipesModels.html" data-search="Models">
	Models
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="RecipesEverything.html" data-search="Everything Together">
	Everything Together
</a>
</li>



			
		
		</ul>
	
	</li>
	
	<li class="search-container">
		<a href="contributing.html" data-search="How to Contribute">
			How to Contribute
		</a>
		
	</li>
	
	<li class="search-container">
		<a href="changelog.html" data-search="Changelog">
			Changelog
		</a>
		
	</li>
	
	<li class="search-container">
		<a href="license.html" data-search="License">
			License
		</a>
		
	</li>
	
</ul>
	</nav>
	<article class="content docs">
		<section class="title">
			<div class="pull-right">
	<ul class="tags">
		<li>page</li>
	</ul>
	<ul class="links">
		
			<li><a href="https://github.com/bitovi/canjs/wiki/observes">source</a></li>
		
		
			
		
		
	</ul>
</div>

<h1>

	Observable Objects
	
		<span class="module">Observes</span>
	


</h1>

<span class="inherits">&nbsp;</span>

		</section>

		<section class="contents">
		</section>

		<section class="description">
			
		</section>

		

		
		<section class="comment">
			<p>Observes made with can.Observe will let you set and remove properties like on
normal objects, but they also emit events when properties change that you can
listen to. Observes also make it easy to work with nested properties and get the
events you expect. Both <a href="../docs/can.route.html">can.Route</a> and <a href="../docs/can.Model.html">Models</a> are based on can.Observe, but
Observes are also useful on their own: for example, to maintain client-side
state like pagination data.</p>

<p>To create an Observe, call <code>new can.Observe(obj)</code>. This will give you an Observe
with the same properties and values as <em>obj</em>. can.Observe also provides
<a href="../docs/can.Observe.List.html">observable arrays called Lists</a>. To create a List, call <code>new
can.Observe.List(array)</code>, which will give you a List with the same elements as
<em>array</em>.</p>

<pre><code class="lang-javascript">var pagination = new can.Observe({page: 1, perPage: 25, count: 1388});
pagination.perPage; // 25

var hobbies = new can.Observe.List(['programming', 'basketball', 'partying']);
hobbies[2]; // 'partying'</code></pre>

<h2>Getting and setting properties</h2>

<p>Though you can read properties from an Observe in the normal way, if you want to
set the value of a property, you'll need to use <a href="../docs/can.Observe.prototype.attr.html">attr</a>(). There are a couple
ways to use attr to set a property, and it can also be used to get property
values, or get a regular object back from an Observe:</p>

<pre><code class="lang-javascript">pagination.attr('perPage');     // 25
pagination.attr('perPage', 50);
pagination.perPage;             // 50

pagination.attr({page: 10, lastVisited: 1});
pagination.attr(); // {page: 10, perPage: 50, count: 1388, lastVisited: 1}</code></pre>

<p>It might not make sense to get properties from an Observe using <code>attr</code> when you
can read them directly, but when reading properties for use in a template with
<a href="../docs/can.view.html">can.view</a> or when using a property in a Compute, using <code>attr</code> tells the
template or compute you want to watch that value in case it changes.</p>

<p>Properties can be removed from Observes with <code>removeAttr</code>. This is the
equivalent of the <code>delete</code> keyword:</p>

<pre><code class="lang-javascript">pagination.removeAttr('count');
pagination.attr(); // {page: 10, perPage: 50, lastVisited: 1}</code></pre>

<h2>Listening to events</h2>

<p>When a property on an Observe is changed with <code>attr</code>, the Observe will emit two
events: a <em>change</em> event and an event with the same name as the property that
was changed. You can listen for these events by using
<a href="../docs/can.Observe.prototype.bind.html">bind</a>:</p>

<pre><code class="lang-javascript">paginate.bind('change', function(event, attr, how, newVal, oldVal) {
    attr;   // 'perPage'
    how;    // 'set'
    newVal; // 30
    oldVal; // 50
});
paginate.bind('perPage', function(event, newVal, oldVal) {
    newVal; // 30
    oldVal; // 50
});

paginate.attr('perPage', 30);</code></pre>

<p>You can similarly stop listening to these events by using <a href="../docs/can.Observe.prototype.unbind.html">unbind</a>:</p>

<pre><code class="lang-javascript">var timesChanged = 0,
    changeHandler = function() { timesChanged++; },
    obs = new can.Observe({value: 10});

obs.bind('change', changeHandler);
obs.attr('value', 20);
timesChanged; // 1

obs.unbind('change', changeHandler);
obs.attr('value', 30);
timesChanged; // 1</code></pre>

<h2>Iterating though an Observe</h2>

<p>If you want to iterate through the properties on an Observe, use <code>each</code>:</p>

<pre><code class="lang-javascript">paginate.each(function(val, key) {
    console.log(key + ': ' + val);
});

// The console shows:
// page: 10
// perPage: 30
// lastVisited: 1</code></pre>

<h2>Observable arrays</h2>

<p>As mentioned above, CanJS also provides observable arrays with can.Observe.List.
can.Observe.List inherits from can.Observe, so a List works much the same way an
Observe does, with the addition of several methods useful for working with
arrays:</p>

<ul>
<li><a href="../docs/can.Observe.List.prototype.indexOf.html">indexOf</a>, which looks for an item in a
List.</li>
<li><a href="../docs/can.Observe.List.prototype.pop.html">pop</a>, which removes the last item from a
List.</li>
<li><a href="../docs/can.Observe.List.prototype.push.html">push</a>, which adds an item to the end of a
List.</li>
<li><a href="../docs/can.Observe.List.prototype.shift.html">shift</a>, which removes the first item from
a List.</li>
<li><a href="../docs/can.Observe.List.prototype.unshift.html">unshift</a>, which adds an item to the front
of a List.</li>
<li><a href="../docs/can.Observe.List.prototype.splice.html">splice</a>, which removes and inserts items
anywhere in a List.</li>
</ul>

<p>When these methods are used to modify a List, the appropriate events are emitted. See <a href="../docs/can.Observe.List.html">the API for Lists</a> for more information on the
arguments passed to those event handlers.</p>

<h2>Observable values</h2>

<p>CanJS also provides a way to make values themselves observable with
<a href="../docs/can.compute.html">can.compute</a>. A Compute represents a value that can be read, set,
and listened to just like an Observe.</p>

<h3>Static Computes</h3>

<p>A simple Compute contains a single value, and is created by calling
<code>can.compute(value)</code>. This value can be read, set, and listened to:</p>

<pre><code class="lang-javascript">// create a Compute
var age = can.compute(25),
    previousAge = 0;

// read the Compute's value
age(); // 25

// listen for changes in the Compute's value
age.bind('change', function(ev, newVal, oldVal) {
    previousAge = oldVal;
});

// set the Compute's value
age(26);

age();       // 26
previousAge; // 25</code></pre>

<h3>Composite Computes</h3>

<p>Computes can also get values derived from other observable values. This type of
Compute is created by calling <code>can.compute(getterFunction)</code>. When the values
the Compute is derived from changes, the value of the Compute changes:</p>

<pre><code class="lang-javascript">var name = new can.Observe({
    first: 'Alice',
    last: 'Liddell'
});
var fullName = can.compute(function() {
    // We use attr to read the values so the compute knows what to listen to.
    return name.attr('first') + ' ' + name.attr('last');
});
var previousName = '';

fullName();   // 'Alice Liddell'

fullName.bind('change', function(ev, newVal, oldVal) {
    previousName = oldVal;
});

name.attr({
    first: 'Allison',
    last: 'Wonderland'
});

fullname();   // 'Allison Wonderland'
previousName; // 'Alice Liddell'</code></pre>

<p>Since the value of the Compute is cached any time a constituent value is
changed, reading the value is fast.</p>

<h3>Converted Computes</h3>

<p>Computes are useful for creating a link to a property in an Observe, and one of
the most frequent examples of this is when converting from one unit to another.</p>

<pre><code class="lang-javascript">// progress ranges from 0 to 1.
var project = new can.Observe({ progress: 0.3 });
var progressPercentage = can.compute(function(newVal) {
    if(newVal !== undefined) {
        // set a value
        project.attr('progress', newVal / 100);
    } else {
        // get the value
        return project.attr('progress') * 100;
    }
});

percentage();     // 30

// Setting percentage...
percentage(75);
// ...updates project.progress!
project.progress; // .75</code></pre>
		</section>
		
	</article>
</div>



	<footer>
		<nav class="container">
			<a class="brand canjs" href="index.html">CanJS</a>
			<ul class="pullright">
				<li><a href="../index.html">Home</a></li>
				<li><a href="../guides/index.html">Guides</a></li>
				<li><a href="../docs/index.html">Api</a></li>
				<li><a href="../community.html#!forums">Community</a></li>
				<li><a href="../download.html">Download</a></li>
			</ul>
		</nav>
	</footer>
	<script type="text/javascript">
		window.Bitovi = {
			URL: {
				BUILDER: 'http://bitbuilder.herokuapp.com/can.custom.js',
				BUILDER_DATA: 'http://bitbuilder.herokuapp.com/canjs',
				BITHUB: 'http://api.bithub.com/api/events/',
				CDN: '//canjs.com/release/'
			}
		}
	</script>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	
		<script type="text/javascript" src="../shared/resources/shared.min.js"></script>
	
	<script type="text/javascript" src="../resources/app.js"></script>
	<!--[if lt IE 9]>
   	<script type="text/javascript">
   	$(function() {
   		Bitovi.OSS.redrawFont();
   	});
   	</script>
    <!--<![endif]-->
    <script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-2302003-11']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
</body>

</html>
