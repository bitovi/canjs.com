<!DOCTYPE html>

<!--[if lt IE 7]>
<html class="no-js ie lt-ie9 lt-ie8 lt-ie7" lang="en">
<![endif]-->
<!--[if IE 7]>
<html class="no-js ie lt-ie9 lt-ie8" lang="en">
<![endif]-->
<!--[if IE 8]>
<html class="no-js ie lt-ie9" lang="en">
<![endif]-->
<!--[if IE 9]>
<html class="no-js ie ie9" lang="en">
<![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
	<meta charset="utf-8">
	<title>CanJS - Mustache </title>
	<meta name="description" content="">
	<meta name="author" content="">

	<link rel="stylesheet" type="text/css" href="../resources/styles.css" />
	<!--[if lt IE 9]>
   <script type="text/javascript" src="../shared/resources/html5shiv.js"></script>
    <!--<![endif]-->
</head>

<body class="guides">
	<header>
		<nav class="container">

			<div class="logo-menu">
				<a class="brand canjs" href="../index.html">CanJS</a>
				<ul class="dropdown-menu">
					<li><a href="http://javascriptmvc.com">JavaScriptMVC</a></li>
					<li class="active"><a href="../index.html">CanJS</a></li>
					<li><a href="http://jquerypp.com">jQuery++</a></li>
					<li><a href="http://javascriptmvc.com/docs.html#!stealjs">StealJS</a></li>
					<li><a href="http://javascriptmvc.com/docs.html#!FuncUnit">FuncUnit</a></li>
					<li><a href="http://javascriptmvc.com/docs.html#!DocumentJS">DocumentJS</a></li>
				</ul>
			</div>

			<ul class="nav">
				<li class=""><a href="../index.html">Home</a></li>
				<li class="active"><a href="../guides/index.html">Guides</a></li>
				<li class=""><a href="../docs/index.html">Api</a></li>
				<li class=""><a href="../community.html#!forums">Community</a></li>
				<li class=""><a href="../download.html">Download</a></li>
			</ul>

			<div class="pull-right">
				<div class="bitovi-menu">
					<a href="http://bitovi.com" class="bitovi icon-bits">Bitovi</a>
					<ul class="dropdown-menu">
						<li><a href="http://bitovi.com">Bitovi.com</a></li>
						<li><a href="http://bitovi.com/blog/">Blog</a></li>
						<li><a href="http://bitovi.com/consulting/">Consulting</a></li>
						<li><a href="http://bitovi.com/training/">Training</a></li>
						<li><a href="http://bitovi.com/open-source/">Open Source</a></li>
						<li><a href="http://bitovi.com/people/">People</a></li>
						<li><a href="http://bitovi.com/contact/">Contact Us</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</header>

	<div class="container api">
	<nav class="sidebar">
		
		<ul class="api">
	
	<li class="search-container active">
		<a href="Tutorial.html" data-search="Getting Started">
			Getting Started
		</a>
		
		<ul class="search-container">
		
			
				

<li class="search-container ">
<a href="Constructs.html" data-search="Constructor Functions">
	Constructor Functions
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Observes.html" data-search="Observable Objects">
	Observable Objects
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Models.html" data-search="Models &amp; Retrieving Data">
	Models &amp; Retrieving Data
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Templates.html" data-search="Templates">
	Templates
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="EJS.html" data-search="EJS">
	EJS
</a>
</li>



			
		
			
				

<li class="search-container active">
<a href="Mustache.html" data-search="Mustache">
	Mustache
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Controls.html" data-search="Controls">
	Controls
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Deferreds.html" data-search="Deferreds">
	Deferreds
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Routing.html" data-search="Routing">
	Routing
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="Utilities.html" data-search="Utility Functions">
	Utility Functions
</a>
</li>



			
		
		</ul>
	
	</li>
	
	<li class="search-container">
		<a href="Using.html" data-search="Using CanJS">
			Using CanJS
		</a>
		
	</li>
	
	<li class="search-container">
		<a href="Why.html" data-search="Why CanJS?">
			Why CanJS?
		</a>
		
	</li>
	
	<li class="search-container">
		<a href="Recipes.html" data-search="Recipes">
			Recipes
		</a>
		
		<ul class="search-container">
		
			
				

<li class="search-container ">
<a href="RecipesControls.html" data-search="Controls">
	Controls
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="RecipesLiveBindings.html" data-search="Live Bindings">
	Live Bindings
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="RecipesRouting.html" data-search="Routing">
	Routing
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="RecipesModels.html" data-search="Models">
	Models
</a>
</li>



			
		
			
				

<li class="search-container ">
<a href="RecipesEverything.html" data-search="Everything Together">
	Everything Together
</a>
</li>



			
		
		</ul>
	
	</li>
	
	<li class="search-container">
		<a href="contributing.html" data-search="How to Contribute">
			How to Contribute
		</a>
		
	</li>
	
	<li class="search-container">
		<a href="changelog.html" data-search="Changelog">
			Changelog
		</a>
		
	</li>
	
	<li class="search-container">
		<a href="license.html" data-search="License">
			License
		</a>
		
	</li>
	
</ul>
	</nav>
	<article class="content docs">
		<section class="title">
			<div class="pull-right">
	<ul class="tags">
		<li>page</li>
	</ul>
	<ul class="links">
		
			<li><a href="https://github.com/bitovi/canjs/wiki/mustache">source</a></li>
		
		
			
		
		
	</ul>
</div>

<h1>

	Mustache
	
		<span class="module">Mustache</span>
	


</h1>

<span class="inherits">&nbsp;</span>

		</section>

		<section class="contents">
		</section>

		<section class="description">
			
		</section>

		

		
		<section class="comment">
			<p><a href="../docs/can.Mustache.html">Mustache</a> provides logic-less templates that will live-bind to
Observes. You can get Mustache functionality as a <a href="http://canjs.us/release/latest/can.view.mustache.js">plugin</a>
for CanJS. Mustach and Handlebar templates are both compatible with CanJS's
Mustache implementation, so you can reuse any existing templates you have.</p>

<p>Mustache is easy to get started with. Templates look like normal HTML, except
they contain special tags for inserting data into the template, iterating
through lists, and filtering blocks.</p>

<p>Here's an example of a template that might render a list of Todos:</p>

<pre><code class="lang-javascript">&lt;script type="text/mustache" id="todosList">
{{#todos}}
&lt;li>{{description}}&lt;/li>
{{/todos}}
&lt;/script></code></pre>

<p>And you can use <code>can.view</code> to render the template:</p>

<pre><code class="lang-javascript">Todo.findAll({}, function(todos) {
    document.getElementById('list')
        .appendChild(can.view('todoList', {todos: todos}));
});</code></pre>

<h2>Magic tags</h2>

<p>There are three kinds of magic tags used in Mustache:</p>

<ul>
<li><code>{{ }}</code> will HTML-escape the value enclosed inside the tags and write it to
the template.</li>
<li><code>{{{ }}}</code> will write the value enclosed inside the tags and write it directly
to the template without escaping it.</li>
<li><code>{{! }}</code> will write nothing to the template and is mostly used for comments.</li>
</ul>

<h3>Keys</h3>

<p>Keys insert data into the template. They reference variables in the current
context.</p>

<p>This template:</p>

<pre><code class="lang-javascript">Name: {{name}}</code></pre>

<p>given this data:</p>

<pre><code class="lang-javascript">{name: 'Alice'}</code></pre>

<p>will render thusly:</p>

<pre><code class="lang-javascript">Name: Alice</code></pre>

<h3>Sections</h3>

<p>Sections contain text blocks and are conditionally rendered based on the value
enclosed in the opening tag. They also change the context inside them to the
key referenced in the opening tag.</p>

<p>For the following examples, we will assume the template is being populated with
this set of data:</p>

<pre><code class="lang-javascript">{
    name: 'Alice Liddell',
    nickname: '',
    friends: ['Bob', 'Eve'],
    enemies: []
}</code></pre>

<p>If the key is <code>undefined</code>, <code>null</code>, <code>false</code>, <code>''</code>, or <code>[]</code>, it is considered
a falsey value and the section is not rendered at all. Neither of these sections
will render:</p>

<pre><code class="lang-javascript">{{#enemies}}
&lt;li>{{.}}&lt;/li>
{{/enemies}}</code></pre>

<pre><code class="lang-javascript">{{#nickname}}{{.}}{{/nickname}}</code></pre>

<p>If the key is a non-empty array, the section will be rendered once for each
element in the array. If it is truthy but not an array, the section is rendered
once.</p>

<p>This template:</p>

<pre><code class="lang-javascript">&lt;h1>{{#name}}{{.}}{{/name}}&lt;/h1>
&lt;ul>
    {{#friends}}
    &lt;li>{{.}}&lt;/li>
    {{/friends}}
&lt;/ul></code></pre>

<p>will render like this:</p>

<pre><code class="lang-javascript">&lt;h1>Alice Liddell&lt;/h1>
&lt;ul>
    &lt;li>Bob&lt;/li>
    &lt;li>Eve&lt;/li>
&lt;/ul></code></pre>

<p>You can also make inverted sections that render if the key referenced in the
opening tag is falsey:</p>

<pre><code class="lang-javascript">&lt;ul>
    {{#friends}}
    &lt;li>{{.}}&lt;/li>
    {{/friends}}
    {{^friends}}
    &lt;li>You have no friends.&lt;/li>
    {{/friends}}
&lt;/ul></code></pre>

<h3>Context</h3>

<p>When Mustache is resolving an object in a section, it sets the current context
to the object value for which it is iterating. (If the key in the opening tag
of a section was not an array, it sets the context to the value of that key.)
You can reference the current context as <code>.</code>.</p>

<p>Internally, Mustache keeps a stack of contexts as the template enters nested
sections and helpers. If a key is not found in the current context, Mustache
will look for the the in each successive parent context until it resolves the
key or runs out of parent contexts.</p>

<p>For example, with this data:</p>

<pre><code class="lang-javascript">{
    brothers: [{name: 'Bob'}, {name: 'David'}],
    sisters: [{name: 'Alice'}, {name: 'Eve'}]
}</code></pre>

<p>and this template:</p>

<pre><code class="lang-javascript">{{#brothers}}
    {{#sisters}}
        {{name}}
    {{/sisters}}
{{/brothers}}</code></pre>

<p>the rendered result will be:</p>

<pre><code class="lang-javascript">Alice
Eve
Alice
Eve</code></pre>

<p>Since there is no <code>sisters</code> key in the context of the elements of the <code>brothers</code>
array, Mustache jumps up to the parent context and resolves <code>sisters</code> there.</p>

<h2>Helpers</h2>

<p>Mustache lets you register functions to be called from inside the template called
helpers. Since Mustache template are logic-less, all your view logic will be
inside helpers.</p>

<p>To use a helper that is local to the template you're rendering, pass it as the
third argument to <code>can.view</code> in an object where the key is the name of the helper
and the value is the helper function:</p>

<pre><code class="lang-javascript">var fragment = can.view('todosList', {todos: todos}, {
    uppercase: function(str) {
        return str.toUppercase();
    }
});</code></pre>

<p>This might be used in a template like this:</p>

<pre><code class="lang-javascript">&lt;script type="text/mustache" id="todosList">
{{#todos}}
&lt;li>{{uppercase description}}&lt;/li>
{{/todos}}
&lt;/script></code></pre>

<p>If a property of an observe is passed to a helper function, the helper will
become a <a href="../docs/can.compute.html">can.compute</a>. As an example, if you had this template:</p>

<pre><code class="lang-javascript">&lt;script type="text/mustache" id="prefixedName">
&lt;div>{{addMs lastName}}&lt;/div>
&lt;/script></code></pre>

<p>And you ran this code:</p>

<pre><code class="lang-javascript">var name = new can.Observe({firstName: 'Alice', lastName: 'Liddell'});
document.getElementById('name')
    .appendChild(can.view('prefixedName', name, {
        addMs: function(lastName) {
            return 'Ms. ' + lastName;
        }
    }));
name.attr({firstName: 'Allison', lastName: 'Wonderland'});</code></pre>

<p>The contents of the &lt;div> would be <code>Ms. Wonderland</code>.</p>

<h3>Global helpers</h3>

<p>You can register global helpers using <a href="../docs/can.Mustache.registerHelper.html">can.Mustache.registerHelper</a>:</p>

<pre><code class="lang-javascript">can.Mustache.registerHelper('i10n', function(str, options) {
    return (Globalize != undefined ? Globalize.localize(str) : str);
});</code></pre>

<h3>Data helpers</h3>

<p>You can use the <code>data</code> helper in Mustache to associate data to an element. This
helper will associate the current context (<code>.</code>) with a key you pass to the
helper.</p>

<p>For example, this template:</p>

<pre><code class="lang-javascript">&lt;script type="text/mustache" id="nameDiv">
&lt;div id="person" {{data 'name'}}>{{firstName}} {{lastName}}&lt;/div>
&lt;/script></code></pre>

<p>lets you do this in code:</p>

<pre><code class="lang-javascript">document.body.appendChild(can.view('nameDiv', {
    firstName: 'Alice',
    lastName: 'Liddell'
}));

var obj = can.data(document.getElementById('person'), 'name');
obj; // { firstName: 'Alice', lastName: 'Liddell'}</code></pre>

<h2>Partials</h2>

<p>You can embed templates in other templates by using partials. Partials inherit
the context where they are called. They are evaluated at render time, so you
should be careful to avoid infinite loops. To include a partial, put its URL or
ID inside <code>{{&gt; }}</code>.</p>

<p>With these templates:</p>

<pre><code class="lang-javascript">&lt;script type="text/mustache" id="names">
&lt;ul>
{{#names}}
    {{>user}}
{{/names}}
&lt;/ul>
&lt;/script>
&lt;script type="text/mustache" id="user">
&lt;li>{{firstName}} {{lastName}}&lt;/li>
&lt;/script></code></pre>

<p>the expanded template at render time would look similar to:</p>

<pre><code class="lang-javascript">&lt;ul>
{{#names}}
    &lt;li>{{firstName}} {{lastName}}&lt;/li>
{{/names}}
&lt;/ul></code></pre>
		</section>
		
	</article>
</div>



	<footer>
		<nav class="container">
			<a class="brand canjs" href="index.html">CanJS</a>
			<ul class="pullright">
				<li><a href="../index.html">Home</a></li>
				<li><a href="../guides/index.html">Guides</a></li>
				<li><a href="../docs/index.html">Api</a></li>
				<li><a href="../community.html#!forums">Community</a></li>
				<li><a href="../download.html">Download</a></li>
			</ul>
		</nav>
	</footer>
	<script type="text/javascript">
		window.Bitovi = {
			URL: {
				BUILDER: 'http://bitbuilder.herokuapp.com/can.custom.js',
				BUILDER_DATA: 'http://bitbuilder.herokuapp.com/canjs',
				BITHUB: 'http://api.bithub.com/api/events/',
				CDN: '//canjs.com/release/'
			}
		}
	</script>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	
		<script type="text/javascript" src="../shared/resources/shared.min.js"></script>
	
	<script type="text/javascript" src="../resources/app.js"></script>
	<!--[if lt IE 9]>
   	<script type="text/javascript">
   	$(function() {
   		Bitovi.OSS.redrawFont();
   	});
   	</script>
    <!--<![endif]-->
    <script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-2302003-11']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
</body>

</html>
